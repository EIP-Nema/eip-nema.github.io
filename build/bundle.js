var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s;function a(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function c(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(t){let e;return c(t,(t=>e=t))(),e}function u(t,e,n){t.$$.on_destroy.push(c(e,n))}function d(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function _(t){return null==t?"":t}function p(t,e,n){return t.set(n),e}function f(e){return e&&o(e.destroy)?e.destroy:t}const m="undefined"!=typeof window;let g=m?()=>window.performance.now():()=>Date.now(),h=m?t=>requestAnimationFrame(t):t;const b=new Set;function v(t){b.forEach((e=>{e.c(t)||(b.delete(e),e.f())})),0!==b.size&&h(v)}function y(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function k(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function j(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function E(t){return document.createTextNode(t)}function S(){return E(" ")}function C(){return E("")}function A(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function M(t){return function(e){return e.preventDefault(),t.call(this,e)}}function q(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function O(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function D(t){return""===t?null:+t}function L(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function F(t,e){t.value=null==e?"":e}function T(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}let B,P;function z(){if(void 0===B){B=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){B=!0}}return B}function I(t,e,n){t.classList[n?"add":"remove"](e)}class N{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.e=x(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)w(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach($)}}function H(t){P=t}function R(){if(!P)throw new Error("Function called outside component initialization");return P}function W(t){R().$$.on_mount.push(t)}function Y(){const t=R();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}function V(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const X=[],U=[],K=[],G=[],J=Promise.resolve();let Z=!1;function Q(t){K.push(t)}function tt(t){G.push(t)}let et=!1;const nt=new Set;function rt(){if(!et){et=!0;do{for(let t=0;t<X.length;t+=1){const e=X[t];H(e),ot(e.$$)}for(H(null),X.length=0;U.length;)U.pop()();for(let t=0;t<K.length;t+=1){const e=K[t];nt.has(e)||(nt.add(e),e())}K.length=0}while(X.length);for(;G.length;)G.pop()();Z=!1,et=!1,nt.clear()}}function ot(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}const it=new Set;let st;function at(){st={r:0,c:[],p:st}}function ct(){st.r||r(st.c),st=st.p}function lt(t,e){t&&t.i&&(it.delete(t),t.i(e))}function ut(t,e,n,r){if(t&&t.o){if(it.has(t))return;it.add(t),st.c.push((()=>{it.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const dt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function _t(t,e){ut(t,1,1,(()=>{e.delete(t.key)}))}function pt(t,e,n,r,o,i,s,a,c,l,u,d){let _=t.length,p=i.length,f=_;const m={};for(;f--;)m[t[f].key]=f;const g=[],h=new Map,b=new Map;for(f=p;f--;){const t=d(o,i,f),a=n(t);let c=s.get(a);c?r&&c.p(t,e):(c=l(a,t),c.c()),h.set(a,g[f]=c),a in m&&b.set(a,Math.abs(f-m[a]))}const v=new Set,y=new Set;function w(t){lt(t,1),t.m(a,u),s.set(t.key,t),u=t.first,p--}for(;_&&p;){const e=g[p-1],n=t[_-1],r=e.key,o=n.key;e===n?(u=e.first,_--,p--):h.has(o)?!s.has(r)||v.has(r)?w(e):y.has(o)?_--:b.get(r)>b.get(o)?(y.add(r),w(e)):(v.add(o),_--):(c(n,s),_--)}for(;_--;){const e=t[_];h.has(e.key)||c(e,s)}for(;p;)w(g[p-1]);return g}function ft(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function mt(t){t&&t.c()}function gt(t,n,i,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:u}=t.$$;a&&a.m(n,i),s||Q((()=>{const n=c.map(e).filter(o);l?l.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(Q)}function ht(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function bt(t,e){-1===t.$$.dirty[0]&&(X.push(t),Z||(Z=!0,J.then(rt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function vt(e,o,i,s,a,c,l,u=[-1]){const d=P;H(e);const _=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||d.$$.root};l&&l(_.root);let p=!1;if(_.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return _.ctx&&a(_.ctx[t],_.ctx[t]=o)&&(!_.skip_bound&&_.bound[t]&&_.bound[t](o),p&&bt(e,t)),n})):[],_.update(),p=!0,r(_.before_update),_.fragment=!!s&&s(_.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);_.fragment&&_.fragment.l(t),t.forEach($)}else _.fragment&&_.fragment.c();o.intro&&lt(e.$$.fragment),gt(e,o.target,o.anchor,o.customElement),rt()}H(d)}class yt{$destroy(){ht(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function wt(t,e){t.ondragover=()=>!1,t.addEventListener("drop",(t=>{t.preventDefault(),t.stopPropagation();const n=t.dataTransfer.getData(e.key);if(""==n)return;const r=JSON.parse(n),o=t.clientX,i=t.clientY;e.callback(r,o,i)}))}function $t(t,e){t.draggable=!0,t.addEventListener("dragstart",(t=>{t.dataTransfer.setData(e.key,JSON.stringify(e.object))}))}function kt(e){let n,r,o,i,s;return{c(){n=x("div"),r=x("div"),o=E(e[0]),O(r,"class","clipname svelte-153thqp"),O(n,"class","container svelte-153thqp")},m(t,a){w(t,n,a),y(n,r),y(r,o),i||(s=f($t.call(null,n,e[1])),i=!0)},p(t,[e]){1&e&&L(o,t[0])},i:t,o:t,d(t){t&&$(n),i=!1,s()}}}function xt(t,e,n){let{clipname:r="ClipName"}=e,o={key:"clipObject",object:r};return t.$$set=t=>{"clipname"in t&&n(0,r=t.clipname)},[r,o]}class jt extends yt{constructor(t){super(),vt(this,t,xt,kt,i,{clipname:0})}}function Et(e){let n,o,i,s,c,l,u,d;return{c(){n=x("label"),o=x("img"),s=S(),c=x("input"),O(o,"alt","AddTrackButton"),a(o.src,i=St)||O(o,"src",i),O(o,"class","svelte-636c0t"),O(c,"type","file"),O(c,"accept","audio/*"),c.multiple=!0,c.required=!1,O(c,"class","svelte-636c0t"),O(n,"style",l=`--width:${e[2]}px; --height:${e[1]}px;`),O(n,"class","svelte-636c0t")},m(t,r){w(t,n,r),y(n,o),y(n,s),y(n,c),u||(d=[A(c,"change",e[4]),A(n,"click",e[3])],u=!0)},p(t,[e]){6&e&&l!==(l=`--width:${t[2]}px; --height:${t[1]}px;`)&&O(n,"style",l)},i:t,o:t,d(t){t&&$(n),u=!1,r(d)}}}const St="assets/Add.svg";function Ct(t,e,n){let{height:r=50}=e,{width:o=50}=e,{files:i}=e;return t.$$set=t=>{"height"in t&&n(1,r=t.height),"width"in t&&n(2,o=t.width),"files"in t&&n(0,i=t.files)},[i,r,o,function(e){V.call(this,t,e)},function(){i=this.files,n(0,i)}]}class At extends yt{constructor(t){super(),vt(this,t,Ct,Et,i,{height:1,width:2,files:0})}}const Mt=[];function qt(e,n=t){let r;const o=new Set;function s(t){if(i(e,t)&&(e=t,r)){const t=!Mt.length;for(const t of o)t[1](),Mt.push(t,e);if(t){for(let t=0;t<Mt.length;t+=2)Mt[t][0](Mt[t+1]);Mt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(i,a=t){const c=[i,a];return o.add(c),1===o.size&&(r=n(s)||t),i(e),()=>{o.delete(c),0===o.size&&(r(),r=null)}}}}function Ot(e,n,i){const s=!Array.isArray(e),a=s?[e]:e,l=n.length<2;return u=e=>{let i=!1;const u=[];let d=0,_=t;const p=()=>{if(d)return;_();const r=n(s?u[0]:u,e);l?e(r):_=o(r)?r:t},f=a.map(((t,e)=>c(t,(t=>{u[e]=t,d&=~(1<<e),i&&p()}),(()=>{d|=1<<e}))));return i=!0,p(),function(){r(f),_()}},{subscribe:qt(i,u).subscribe};var u}const Dt="undefined"!=typeof AudioContext?AudioContext:"undefined"!=typeof webkitAudioContext?webkitAudioContext:void 0;let Lt;const Ft=new Array(32).fill(void 0);function Tt(t){return Ft[t]}Ft.push(void 0,null,!0,!1);let Bt=Ft.length;function Pt(t){const e=Tt(t);return function(t){t<36||(Ft[t]=Bt,Bt=t)}(t),e}let zt=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});zt.decode();let It=null;function Nt(){return null!==It&&It.buffer===Lt.memory.buffer||(It=new Uint8Array(Lt.memory.buffer)),It}function Ht(t,e){return zt.decode(Nt().subarray(t,t+e))}function Rt(t){Bt===Ft.length&&Ft.push(Ft.length+1);const e=Bt;return Bt=Ft[e],Ft[e]=t,e}let Wt=0,Yt=new TextEncoder("utf-8");const Vt="function"==typeof Yt.encodeInto?function(t,e){return Yt.encodeInto(t,e)}:function(t,e){const n=Yt.encode(t);return e.set(n),{read:t.length,written:n.length}};function Xt(t,e,n){if(void 0===n){const n=Yt.encode(t),r=e(n.length);return Nt().subarray(r,r+n.length).set(n),Wt=n.length,r}let r=t.length,o=e(r);const i=Nt();let s=0;for(;s<r;s++){const e=t.charCodeAt(s);if(e>127)break;i[o+s]=e}if(s!==r){0!==s&&(t=t.slice(s)),o=n(o,r,r=s+3*t.length);const e=Nt().subarray(o+s,o+r);s+=Vt(t,e).written}return Wt=s,o}let Ut=null;function Kt(){return null!==Ut&&Ut.buffer===Lt.memory.buffer||(Ut=new Int32Array(Lt.memory.buffer)),Ut}function Gt(t){const e=typeof t;if("number"==e||"boolean"==e||null==t)return`${t}`;if("string"==e)return`"${t}"`;if("symbol"==e){const e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==e){const e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){const e=t.length;let n="[";e>0&&(n+=Gt(t[0]));for(let r=1;r<e;r++)n+=", "+Gt(t[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(!(n.length>1))return toString.call(t);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(t)+")"}catch(t){return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:r}function Jt(t,e,n){Lt._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h2105f326b72972f7(t,e,Rt(n))}const Zt=new Uint32Array(2),Qt=new BigInt64Array(Zt.buffer),te=new BigUint64Array(Zt.buffer);function ee(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`);return t.ptr}let ne=null;function re(){return null!==ne&&ne.buffer===Lt.memory.buffer||(ne=new Float64Array(Lt.memory.buffer)),ne}function oe(t,e){try{return t.apply(this,e)}catch(t){Lt.__wbindgen_exn_store(Rt(t))}}const ie=Object.freeze({Absolute:0,0:"Absolute",Relative:1,1:"Relative"}),se=Object.freeze({Linear:0,0:"Linear",Exponential:1,1:"Exponential",Logarithmic:2,2:"Logarithmic"});class ae{static __wrap(t){const e=Object.create(ae.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_bufferid_free(t)}}class ce{static __wrap(t){const e=Object.create(ce.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_clipid_free(t)}}class le{static __wrap(t){const e=Object.create(le.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_link_free(t)}get_track(){var t=Lt.link_get_track(this.ptr);return 0===t?void 0:fe.__wrap(t)}get_node(){var t=Lt.link_get_node(this.ptr);return 0===t?void 0:_e.__wrap(t)}get_output_index(){return Lt.link_get_output_index(this.ptr)>>>0}}class ue{static __wrap(t){const e=Object.create(ue.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_moduleid_free(t)}}class de{static __wrap(t){const e=Object.create(de.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_moduleinstanceid_free(t)}}class _e{static __wrap(t){const e=Object.create(_e.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_nodeid_free(t)}}class pe{static __wrap(t){const e=Object.create(pe.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_project_free(t)}constructor(t){var e=Xt(t,Lt.__wbindgen_malloc,Lt.__wbindgen_realloc),n=Wt,r=Lt.project_new(e,n);return pe.__wrap(r)}name(){try{const n=Lt.__wbindgen_add_to_stack_pointer(-16);Lt.project_name(n,this.ptr);var t=Kt()[n/4+0],e=Kt()[n/4+1];return Ht(t,e)}finally{Lt.__wbindgen_add_to_stack_pointer(16),Lt.__wbindgen_free(t,e)}}tempo(){return Lt.project_tempo(this.ptr)}volume(){return Lt.project_volume(this.ptr)}set_tempo(t){Lt.project_set_tempo(this.ptr,t)}set_volume(t){Lt.project_set_volume(this.ptr,t)}quartz(){return Lt.project_quartz(this.ptr)}quartz_to_secs(t){Qt[0]=t;const e=Zt[0],n=Zt[1];return Lt.project_quartz_to_secs(this.ptr,e,n)}secs_to_quartz(t){try{const r=Lt.__wbindgen_add_to_stack_pointer(-16);Lt.project_secs_to_quartz(r,this.ptr,t);var e=Kt()[r/4+0],n=Kt()[r/4+1];Zt[0]=e,Zt[1]=n;return Qt[0]}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}set_name(t){var e=Xt(t,Lt.__wbindgen_malloc,Lt.__wbindgen_realloc),n=Wt;Lt.project_set_name(this.ptr,e,n)}current_pos(){try{const n=Lt.__wbindgen_add_to_stack_pointer(-16);Lt.project_current_pos(n,this.ptr);var t=Kt()[n/4+0],e=Kt()[n/4+1];Zt[0]=t,Zt[1]=e;return te[0]}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}set_cursor_pos(t){te[0]=t;const e=Zt[0],n=Zt[1];Lt.project_set_cursor_pos(this.ptr,e,n)}set_cursor_pos_secs(t){Lt.project_set_cursor_pos_secs(this.ptr,t)}copy_clip(t,e,n){var r=Xt(t,Lt.__wbindgen_malloc,Lt.__wbindgen_realloc),o=Wt;Qt[0]=e;const i=Zt[0],s=Zt[1];ee(n,me);var a=n.ptr;n.ptr=0;var c=Lt.project_copy_clip(this.ptr,r,o,i,s,a);return 0===c?void 0:ce.__wrap(c)}is_clip_alive(t){return ee(t,ce),0!==Lt.project_is_clip_alive(this.ptr,t.ptr)}set_clip_buffer(t,e){ee(t,ce),ee(e,ae),Lt.project_set_clip_buffer(this.ptr,t.ptr,e.ptr)}set_clip_name(t,e){ee(t,ce);var n=Xt(e,Lt.__wbindgen_malloc,Lt.__wbindgen_realloc),r=Wt;Lt.project_set_clip_name(this.ptr,t.ptr,n,r)}set_clip_position(t,e){ee(t,ce),Qt[0]=e;const n=Zt[0],r=Zt[1];Lt.project_set_clip_position(this.ptr,t.ptr,n,r)}set_clip_duration(t,e){ee(t,ce),te[0]=e;const n=Zt[0],r=Zt[1];Lt.project_set_clip_duration(this.ptr,t.ptr,n,r)}get_clip_position(t){try{const o=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,ce),Lt.project_get_clip_position(o,this.ptr,t.ptr);var e=Kt()[o/4+0],n=Kt()[o/4+1],r=Kt()[o/4+2];Zt[0]=n,Zt[1]=r;return 0===e?void 0:Qt[0]}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}get_clip_duration(t){try{const o=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,ce),Lt.project_get_clip_duration(o,this.ptr,t.ptr);var e=Kt()[o/4+0],n=Kt()[o/4+1],r=Kt()[o/4+2];Zt[0]=n,Zt[1]=r;return 0===e?void 0:te[0]}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}get_clip_buffer(t){ee(t,ce);var e=Lt.project_get_clip_buffer(this.ptr,t.ptr);return 0===e?void 0:ae.__wrap(e)}get_clip_name(t){try{const r=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,ce),Lt.project_get_clip_name(r,this.ptr,t.ptr);var e=Kt()[r/4+0],n=Kt()[r/4+1];let o;return 0!==e&&(o=Ht(e,n).slice(),Lt.__wbindgen_free(e,1*n)),o}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}delete_clip(t){return ee(t,ce),0!==Lt.project_delete_clip(this.ptr,t.ptr)}get_clip_ids_count(){return Lt.project_get_clip_ids_count(this.ptr)>>>0}get_clip_id(t){var e=Lt.project_get_clip_id(this.ptr,t);return ce.__wrap(e)}get_clip_unique_clip_id_index(t){return ee(t,ce),Lt.project_get_clip_unique_clip_id_index(this.ptr,t.ptr)>>>0}is_module_factory_alive(t){return ee(t,ue),0!==Lt.project_is_module_factory_alive(this.ptr,t.ptr)}create_module_instance(t){ee(t,ue);var e=Lt.project_create_module_instance(this.ptr,t.ptr);return de.__wrap(e)}get_module_factory_name(t){try{const r=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,ue),Lt.project_get_module_factory_name(r,this.ptr,t.ptr);var e=Kt()[r/4+0],n=Kt()[r/4+1];let o;return 0!==e&&(o=Ht(e,n).slice(),Lt.__wbindgen_free(e,1*n)),o}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}get_module_factory_id_count(){return Lt.project_get_module_factory_id_count(this.ptr)>>>0}get_module_factory_id(t){var e=Lt.project_get_module_factory_id(this.ptr,t);return ue.__wrap(e)}play(){Lt.project_play(this.ptr)}stop(){Lt.project_stop(this.ptr)}create_unique_clip(t,e,n){var r=Xt(t,Lt.__wbindgen_malloc,Lt.__wbindgen_realloc),o=Wt;te[0]=e;const i=Zt[0],s=Zt[1];ee(n,ae);var a=Lt.project_create_unique_clip(this.ptr,r,o,i,s,n.ptr);return me.__wrap(a)}is_unique_clip_alive(t){return ee(t,me),0!==Lt.project_is_unique_clip_alive(this.ptr,t.ptr)}set_unique_clip_buffer(t,e){ee(t,me),ee(e,ae),Lt.project_set_unique_clip_buffer(this.ptr,t.ptr,e.ptr)}set_unique_clip_name(t,e){ee(t,me);var n=Xt(e,Lt.__wbindgen_malloc,Lt.__wbindgen_realloc),r=Wt;Lt.project_set_unique_clip_name(this.ptr,t.ptr,n,r)}set_unique_clip_duration(t,e){ee(t,me),te[0]=e;const n=Zt[0],r=Zt[1];Lt.project_set_unique_clip_duration(this.ptr,t.ptr,n,r)}get_unique_clip_duration(t){try{const o=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,me),Lt.project_get_unique_clip_duration(o,this.ptr,t.ptr);var e=Kt()[o/4+0],n=Kt()[o/4+1],r=Kt()[o/4+2];Zt[0]=n,Zt[1]=r;return 0===e?void 0:te[0]}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}get_unique_clip_buffer(t){ee(t,me);var e=Lt.project_get_unique_clip_buffer(this.ptr,t.ptr);return 0===e?void 0:ae.__wrap(e)}get_unique_clip_name(t){try{const r=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,me),Lt.project_get_unique_clip_name(r,this.ptr,t.ptr);var e=Kt()[r/4+0],n=Kt()[r/4+1];let o;return 0!==e&&(o=Ht(e,n).slice(),Lt.__wbindgen_free(e,1*n)),o}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}delete_unique_clip(t){return ee(t,me),0!==Lt.project_delete_unique_clip(this.ptr,t.ptr)}get_unique_clip_ids_count(){return Lt.project_get_unique_clip_ids_count(this.ptr)>>>0}get_unique_clip_id(t){var e=Lt.project_get_unique_clip_id(this.ptr,t);return me.__wrap(e)}create_node(t,e,n,r){ee(t,ue),ee(e,de);var o=Lt.project_create_node(this.ptr,t.ptr,e.ptr,n,r);return _e.__wrap(o)}delete_node(t){return ee(t,_e),0!==Lt.project_delete_node(this.ptr,t.ptr)}set_node_position_by_id(t,e,n){return ee(t,_e),0!==Lt.project_set_node_position_by_id(this.ptr,t.ptr,e,n)}is_node_valid(t){return ee(t,_e),0!==Lt.project_is_node_valid(this.ptr,t.ptr)}get_node_ids_count(){return Lt.project_get_node_ids_count(this.ptr)>>>0}get_node_id(t){var e=Lt.project_get_node_id(this.ptr,t);return _e.__wrap(e)}get_node_name(t){try{const r=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,_e),Lt.project_get_node_name(r,this.ptr,t.ptr);var e=Kt()[r/4+0],n=Kt()[r/4+1];let o;return 0!==e&&(o=Ht(e,n).slice(),Lt.__wbindgen_free(e,1*n)),o}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}get_node_module_instance_id(t){ee(t,_e);var e=Lt.project_get_node_module_instance_id(this.ptr,t.ptr);return de.__wrap(e)}set_node_position(t,e,n){ee(t,_e),Lt.project_set_node_position(this.ptr,t.ptr,e,n)}get_node_x(t){return ee(t,_e),Lt.project_get_node_x(this.ptr,t.ptr)}get_node_y(t){return ee(t,_e),Lt.project_get_node_y(this.ptr,t.ptr)}link_nodes(t,e,n,r){return ee(t,_e),ee(e,_e),0!==Lt.project_link_nodes(this.ptr,t.ptr,e.ptr,n,r)}link_node_to_track(t,e,n){ee(t,_e),ee(e,fe),Lt.project_link_node_to_track(this.ptr,t.ptr,e.ptr,n)}input_count(t){return ee(t,_e),Lt.project_input_count(this.ptr,t.ptr)>>>0}output_count(t){return ee(t,_e),Lt.project_output_count(this.ptr,t.ptr)>>>0}get_param_id(t,e){try{const i=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,_e),Lt.project_get_param_id(i,this.ptr,t.ptr,e);var n=Kt()[i/4+0],r=Kt()[i/4+1],o=Kt()[i/4+2];Zt[0]=r,Zt[1]=o;return 0===n?void 0:te[0]}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}get_link(t,e){ee(t,_e);var n=Lt.project_get_link(this.ptr,t.ptr,e);return le.__wrap(n)}get_link_from_param_id(t){te[0]=t;const e=Zt[0],n=Zt[1];var r=Lt.project_get_link_from_param_id(this.ptr,e,n);return 0===r?void 0:le.__wrap(r)}create_track(t){var e=Xt(t,Lt.__wbindgen_malloc,Lt.__wbindgen_realloc),n=Wt,r=Lt.project_create_track(this.ptr,e,n);return fe.__wrap(r)}delete_track(t){ee(t,fe),Lt.project_delete_track(this.ptr,t.ptr)}get_track_clip_count(t){try{const r=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,fe),Lt.project_get_track_clip_count(r,this.ptr,t.ptr);var e=Kt()[r/4+0],n=Kt()[r/4+1];return 0===e?void 0:n>>>0}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}get_track_name(t){try{const r=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,fe),Lt.project_get_track_name(r,this.ptr,t.ptr);var e=Kt()[r/4+0],n=Kt()[r/4+1];let o;return 0!==e&&(o=Ht(e,n).slice(),Lt.__wbindgen_free(e,1*n)),o}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}get_track_clip(t,e){ee(t,fe);var n=Lt.project_get_track_clip(this.ptr,t.ptr,e);return ce.__wrap(n)}is_track_alive(t){return ee(t,fe),0!==Lt.project_is_track_alive(this.ptr,t.ptr)}set_track_name(t,e){ee(t,fe);var n=Xt(e,Lt.__wbindgen_malloc,Lt.__wbindgen_realloc),r=Wt;Lt.project_set_track_name(this.ptr,t.ptr,n,r)}remove_clip(t,e){ee(t,fe),ee(e,ce),Lt.project_remove_clip(this.ptr,t.ptr,e.ptr)}remove_clip_by_index(t,e){ee(t,fe),Lt.project_remove_clip_by_index(this.ptr,t.ptr,e)}add_clip_to_track(t,e){ee(t,fe),ee(e,ce),Lt.project_add_clip_to_track(this.ptr,t.ptr,e.ptr)}track_id_from_input(t){te[0]=t;const e=Zt[0],n=Zt[1];var r=Lt.project_track_id_from_input(this.ptr,e,n);return 0===r?void 0:fe.__wrap(r)}get_track_gain(t){try{const r=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,fe),Lt.project_get_track_gain(r,this.ptr,t.ptr);var e=Kt()[r/4+0],n=re()[r/8+1];return 0===e?void 0:n}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}get_track_pan(t){try{const r=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,fe),Lt.project_get_track_pan(r,this.ptr,t.ptr);var e=Kt()[r/4+0],n=re()[r/8+1];return 0===e?void 0:n}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}set_track_gain(t,e){ee(t,fe),Lt.project_set_track_gain(this.ptr,t.ptr,e)}set_track_enabled(t,e){ee(t,fe),Lt.project_set_track_enabled(this.ptr,t.ptr,e)}set_track_pan(t,e){ee(t,fe),Lt.project_set_track_pan(this.ptr,t.ptr,e)}is_track_enabled(t){return ee(t,fe),0!==Lt.project_is_track_enabled(this.ptr,t.ptr)}get_module_of(t){ee(t,de);var e=Lt.project_get_module_of(this.ptr,t.ptr);return ue.__wrap(e)}delete_module(t){return ee(t,de),0!==Lt.project_delete_module(this.ptr,t.ptr)}get_module_instance_control_count(t){return ee(t,de),Lt.project_get_module_instance_control_count(this.ptr,t.ptr)>>>0}get_module_instance_control_type(t,e){try{const o=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,de),Lt.project_get_module_instance_control_type(o,this.ptr,t.ptr,e);var n=Kt()[o/4+0],r=Kt()[o/4+1];return Ht(n,r)}finally{Lt.__wbindgen_add_to_stack_pointer(16),Lt.__wbindgen_free(n,r)}}get_module_instance_control_input_label(t,e){try{const o=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,de),Lt.project_get_module_instance_control_input_label(o,this.ptr,t.ptr,e);var n=Kt()[o/4+0],r=Kt()[o/4+1];return Ht(n,r)}finally{Lt.__wbindgen_add_to_stack_pointer(16),Lt.__wbindgen_free(n,r)}}get_module_instance_control_output_label(t,e){try{const o=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,de),Lt.project_get_module_instance_control_output_label(o,this.ptr,t.ptr,e);var n=Kt()[o/4+0],r=Kt()[o/4+1];return Ht(n,r)}finally{Lt.__wbindgen_add_to_stack_pointer(16),Lt.__wbindgen_free(n,r)}}get_module_instance_control_param_label(t,e){try{const o=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,de),Lt.project_get_module_instance_control_param_label(o,this.ptr,t.ptr,e);var n=Kt()[o/4+0],r=Kt()[o/4+1];return Ht(n,r)}finally{Lt.__wbindgen_add_to_stack_pointer(16),Lt.__wbindgen_free(n,r)}}get_module_instance_control_param_default_value(t,e){return ee(t,de),Lt.project_get_module_instance_control_param_default_value(this.ptr,t.ptr,e)}get_module_instance_control_param_min_value(t,e){return ee(t,de),Lt.project_get_module_instance_control_param_min_value(this.ptr,t.ptr,e)}get_module_instance_control_param_max_value(t,e){return ee(t,de),Lt.project_get_module_instance_control_param_max_value(this.ptr,t.ptr,e)}get_module_instance_control_param_value(t,e){return ee(t,de),Lt.project_get_module_instance_control_param_value(this.ptr,t.ptr,e)}set_module_instance_control_param_value(t,e,n){ee(t,de),Lt.project_set_module_instance_control_param_value(this.ptr,t.ptr,e,n)}is_track_index_in_timeline(t){return 0!==Lt.project_is_track_index_in_timeline(this.ptr,t)}get_track_by_index(t){var e=Lt.project_get_track_by_index(this.ptr,t);return fe.__wrap(e)}remove_track_by_index(t){Lt.project_remove_track_by_index(this.ptr,t)}remove_track_by_id(t){ee(t,fe),Lt.project_remove_track_by_id(this.ptr,t.ptr)}get_track_count(){return Lt.project_get_track_count(this.ptr)>>>0}create_buffer(t){var e=function(t,e){const n=e(1*t.length);return Nt().set(t,n/1),Wt=t.length,n}(t,Lt.__wbindgen_malloc),n=Wt;return Pt(Lt.project_create_buffer(this.ptr,e,n))}delete_buffer(t){return ee(t,ae),0!==Lt.project_delete_buffer(this.ptr,t.ptr)}get_buffer_duration(t){try{const r=Lt.__wbindgen_add_to_stack_pointer(-16);ee(t,ae),Lt.project_get_buffer_duration(r,this.ptr,t.ptr);var e=Kt()[r/4+0],n=Kt()[r/4+1];Zt[0]=e,Zt[1]=n;return te[0]}finally{Lt.__wbindgen_add_to_stack_pointer(16)}}is_buffer_alive(t){return ee(t,ae),0!==Lt.project_is_buffer_alive(this.ptr,t.ptr)}}class fe{static __wrap(t){const e=Object.create(fe.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_trackid_free(t)}}class me{static __wrap(t){const e=Object.create(me.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_uniqueclipid_free(t)}}class ge{static __wrap(t){const e=Object.create(ge.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_vec2_free(t)}get x(){return Lt.__wbg_get_vec2_x(this.ptr)}set x(t){Lt.__wbg_set_vec2_x(this.ptr,t)}get y(){return Lt.__wbg_get_vec2_y(this.ptr)}set y(t){Lt.__wbg_set_vec2_y(this.ptr,t)}static new(t,e){var n=Lt.vec2_new(t,e);return ge.__wrap(n)}}async function he(t){void 0===t&&(t=new URL("index_bg.wasm",document.currentScript&&document.currentScript.src||new URL("bundle.js",document.baseURI).href));const e={wbg:{}};e.wbg.__wbindgen_object_drop_ref=function(t){Pt(t)},e.wbg.__wbg_bufferid_new=function(t){return Rt(ae.__wrap(t))},e.wbg.__wbindgen_string_new=function(t,e){return Rt(Ht(t,e))},e.wbg.__wbindgen_object_clone_ref=function(t){return Rt(Tt(t))},e.wbg.__wbindgen_cb_drop=function(t){const e=Pt(t).original;if(1==e.cnt--)return e.a=0,!0;return!1},e.wbg.__wbindgen_string_get=function(t,e){const n=Tt(e);var r="string"==typeof n?n:void 0,o=null==r?0:Xt(r,Lt.__wbindgen_malloc,Lt.__wbindgen_realloc),i=Wt;Kt()[t/4+1]=i,Kt()[t/4+0]=o},e.wbg.__wbg_delayTime_9ac5b7dc014ec35d=function(t){return Rt(Tt(t).delayTime)},e.wbg.__wbg_gain_d4eaca6128dcfd90=function(t){return Rt(Tt(t).gain)},e.wbg.__wbg_instanceof_AudioBuffer_75ae7a42c391f759=function(t){return Tt(t)instanceof AudioBuffer},e.wbg.__wbg_duration_b1826cd5d3410ee3=function(t){return Tt(t).duration},e.wbg.__wbg_frequency_8c3d017b1ec56a31=function(t){return Rt(Tt(t).frequency)},e.wbg.__wbg_detune_d8da7bdbf3f81230=function(t){return Rt(Tt(t).detune)},e.wbg.__wbg_instanceof_AudioNode_ed5150583da4af19=function(t){return Tt(t)instanceof AudioNode},e.wbg.__wbg_numberOfInputs_1f4e15cb1c81e60f=function(t){return Tt(t).numberOfInputs},e.wbg.__wbg_numberOfOutputs_93000d7c5d3817c8=function(t){return Tt(t).numberOfOutputs},e.wbg.__wbg_connect_eb8fcb61cab88f0b=function(){return oe((function(t,e,n,r){return Rt(Tt(t).connect(Tt(e),n>>>0,r>>>0))}),arguments)},e.wbg.__wbg_connect_ba14c50174f91c1f=function(){return oe((function(t,e,n){Tt(t).connect(Tt(e),n>>>0)}),arguments)},e.wbg.__wbg_disconnect_a7d53f0c0236762f=function(){return oe((function(t,e,n,r){Tt(t).disconnect(Tt(e),n>>>0,r>>>0)}),arguments)},e.wbg.__wbg_disconnect_4ebe1430792b62cd=function(){return oe((function(t,e,n){Tt(t).disconnect(Tt(e),n>>>0)}),arguments)},e.wbg.__wbg_destination_6c3ac66ee8b2fe85=function(t){return Rt(Tt(t).destination)},e.wbg.__wbg_sampleRate_ffa6f08191b00934=function(t){return Tt(t).sampleRate},e.wbg.__wbg_currentTime_e231c76a3c011126=function(t){return Tt(t).currentTime},e.wbg.__wbg_new_52bbbd81ffc19dff=function(){return oe((function(){return Rt(new Dt)}),arguments)},e.wbg.__wbg_createBiquadFilter_c3c52028a2109b9d=function(){return oe((function(t){return Rt(Tt(t).createBiquadFilter())}),arguments)},e.wbg.__wbg_createBufferSource_7244d810d62a0bed=function(){return oe((function(t){return Rt(Tt(t).createBufferSource())}),arguments)},e.wbg.__wbg_createChannelMerger_542d0885aa4bdc09=function(){return oe((function(t,e){return Rt(Tt(t).createChannelMerger(e>>>0))}),arguments)},e.wbg.__wbg_createChannelSplitter_95302cbc3f9b9f85=function(){return oe((function(t,e){return Rt(Tt(t).createChannelSplitter(e>>>0))}),arguments)},e.wbg.__wbg_createConstantSource_b41469da72be11da=function(){return oe((function(t){return Rt(Tt(t).createConstantSource())}),arguments)},e.wbg.__wbg_createConvolver_c452427019e40ddc=function(){return oe((function(t){return Rt(Tt(t).createConvolver())}),arguments)},e.wbg.__wbg_createDelay_d178a6d343f579c3=function(){return oe((function(t){return Rt(Tt(t).createDelay())}),arguments)},e.wbg.__wbg_createDynamicsCompressor_ac679007d232220a=function(){return oe((function(t){return Rt(Tt(t).createDynamicsCompressor())}),arguments)},e.wbg.__wbg_createGain_c5f114390c363029=function(){return oe((function(t){return Rt(Tt(t).createGain())}),arguments)},e.wbg.__wbg_createOscillator_976d3c8e16e078b0=function(){return oe((function(t){return Rt(Tt(t).createOscillator())}),arguments)},e.wbg.__wbg_createStereoPanner_6b0ead6c67bbd51c=function(){return oe((function(t){return Rt(Tt(t).createStereoPanner())}),arguments)},e.wbg.__wbg_decodeAudioData_e04afd162e340c7d=function(){return oe((function(t,e){return Rt(Tt(t).decodeAudioData(Tt(e)))}),arguments)},e.wbg.__wbg_setbuffer_c643a88bac27b2bd=function(t,e){Tt(t).buffer=Tt(e)},e.wbg.__wbg_start_2fc7c700ae119a8f=function(){return oe((function(t,e,n,r){Tt(t).start(e,n,r)}),arguments)},e.wbg.__wbg_stop_ceac30cd41a20744=function(){return oe((function(t){Tt(t).stop()}),arguments)},e.wbg.__wbg_offset_d3bf86d8c20965b0=function(t){return Rt(Tt(t).offset)},e.wbg.__wbg_frequency_c790829b1330266e=function(t){return Rt(Tt(t).frequency)},e.wbg.__wbg_detune_0c98198e067c9898=function(t){return Rt(Tt(t).detune)},e.wbg.__wbg_Q_241cc46dcc77b167=function(t){return Rt(Tt(t).Q)},e.wbg.__wbg_gain_74d947d9f01c5ccb=function(t){return Rt(Tt(t).gain)},e.wbg.__wbg_value_51f8c3c3dc0f903a=function(t){return Tt(t).value},e.wbg.__wbg_setvalue_df8236adf40ea2d3=function(t,e){Tt(t).value=e},e.wbg.__wbg_defaultValue_489944cf72078ada=function(t){return Tt(t).defaultValue},e.wbg.__wbg_threshold_773394fed450776b=function(t){return Rt(Tt(t).threshold)},e.wbg.__wbg_knee_62b5c28da556ba51=function(t){return Rt(Tt(t).knee)},e.wbg.__wbg_ratio_a643cb0eb7ff69f4=function(t){return Rt(Tt(t).ratio)},e.wbg.__wbg_attack_f1c47c074c6479ad=function(t){return Rt(Tt(t).attack)},e.wbg.__wbg_release_66aaf443d2ecd4fe=function(t){return Rt(Tt(t).release)},e.wbg.__wbg_pan_060c77bc11ed83a4=function(t){return Rt(Tt(t).pan)},e.wbg.__wbg_instanceof_Error_561efcb1265706d8=function(t){return Tt(t)instanceof Error},e.wbg.__wbg_message_9f7d15ff97fc4102=function(t){return Rt(Tt(t).message)},e.wbg.__wbg_call_346669c262382ad7=function(){return oe((function(t,e,n){return Rt(Tt(t).call(Tt(e),Tt(n)))}),arguments)},e.wbg.__wbg_new_b1d61b5687f5e73a=function(t,e){try{var n={a:t,b:e},r=new Promise(((t,e)=>{const r=n.a;n.a=0;try{return function(t,e,n,r){Lt.wasm_bindgen__convert__closures__invoke2_mut__h0567eb209159ce2b(t,e,Rt(n),Rt(r))}(r,n.b,t,e)}finally{n.a=r}}));return Rt(r)}finally{n.a=n.b=0}},e.wbg.__wbg_resolve_d23068002f584f22=function(t){return Rt(Promise.resolve(Tt(t)))},e.wbg.__wbg_then_2fcac196782070cc=function(t,e){return Rt(Tt(t).then(Tt(e)))},e.wbg.__wbg_then_8c2d62e8ae5978f7=function(t,e,n){return Rt(Tt(t).then(Tt(e),Tt(n)))},e.wbg.__wbg_buffer_397eaa4d72ee94dd=function(t){return Rt(Tt(t).buffer)},e.wbg.__wbg_newwithbyteoffsetandlength_4b9b8c4e3f5adbff=function(t,e,n){return Rt(new Uint8Array(Tt(t),e>>>0,n>>>0))},e.wbg.__wbg_new_a7ce447f15ff496f=function(t){return Rt(new Uint8Array(Tt(t)))},e.wbg.__wbg_buffer_facf0398a281c85b=function(t){return Rt(Tt(t).buffer)},e.wbg.__wbindgen_debug_string=function(t,e){var n=Xt(Gt(Tt(e)),Lt.__wbindgen_malloc,Lt.__wbindgen_realloc),r=Wt;Kt()[t/4+1]=r,Kt()[t/4+0]=n},e.wbg.__wbindgen_throw=function(t,e){throw new Error(Ht(t,e))},e.wbg.__wbindgen_memory=function(){return Rt(Lt.memory)},e.wbg.__wbindgen_closure_wrapper1056=function(t,e,n){var r=function(t,e,n,r){const o={a:t,b:e,cnt:1,dtor:n},i=(...t)=>{o.cnt++;const e=o.a;o.a=0;try{return r(e,o.b,...t)}finally{0==--o.cnt?Lt.__wbindgen_export_2.get(o.dtor)(e,o.b):o.a=e}};return i.original=o,i}(t,e,268,Jt);return Rt(r)},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await t,e);return Lt=n.exports,he.__wbindgen_wasm_module=r,Lt}var be=Object.freeze({__proto__:null,KnobKind:ie,KnobMode:se,AudioBufferSourceFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_audiobuffersourcefactory_free(t)}},AudioBufferWrapper:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_audiobufferwrapper_free(t)}},AudioModule:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_audiomodule_free(t)}get id(){var t=Lt.__wbg_get_audiomodule_id(this.ptr);return ue.__wrap(t)}set id(t){ee(t,ue);var e=t.ptr;t.ptr=0,Lt.__wbg_set_audiomodule_id(this.ptr,e)}get x(){return Lt.__wbg_get_audiomodule_x(this.ptr)>>>0}set x(t){Lt.__wbg_set_audiomodule_x(this.ptr,t)}get y(){return Lt.__wbg_get_audiomodule_y(this.ptr)>>>0}set y(t){Lt.__wbg_set_audiomodule_y(this.ptr,t)}},BiquadFilterFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_biquadfilterfactory_free(t)}},BufferId:ae,ChannelMergerFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_channelmergerfactory_free(t)}},ChannelSplitterFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_channelsplitterfactory_free(t)}},ClipId:ce,ConstantSourceFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_constantsourcefactory_free(t)}},ConvolverFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_convolverfactory_free(t)}},DelayFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_delayfactory_free(t)}},DestinationFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_destinationfactory_free(t)}},DynamicsCompressorFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_dynamicscompressorfactory_free(t)}},GainFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_gainfactory_free(t)}},Link:le,MixerFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_mixerfactory_free(t)}},ModuleId:ue,ModuleInstanceId:de,NodeId:_e,OscillatorFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_oscillatorfactory_free(t)}},Project:pe,ReverbFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_reverbfactory_free(t)}},StereoPannerFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lt.__wbg_stereopannerfactory_free(t)}},TrackId:fe,UniqueClipId:me,Vec2:ge,default:he});const ve=qt();const ye=Ot(ve,((t,e)=>{if(!t)return e({tracks:[],module_names:[],clips:[],unique_clips:[],nodes:[],volume:0,tempo:0,quartz_to_secs:t=>0,secs_to_quartz:t=>0n});function n(e){const n=t.get_track_clip_count(e),r=[...Array(n).keys()].map((n=>{const r=function(e,n){const r=t.get_track_clip(e,n);if(r&&t.is_clip_alive(r))return{id:r,from_unique_clip_index:t.get_clip_unique_clip_id_index(r),index:n,name:t.get_clip_name(r),position:Number(t.get_clip_position(r)),duration:Number(t.get_clip_duration(r)),buffer:[]}}(e,n);return r}));return r}function r(e){return{id:e,name:t.get_track_name(e),clips:n(e),gain:t.get_track_gain(e),pan:t.get_track_pan(e),is_enabled:t.is_track_enabled(e)}}function o(e,n){const r=t.get_clip_name(e),o=t.get_clip_position(e),i=t.get_clip_duration(e);return{from_unique_clip_index:t.get_clip_unique_clip_id_index(e),id:e,index:n,name:r,position:Number(o),duration:Number(i)}}function i(e,n){const r=t.get_unique_clip_name(e),o=t.get_unique_clip_duration(e);return{id:e,index:n,name:r,duration:Number(o)}}e({tracks:function(t){let e=[];const n=t.get_track_count();for(let o=0;o<n;o++){let n=t.get_track_by_index(o);e.push(r(n))}return e}(t),clips:function(t){let e=[];const n=t.get_clip_ids_count();for(let r=0;r<n;r++){const n=t.get_clip_id(r);e.push(o(n,r))}return e}(t),unique_clips:function(t){let e=[];const n=t.get_unique_clip_ids_count();for(let r=0;r<n;r++){const n=t.get_unique_clip_id(r);e.push(i(n,r))}return e}(t),module_names:function(t){const e=t.get_module_factory_id_count(),n=[];for(let r=0;r<e;r++){const e=t.get_module_factory_id(r);n.push({id:r,name:t.get_module_factory_name(e)})}return n}(t),nodes:function(t){const e=t.get_node_ids_count(),n=[];for(let r=0;r<e;r++){const e=t.get_node_id(r),o=t.get_node_name(e),i=t.get_node_x(e),s=t.get_node_y(e),a=t.get_node_module_instance_id(e);let c=[],l=[],u=[];const d=t.get_module_instance_control_count(a);for(let e=0;e<d;e++){const n=t.get_module_instance_control_type(a,e);if("input"==n){const e=c.length,n=t.get_module_instance_control_input_label(a,e);c.push({id:e,label:n})}else if("output"==n){const e=l.length,n=t.get_module_instance_control_output_label(a,e);l.push({id:e,label:n})}else if("param"==n){const e=u.length,n=t.get_module_instance_control_param_label(a,e),r=t.get_module_instance_control_param_default_value(a,e),o=t.get_module_instance_control_param_min_value(a,e),i=t.get_module_instance_control_param_max_value(a,e),s=t.get_module_instance_control_param_value(a,e);u.push({type:0,id:e,object:{label:n,max:i,min:o,default:r,value:s}})}}const _={node_id:e,x:i,y:s,name:o,parameters:u,inputs:c,outputs:l};n.push(_)}return n}(t),volume:function(t){return t.volume()}(t),tempo:function(t){return t.tempo()}(t),quartz_to_secs:e=>t.quartz_to_secs(e),secs_to_quartz:e=>t.secs_to_quartz(e)})}));!async function(){const{Project:t}=await(async(t={})=>{let{importHook:e,serverPath:n}=t,r="/build/assets/audio-engine-ddce67e7.wasm";return null!=n&&(r=n+/[^\/\\]*$/.exec(r)[0]),null!=e&&(r=e(r)),await he(r),be})();ve.set(new t("untitled"))}();var we={subscribe:ye.subscribe,add_buffer:function(t){return new Promise(((e,n)=>{ve.update((r=>(r?.create_buffer(t).then(e).catch(n),r)))}))},add_track:function(t){let e;return ve.update((n=>(e=n.create_track(t),n))),e},add_clip_to_track:function(t,e,n,r){let o;return ve.update((i=>{const s=i.get_unique_clip_id(e),a=i.get_unique_clip_name(s);return o=i.copy_clip(a,BigInt(n),s),r&&i.set_clip_duration(o,BigInt(r)),i.add_clip_to_track(t,o),i})),o},add_unique_clips:async function(t,e){ve.update((n=>((async()=>{for(let r=0;r<t.length;r++){const o=e[r],i=t[r];try{const t=await n.create_buffer(o),e=n.get_buffer_duration(t);n.create_unique_clip(i,e,t)}catch(t){console.log("Couldn't add clip:",i)}}ve.set(n)})(),n)))},set_clip_position:function(t,e,n){n=Math.round(n),ve.update((r=>{const o=r.get_track_clip(t,e);return r.set_clip_position(o,BigInt(n)),r}))},set_clip_duration:function(t,e,n){n=Math.round(n),ve.update((r=>{const o=r.get_track_clip(t,e);return r.set_clip_duration(o,BigInt(n)),r}))},create_node:function(t,e,n){let r,o,i;return ve.update((s=>(r=s?.get_module_factory_id(t),o=s?.create_module_instance(r),i=s?.create_node(r,o,e,n),s))),i},set_node_position:function(t,e,n){ve.update((r=>(r?.set_node_position_by_id(t,e,n),r)))},delete_node:function(t){ve.update((e=>(e?.delete_node(t),e)))},delete_buffer:function(t){ve.update((e=>(e?.delete_buffer(t),e)))},delete_clip:function(t){ve.update((e=>(e?.delete_clip(t),e)))},delete_track:function(t){ve.update((e=>(e?.delete_track(t),e)))},delete_clip_from_track:function(t,e){ve.update((n=>{const r=n.get_track_clip(t,e);return n.remove_clip(t,r),n.delete_clip(r),n}))},set_track_gain:function(t,e){ve.update((n=>(n.set_track_gain(t,e),n)))},set_track_pan:function(t,e){ve.update((n=>(n.set_track_pan(t,e),n)))},set_volume:function(t){ve.update((e=>(e?.set_volume(t),e)))},set_tempo:function(t){ve.update((e=>(e?.set_tempo(t),e)))},set_node_param_value:function(t,e,n){ve.update((r=>{const o=r.get_node_module_instance_id(t);return r?.set_module_instance_control_param_value(o,e,n),r}))},set_track_name:function(t,e){ve.update((n=>(n?.set_track_name(t,e),n)))},set_track_enabled:function(t,e){ve.update((n=>(n.set_track_enabled(t,e),n)))},play:function(){ve.update((t=>(t.play(),t)))},stop:function(){ve.update((t=>(t.stop(),t)))},duplicate_clip:function(t,e,n){ve.update((r=>{const o=r.get_unique_clip_id(e),i=r.get_unique_clip_name(o);let s=r.copy_clip(i,BigInt(n),o);return r.add_clip_to_track(t,s),r}))}};function $e(t,e,n){const r=t.slice();return r[3]=e[n],r}function ke(t){let e,n,r,i,s,a,c;return n=new jt({props:{clipname:t[3].name}}),{c(){e=x("div"),mt(n.$$.fragment),r=S(),T(e,"width","100%"),O(e,"class","svelte-13p1ere")},m(o,l){w(o,e,l),gt(n,e,null),y(e,r),s=!0,a||(c=f(i=$t.call(null,e,je(t[3]))),a=!0)},p(e,r){t=e;const s={};2&r&&(s.clipname=t[3].name),n.$set(s),i&&o(i.update)&&2&r&&i.update.call(null,je(t[3]))},i(t){s||(lt(n.$$.fragment,t),s=!0)},o(t){ut(n.$$.fragment,t),s=!1},d(t){t&&$(e),ht(n),a=!1,c()}}}function xe(t){let e,n,r,o,i,s,a,c,l;function u(e){t[2](e)}let d={};void 0!==t[0]&&(d.files=t[0]),r=new At({props:d}),U.push((()=>ft(r,"files",u)));let _=t[1],p=[];for(let e=0;e<_.length;e+=1)p[e]=ke($e(t,_,e));const f=t=>ut(p[t],1,1,(()=>{p[t]=null}));return{c(){e=x("aside"),n=x("div"),mt(r.$$.fragment),i=S(),s=x("p"),s.textContent="Clips",a=S(),c=x("div");for(let t=0;t<p.length;t+=1)p[t].c();O(s,"class","svelte-13p1ere"),O(n,"class","clip-title svelte-13p1ere"),O(c,"class","clip-stack svelte-13p1ere"),O(e,"class","clip-container svelte-13p1ere")},m(t,o){w(t,e,o),y(e,n),gt(r,n,null),y(n,i),y(n,s),y(e,a),y(e,c);for(let t=0;t<p.length;t+=1)p[t].m(c,null);l=!0},p(t,[e]){const n={};if(!o&&1&e&&(o=!0,n.files=t[0],tt((()=>o=!1))),r.$set(n),2&e){let n;for(_=t[1],n=0;n<_.length;n+=1){const r=$e(t,_,n);p[n]?(p[n].p(r,e),lt(p[n],1)):(p[n]=ke(r),p[n].c(),lt(p[n],1),p[n].m(c,null))}for(at(),n=_.length;n<p.length;n+=1)f(n);ct()}},i(t){if(!l){lt(r.$$.fragment,t);for(let t=0;t<_.length;t+=1)lt(p[t]);l=!0}},o(t){ut(r.$$.fragment,t),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)ut(p[t]);l=!1},d(t){t&&$(e),ht(r),k(p,t)}}}function je(t){return{key:"clipObject",object:t}}function Ee(t,e,n){let r,o=[];return we.subscribe((t=>{n(1,o=t?.unique_clips??[])})),t.$$.update=()=>{1&t.$$.dirty&&null!=r&&(async()=>{let t=[],e=[];for(let n of r){let r=await n.arrayBuffer(),o=new Uint8Array(r);t.push(n.name),e.push(o)}we.add_unique_clips(t,e)})()},[r,o,function(t){r=t,n(0,r)}]}class Se extends yt{constructor(t){super(),vt(this,t,Ee,xe,i,{})}}function Ce(e){let n,o,i,s,a,c,l,u,d,_,p,f,m,g,h,b,v,k,E,C,L,T,B,P,z,I,N,H,R,W,Y;return{c(){n=x("input"),o=S(),i=j("svg"),s=j("circle"),l=j("defs"),u=j("linearGradient"),d=j("stop"),_=j("stop"),p=j("linearGradient"),f=j("stop"),m=j("stop"),g=j("g"),h=j("g"),b=j("line"),T=j("path"),z=j("path"),O(n,"type","number"),n.hidden=!0,O(n,"enabled",e[4]),O(n,"min",e[2]),O(n,"max",e[3]),O(s,"opacity","1"),O(s,"cx","50%"),O(s,"cy","50%"),O(s,"r",a=e[1]/2),O(s,"fill",c="url(#"+(e[4]?"gradient_enabled":"gradient_disabled")+")"),O(d,"stop-color","currentColor"),O(d,"class","knob-gradient-enabled-start svelte-196qqdq"),O(_,"offset","1"),O(_,"stop-color","currentColor"),O(_,"class","knob-gradient-enabled-end svelte-196qqdq"),O(u,"id","gradient_enabled"),O(u,"x1","50%"),O(u,"y1","0"),O(u,"x2","50%"),O(u,"y2","100%"),O(u,"gradientUnits","userSpaceOnUse"),O(f,"stop-color","currentColor"),O(f,"class","knob-gradient-disabled-start svelte-196qqdq"),O(m,"offset","1"),O(m,"stop-color","currentColor"),O(m,"class","knob-gradient-disabled-end svelte-196qqdq"),O(p,"id","gradient_disabled"),O(p,"x1","50%"),O(p,"y1","0"),O(p,"x2","50%"),O(p,"y2","100%"),O(p,"gradientUnits","userSpaceOnUse"),O(b,"stroke-width",v=e[6]/2),O(b,"stroke-linecap","square"),O(b,"stroke","#555555"),O(b,"opacity",k=e[10]?.5:1),O(b,"x1","0"),O(b,"y1",E=2*e[6]-e[1]/2),O(b,"x2","0"),O(b,"y2",C=3*e[6]-e[1]/2),O(h,"transform",L=`translate(${e[1]/2} ${e[1]/2}) rotate(${270*e[9]-135})`),O(T,"opacity","0.25"),O(T,"transform",B=`translate(${e[1]/2} ${e[1]/2}) rotate(-135)`),O(T,"d",P=`\n                M 0,${e[6]/2-e[1]/2}\n                A ${e[1]/2-e[6]/2} ${e[1]/2-e[6]/2} 0 1 1 ${e[6]/2-e[1]/2},0\n            `),O(z,"stroke",I=e[4]?e[5]:"#C4C4C4"),O(z,"stroke-width",e[6]),O(z,"transform",N=`translate(${e[1]/2} ${e[1]/2}) rotate(-135)`),O(z,"opacity",H=Math.abs(e[7]-e[8])<.001?0:1),O(z,"d",R=`\n                M ${Math.cos(e[7])*(e[6]/2-e[1]/2)}\n                ${Math.sin(e[7])*(e[6]/2-e[1]/2)}\n                A ${e[1]/2-e[6]/2} ${e[1]/2-e[6]/2} 0\n                ${e[12]?1:0} ${e[11]?1:0}\n                ${Math.cos(e[8])*(e[6]/2-e[1]/2)}\n                ${Math.sin(e[8])*(e[6]/2-e[1]/2)}\n            `),O(g,"stroke","currentColor"),O(g,"class","knob-line svelte-196qqdq"),O(g,"stroke-width",e[6]),O(g,"stroke-linecap","round"),O(g,"fill","none"),O(i,"width",e[1]),O(i,"height",e[1])},m(t,r){w(t,n,r),F(n,e[0]),w(t,o,r),w(t,i,r),y(i,s),y(i,l),y(l,u),y(u,d),y(u,_),y(l,p),y(p,f),y(p,m),y(i,g),y(g,h),y(h,b),y(g,T),y(g,z),W||(Y=[A(n,"input",e[16]),A(i,"pointerdown",q(M(e[13]))),A(i,"wheel",q(M(e[14])))],W=!0)},p(t,[e]){16&e&&O(n,"enabled",t[4]),4&e&&O(n,"min",t[2]),8&e&&O(n,"max",t[3]),1&e&&D(n.value)!==t[0]&&F(n,t[0]),2&e&&a!==(a=t[1]/2)&&O(s,"r",a),16&e&&c!==(c="url(#"+(t[4]?"gradient_enabled":"gradient_disabled")+")")&&O(s,"fill",c),64&e&&v!==(v=t[6]/2)&&O(b,"stroke-width",v),1024&e&&k!==(k=t[10]?.5:1)&&O(b,"opacity",k),66&e&&E!==(E=2*t[6]-t[1]/2)&&O(b,"y1",E),66&e&&C!==(C=3*t[6]-t[1]/2)&&O(b,"y2",C),514&e&&L!==(L=`translate(${t[1]/2} ${t[1]/2}) rotate(${270*t[9]-135})`)&&O(h,"transform",L),2&e&&B!==(B=`translate(${t[1]/2} ${t[1]/2}) rotate(-135)`)&&O(T,"transform",B),66&e&&P!==(P=`\n                M 0,${t[6]/2-t[1]/2}\n                A ${t[1]/2-t[6]/2} ${t[1]/2-t[6]/2} 0 1 1 ${t[6]/2-t[1]/2},0\n            `)&&O(T,"d",P),48&e&&I!==(I=t[4]?t[5]:"#C4C4C4")&&O(z,"stroke",I),64&e&&O(z,"stroke-width",t[6]),2&e&&N!==(N=`translate(${t[1]/2} ${t[1]/2}) rotate(-135)`)&&O(z,"transform",N),384&e&&H!==(H=Math.abs(t[7]-t[8])<.001?0:1)&&O(z,"opacity",H),6594&e&&R!==(R=`\n                M ${Math.cos(t[7])*(t[6]/2-t[1]/2)}\n                ${Math.sin(t[7])*(t[6]/2-t[1]/2)}\n                A ${t[1]/2-t[6]/2} ${t[1]/2-t[6]/2} 0\n                ${t[12]?1:0} ${t[11]?1:0}\n                ${Math.cos(t[8])*(t[6]/2-t[1]/2)}\n                ${Math.sin(t[8])*(t[6]/2-t[1]/2)}\n            `)&&O(z,"d",R),64&e&&O(g,"stroke-width",t[6]),2&e&&O(i,"width",t[1]),2&e&&O(i,"height",t[1])},i:t,o:t,d(t){t&&$(n),t&&$(o),t&&$(i),W=!1,r(Y)}}}function Ae(t,e,n){let r,o,i,s,a,c,{size:l=30}=e,{progress_type:u="absolute"}=e,{min:d={absolute:0,relative:-1}[u]}=e,{max:_=1}=e,{value:p=0}=e,{enabled:f=!0}=e,{progress_color:m="#FF0149"}=e,{track_width:g=3}=e;const h=Y();return t.$$set=t=>{"size"in t&&n(1,l=t.size),"progress_type"in t&&n(15,u=t.progress_type),"min"in t&&n(2,d=t.min),"max"in t&&n(3,_=t.max),"value"in t&&n(0,p=t.value),"enabled"in t&&n(4,f=t.enabled),"progress_color"in t&&n(5,m=t.progress_color),"track_width"in t&&n(6,g=t.track_width)},t.$$.update=()=>{13&t.$$.dirty&&n(0,p=Math.min(_,Math.max(d,p))),13&t.$$.dirty&&n(9,r=(p-d)/(_-d)),32768&t.$$.dirty&&n(7,o=("absolute"===u?90:225)*(Math.PI/180)),512&t.$$.dirty&&n(8,i=(90+270*r)*(Math.PI/180)),384&t.$$.dirty&&n(12,s=i-o>Math.PI),384&t.$$.dirty&&n(11,a=i>o),1&t.$$.dirty&&n(10,c=0===p)},[p,l,d,_,f,m,g,o,i,r,c,a,s,function(t){t.preventDefault(),t.stopPropagation(),0===t.button&&f&&(this.requestPointerLock=this.requestPointerLock||this.mozRequestPointerLock||this.webkitPointerLockElement,this.requestPointerLock(),this.onpointermove=t=>{t.preventDefault(),t.stopPropagation(),Math.abs(t.movementX)>Math.abs(t.movementY)?n(0,p+=t.movementX/100*(_-d)*.5):n(0,p-=t.movementY/100*(_-d)*.5),p<d&&n(0,p=d),p>_&&n(0,p=_)},this.onpointerup=t=>{t.preventDefault(),t.stopPropagation(),this.onpointermove=null,this.onpointerup=null,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock(),h("change",{value:p})})},function(t){t.preventDefault(),t.stopPropagation(),f&&(n(0,p-=(Math.abs(t.deltaX)>Math.abs(t.deltaY)?t.deltaX:t.deltaY)/400*(_-d)*.5),p<d&&n(0,p=d),p>_&&n(0,p=_),h("change",{value:p}))},u,function(){p=D(this.value),n(0,p),n(3,_),n(2,d)}]}class Me extends yt{constructor(t){super(),vt(this,t,Ae,Ce,i,{size:1,progress_type:15,min:2,max:3,value:0,enabled:4,progress_color:5,track_width:6})}}function qe(t){return"[object Date]"===Object.prototype.toString.call(t)}function Oe(t,e,n,r){if("number"==typeof n||qe(n)){const o=r-n,i=(n-e)/(t.dt||1/60),s=(i+(t.opts.stiffness*o-t.opts.damping*i)*t.inv_mass)*t.dt;return Math.abs(s)<t.opts.precision&&Math.abs(o)<t.opts.precision?r:(t.settled=!1,qe(n)?new Date(n.getTime()+s):n+s)}if(Array.isArray(n))return n.map(((o,i)=>Oe(t,e[i],n[i],r[i])));if("object"==typeof n){const o={};for(const i in n)o[i]=Oe(t,e[i],n[i],r[i]);return o}throw new Error(`Cannot spring ${typeof n} values`)}function De(t,e={}){const n=qt(t),{stiffness:r=.15,damping:o=.8,precision:i=.01}=e;let s,a,c,l=t,u=t,d=1,_=0,p=!1;function f(e,r={}){u=e;const o=c={};if(null==t||r.hard||m.stiffness>=1&&m.damping>=1)return p=!0,s=g(),l=e,n.set(t=u),Promise.resolve();if(r.soft){const t=!0===r.soft?.5:+r.soft;_=1/(60*t),d=0}return a||(s=g(),p=!1,a=function(t){let e;return 0===b.size&&h(v),{promise:new Promise((n=>{b.add(e={c:t,f:n})})),abort(){b.delete(e)}}}((e=>{if(p)return p=!1,a=null,!1;d=Math.min(d+_,1);const r={inv_mass:d,opts:m,settled:!0,dt:60*(e-s)/1e3},o=Oe(r,l,t,u);return s=e,l=t,n.set(t=o),r.settled&&(a=null),!r.settled}))),new Promise((t=>{a.promise.then((()=>{o===c&&t()}))}))}const m={set:f,update:(e,n)=>f(e(u,t),n),subscribe:n.subscribe,stiffness:r,damping:o,precision:i};return m}function Le(t,e){const n=e.params;let r;e.elem_store.subscribe((t=>r=t));const o=De({x:n.posX,y:n.posY},{stiffness:1,damping:1});function i(t){const e=t.clientX-n.mousePosX,r=t.clientY-n.mousePosY;n.mousePosX=t.clientX,n.mousePosY=t.clientY,o.update((t=>{let o=t.x+e,i=t.y+r;return o<0&&(n.mousePosX-=o,o=0),i<0&&(n.mousePosY-=i,i=0),{x:o,y:i}}))}function s(){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s),o.update((t=>(n.updatePos(t.x,t.y,n.mousePosX,n.mousePosY),t)))}return o.subscribe((t=>{null!=r&&(r.style.transform=`translate3d(${t.x}px, ${t.y}px, 0)`)})),t.addEventListener("mousedown",(function(t){n.mousePosX=t.clientX,n.mousePosY=t.clientY,window.addEventListener("mousemove",i),window.addEventListener("mouseup",s)})),{destroy(){t.removeEventListener("mousedown",(()=>console.log("clicks")))}}}function Fe(e){let n,r,o,i,s,a,c,l,u,d;return{c(){n=j("path"),o=S(),i=j("circle"),c=S(),l=j("circle"),O(n,"class","link svelte-1vdfi8j"),O(n,"fill","none"),O(n,"stroke","currentColor"),O(n,"stroke-width",e[1]),O(n,"d",r=`\n    M ${e[0].x},${e[0].y}\n    c ${e[3].x*e[4]},0\n      ${e[3].x*e[2]},${e[3].y}\n      ${e[3].x},${e[3].y}\n  `),O(i,"cx",s=e[0].x),O(i,"cy",a=e[0].y),O(i,"r","4"),O(i,"fill","currentColor"),O(l,"cx",u=e[0].x+e[3].x),O(l,"cy",d=e[0].y+e[3].y),O(l,"r","4"),O(l,"fill","currentColor")},m(t,e){w(t,n,e),w(t,o,e),w(t,i,e),w(t,c,e),w(t,l,e)},p(t,[e]){2&e&&O(n,"stroke-width",t[1]),29&e&&r!==(r=`\n    M ${t[0].x},${t[0].y}\n    c ${t[3].x*t[4]},0\n      ${t[3].x*t[2]},${t[3].y}\n      ${t[3].x},${t[3].y}\n  `)&&O(n,"d",r),1&e&&s!==(s=t[0].x)&&O(i,"cx",s),1&e&&a!==(a=t[0].y)&&O(i,"cy",a),9&e&&u!==(u=t[0].x+t[3].x)&&O(l,"cx",u),9&e&&d!==(d=t[0].y+t[3].y)&&O(l,"cy",d)},i:t,o:t,d(t){t&&$(n),t&&$(o),t&&$(i),t&&$(c),t&&$(l)}}}function Te(t,e,n){let r,o,i,{source:s}=e,{target:a}=e,{linkWidth:c="2"}=e,{stiffness:l=(({x:t})=>1+1/(-1-Math.abs(t)/300))}=e;return t.$$set=t=>{"source"in t&&n(0,s=t.source),"target"in t&&n(5,a=t.target),"linkWidth"in t&&n(1,c=t.linkWidth),"stiffness"in t&&n(6,l=t.stiffness)},t.$$.update=()=>{33&t.$$.dirty&&n(3,r={x:a.x-s.x,y:a.y-s.y}),72&t.$$.dirty&&n(2,o=Math.max(0,Math.min(1,"number"==typeof l?l:l({...r})))),4&t.$$.dirty&&n(4,i=1-o)},[s,c,o,r,i,a,l]}class Be extends yt{constructor(t){super(),vt(this,t,Te,Fe,i,{source:0,target:5,linkWidth:1,stiffness:6})}}function Pe(t){let e,n,r;return n=new Be({props:{source:{x:0,y:0},target:t[2]}}),{c(){e=j("svg"),mt(n.$$.fragment),O(e,"class","link svelte-vx0qyd")},m(t,o){w(t,e,o),gt(n,e,null),r=!0},p(t,e){const r={};4&e&&(r.target=t[2]),n.$set(r)},i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ut(n.$$.fragment,t),r=!1},d(t){t&&$(e),ht(n)}}}function ze(t){let e,n,o,i,s,a,c=t[2]&&Pe(t);return{c(){e=x("button"),n=S(),c&&c.c(),o=C(),O(e,"class","svelte-vx0qyd")},m(r,l){w(r,e,l),t[8](e),w(r,n,l),c&&c.m(r,l),w(r,o,l),i=!0,s||(a=[A(e,"pointerup",t[9]),A(e,"pointerdown",t[10]),A(e,"click",q(t[7]))],s=!0)},p(t,[e]){t[2]?c?(c.p(t,e),4&e&&lt(c,1)):(c=Pe(t),c.c(),lt(c,1),c.m(o.parentNode,o)):c&&(at(),ut(c,1,1,(()=>{c=null})),ct())},i(t){i||(lt(c),i=!0)},o(t){ut(c),i=!1},d(i){i&&$(e),t[8](null),i&&$(n),c&&c.d(i),i&&$(o),s=!1,r(a)}}}function Ie(t,e,n){let{link_data:r=null}=e,{size:o=8}=e,{color:i="var(--color-foreground-2)"}=e;const s=Y();let a=null,c=null;var l;l=()=>{},R().$$.on_destroy.push(l);return t.$$set=t=>{"link_data"in t&&n(0,r=t.link_data),"size"in t&&n(4,o=t.size),"color"in t&&n(5,i=t.color)},t.$$.update=()=>{if(65&t.$$.dirty&&(r||n(2,c=null)),67&t.$$.dirty&&r&&a){let t=r.portDom.getBoundingClientRect(),e=a.getBoundingClientRect();n(2,c={x:t.x-e.x,y:t.y-e.y})}},[r,a,c,s,o,i,null,function(e){V.call(this,t,e)},function(t){U[t?"unshift":"push"]((()=>{a=t,n(1,a)}))},t=>0===t.button&&s("connect",a),t=>0===t.button&&r&&s("wiretake")]}class Ne extends yt{constructor(t){super(),vt(this,t,Ie,ze,i,{link_data:0,size:4,color:5})}}function He(e){let n,o,i;return{c(){n=x("button"),O(n,"class","svelte-hgn9uw"),I(n,"isLink",e[0])},m(t,r){w(t,n,r),o||(i=[A(n,"pointerdown",e[1]),A(n,"click",q(e[2]))],o=!0)},p(t,[e]){1&e&&I(n,"isLink",t[0])},i:t,o:t,d(t){t&&$(n),o=!1,r(i)}}}function Re(t,e,n){let{isLink:r=!1}=e;const o=Y();return t.$$set=t=>{"isLink"in t&&n(0,r=t.isLink)},[r,function(t){0===t.button&&o("wireout",t.currentTarget)},function(e){V.call(this,t,e)}]}class We extends yt{constructor(t){super(),vt(this,t,Re,He,i,{isLink:0})}}function Ye(t,e,n){const r=t.slice();return r[37]=e[n],r[39]=n,r}function Ve(t,e,n){const r=t.slice();return r[40]=e[n],r}function Xe(t,e,n){const r=t.slice();return r[43]=e[n],r[39]=n,r}function Ue(t){let e,n;return e=new Ne({}),e.$on("wiretake",(function(){return t[22](t[43])})),e.$on("connect",(function(...e){return t[23](t[43],...e)})),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},p(e,n){t=e},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Ke(t){let e,n,r,o=t[40].node.type==t[8].Knob&&Ge(t);return{c(){e=x("div"),o&&o.c(),n=S(),T(e,"grid-column",t[40].col),T(e,"grid-row",t[40].row),O(e,"class","node-content svelte-1p4202p")},m(t,i){w(t,e,i),o&&o.m(e,null),y(e,n),r=!0},p(t,i){t[40].node.type==t[8].Knob?o?(o.p(t,i),272&i[0]&&lt(o,1)):(o=Ge(t),o.c(),lt(o,1),o.m(e,n)):o&&(at(),ut(o,1,1,(()=>{o=null})),ct()),(!r||16&i[0])&&T(e,"grid-column",t[40].col),(!r||16&i[0])&&T(e,"grid-row",t[40].row)},i(t){r||(lt(o),r=!0)},o(t){ut(o),r=!1},d(t){t&&$(e),o&&o.d()}}}function Ge(t){let e,n,r,o,i,s,a=t[40].node.object.label+"";return n=new Me({props:{min:t[40].node.object.min,max:t[40].node.object.max,value:t[40].node.object.value,progress_type:t[40].node.object.kind}}),n.$on("change",(function(...e){return t[24](t[40],...e)})),{c(){e=x("div"),mt(n.$$.fragment),r=S(),o=x("h4"),i=E(a),O(e,"class","node-content-knob svelte-1p4202p"),O(o,"class","svelte-1p4202p")},m(t,a){w(t,e,a),gt(n,e,null),w(t,r,a),w(t,o,a),y(o,i),s=!0},p(e,r){t=e;const o={};16&r[0]&&(o.min=t[40].node.object.min),16&r[0]&&(o.max=t[40].node.object.max),16&r[0]&&(o.value=t[40].node.object.value),16&r[0]&&(o.progress_type=t[40].node.object.kind),n.$set(o),(!s||16&r[0])&&a!==(a=t[40].node.object.label+"")&&L(i,a)},i(t){s||(lt(n.$$.fragment,t),s=!0)},o(t){ut(n.$$.fragment,t),s=!1},d(t){t&&$(e),ht(n),t&&$(r),t&&$(o)}}}function Je(t){let e,n,r=null!=t[40]&&Ke(t);return{c(){r&&r.c(),e=C()},m(t,o){r&&r.m(t,o),w(t,e,o),n=!0},p(t,n){null!=t[40]?r?(r.p(t,n),16&n[0]&&lt(r,1)):(r=Ke(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(at(),ut(r,1,1,(()=>{r=null})),ct())},i(t){n||(lt(r),n=!0)},o(t){ut(r),n=!1},d(t){r&&r.d(t),t&&$(e)}}}function Ze(t){let e,n;return e=new We({}),e.$on("wireout",(function(...e){return t[25](t[37],...e)})),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},p(e,n){t=e},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Qe(t){let e,n,i,s,a,c,l,u,d,_,p,m,g,h,b,v=t[5],j=[];for(let e=0;e<v.length;e+=1)j[e]=Ue(Xe(t,v,e));const C=t=>ut(j[t],1,1,(()=>{j[t]=null}));let M=t[4].map(t[15]),q=[];for(let e=0;e<M.length;e+=1)q[e]=Je(Ve(t,M,e));const D=t=>ut(q[t],1,1,(()=>{q[t]=null}));let F=t[6],B=[];for(let e=0;e<F.length;e+=1)B[e]=Ze(Ye(t,F,e));const P=t=>ut(B[t],1,1,(()=>{B[t]=null}));return{c(){e=x("div"),n=x("div");for(let t=0;t<j.length;t+=1)j[t].c();i=S(),s=x("div"),a=x("div"),c=x("h2"),l=E(t[7]),u=S(),d=x("div");for(let t=0;t<q.length;t+=1)q[t].c();p=S(),m=x("div");for(let t=0;t<B.length;t+=1)B[t].c();O(n,"class","input svelte-1p4202p"),O(c,"class","svelte-1p4202p"),O(d,"class","grid svelte-1p4202p"),O(a,"class","content svelte-1p4202p"),O(s,"class","container svelte-1p4202p"),T(s,"--grid-width",t[12]),T(s,"--grid-height",t[11]),T(s,"--border-width",t[2]?"1px":"0px"),O(m,"class","output svelte-1p4202p"),O(e,"class","node svelte-1p4202p"),T(e,"--pos-x",t[0]+"px"),T(e,"--pos-y",t[1]+"px")},m(r,o){w(r,e,o),y(e,n);for(let t=0;t<j.length;t+=1)j[t].m(n,null);y(e,i),y(e,s),y(s,a),y(a,c),y(c,l),y(a,u),y(a,d);for(let t=0;t<q.length;t+=1)q[t].m(d,null);y(e,p),y(e,m);for(let t=0;t<B.length;t+=1)B[t].m(m,null);t[26](e),g=!0,h||(b=[A(s,"mousedown",t[18]),A(s,"mousemove",t[17]),A(s,"mouseup",t[19]),f(_=Le.call(null,s,{params:t[10],elem_store:t[14]}))],h=!0)},p(t,r){if(8744&r[0]){let e;for(v=t[5],e=0;e<v.length;e+=1){const o=Xe(t,v,e);j[e]?(j[e].p(o,r),lt(j[e],1)):(j[e]=Ue(o),j[e].c(),lt(j[e],1),j[e].m(n,null))}for(at(),e=v.length;e<j.length;e+=1)C(e);ct()}if((!g||128&r[0])&&L(l,t[7]),98576&r[0]){let e;for(M=t[4].map(t[15]),e=0;e<M.length;e+=1){const n=Ve(t,M,e);q[e]?(q[e].p(n,r),lt(q[e],1)):(q[e]=Je(n),q[e].c(),lt(q[e],1),q[e].m(d,null))}for(at(),e=M.length;e<q.length;e+=1)D(e);ct()}if((!g||4096&r[0])&&T(s,"--grid-width",t[12]),(!g||2048&r[0])&&T(s,"--grid-height",t[11]),(!g||4&r[0])&&T(s,"--border-width",t[2]?"1px":"0px"),_&&o(_.update)&&1024&r[0]&&_.update.call(null,{params:t[10],elem_store:t[14]}),8776&r[0]){let e;for(F=t[6],e=0;e<F.length;e+=1){const n=Ye(t,F,e);B[e]?(B[e].p(n,r),lt(B[e],1)):(B[e]=Ze(n),B[e].c(),lt(B[e],1),B[e].m(m,null))}for(at(),e=F.length;e<B.length;e+=1)P(e);ct()}(!g||1&r[0])&&T(e,"--pos-x",t[0]+"px"),(!g||2&r[0])&&T(e,"--pos-y",t[1]+"px")},i(t){if(!g){for(let t=0;t<v.length;t+=1)lt(j[t]);for(let t=0;t<M.length;t+=1)lt(q[t]);for(let t=0;t<F.length;t+=1)lt(B[t]);g=!0}},o(t){j=j.filter(Boolean);for(let t=0;t<j.length;t+=1)ut(j[t]);q=q.filter(Boolean);for(let t=0;t<q.length;t+=1)ut(q[t]);B=B.filter(Boolean);for(let t=0;t<B.length;t+=1)ut(B[t]);g=!1},d(n){n&&$(e),k(j,n),k(q,n),k(B,n),t[26](null),h=!1,r(b)}}}function tn(t,e,n){let r,o;var i;!function(t){t[t.Knob=0]="Knob",t[t.Breaker=1]="Breaker"}(i||(i={}));class s{constructor(t,e,n,r){this.node=t,this.index=e,this.row=n,this.col=r}}let{node_id:a}=e,{parameters:c=[]}=e,{inputs:l=[]}=e,{outputs:u=[]}=e,{name:d="Undefined"}=e,{parentid:_="graph-container"}=e,{posX:p=0}=e,{posY:f=0}=e,{links:m=new Map}=e,g=!1,{selected:h=!1}=e;const b=Y();let v,y=1,w=1,$=null,k={posX:p,posY:f,mousePosX:0,mousePosY:0,parentTop:0,parentLeft:0,parentWidth:0,parentHeight:0,updatePos:function(t,e){p==t&&f==e||(n(0,p=t),n(1,f=e),b("move",{posX:p,posY:f}))}},x=qt(v);function j(t,e){we.set_node_param_value(a,t,e)}W((()=>{$=document.getElementById(_),n(10,k.parentTop=$.offsetTop,k),n(10,k.parentLeft=$.offsetLeft,k),n(10,k.parentWidth=$.offsetWidth,k),n(10,k.parentHeight=$.offsetHeight,k)}));return t.$$set=t=>{"node_id"in t&&n(3,a=t.node_id),"parameters"in t&&n(4,c=t.parameters),"inputs"in t&&n(5,l=t.inputs),"outputs"in t&&n(6,u=t.outputs),"name"in t&&n(7,d=t.name),"parentid"in t&&n(20,_=t.parentid),"posX"in t&&n(0,p=t.posX),"posY"in t&&n(1,f=t.posY),"links"in t&&n(21,m=t.links),"selected"in t&&n(2,h=t.selected)},t.$$.update=()=>{512&t.$$.dirty[0]&&x.set(v),272&t.$$.dirty[0]&&n(12,r=()=>{let t=0,e=0;return c.forEach(((n,r,o)=>{n.type==i.Breaker?e=0:e+=1,e>t&&(t=e)})),t}),272&t.$$.dirty[0]&&n(11,o=()=>{let t=1;return c.forEach(((e,n,r)=>{e.type==i.Breaker&&(t+=1)})),t}),t.$$.dirty[0]},[p,f,h,a,c,l,u,d,i,v,k,o,r,b,x,function(t){let e=c.indexOf(t),n=y,r=w;return-1==e?null:t.type==i.Breaker?(y+=1,w=1,null):(w+=1,new s(t,e,n,r))},j,function(t){g=!1},function(t){g=!0},function(t){1==g&&(n(2,h=!h),b("select")),g=!1},_,m,t=>b("wiretake",{input:t,node_id:a}),(t,e)=>{b("connect",{inputPort:e.detail,inputNode:v,inputData:t,inputNodeId:a})},(t,e)=>j(t.index,e.detail.value),(t,e)=>{b("wireout",{outputNode:v,outputPort:e.detail,outputData:t,outputNodeId:a})},function(t){U[t?"unshift":"push"]((()=>{v=t,n(9,v)}))}]}class en extends yt{constructor(t){super(),vt(this,t,tn,Qe,i,{node_id:3,parameters:4,inputs:5,outputs:6,name:7,parentid:20,posX:0,posY:1,links:21,selected:2},null,[-1,-1])}}let nn=!1,rn=!1;function on(t){"Shift"===t.key&&(nn=!0),"Control"===t.key&&(rn=!0)}function sn(t){"Shift"===t.key&&(nn=!1),"Control"===t.key&&(rn=!1)}function an(t){}class cn{constructor(t,e,n,r){this.inputPortData=t,this.portNumber=e,this.nodeId=n,this.portDom=r}}const{Map:ln}=dt;function un(t,e,n){const r=t.slice();return r[28]=e[n],r[30]=n,r}function dn(t,e,n){const r=t.slice();return r[31]=e[n],r}function _n(t){let e,n;return e=new Ne({}),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function pn(t,e){let n,r,o;return r=new en({props:{node_id:e[28].node_id,posX:e[28].x,posY:e[28].y,parameters:e[28].parameters,name:e[28].name,inputs:e[28].inputs,outputs:e[28].outputs,selected:e[7].includes(e[30])}}),r.$on("connect",e[12]),r.$on("wireout",e[11]),r.$on("select",(function(...t){return e[18](e[30],e[28],...t)})),r.$on("move",(function(...t){return e[19](e[28],...t)})),{key:t,first:null,c(){n=C(),mt(r.$$.fragment),this.first=n},m(t,e){w(t,n,e),gt(r,t,e),o=!0},p(t,n){e=t;const o={};8&n[0]&&(o.node_id=e[28].node_id),8&n[0]&&(o.posX=e[28].x),8&n[0]&&(o.posY=e[28].y),8&n[0]&&(o.parameters=e[28].parameters),8&n[0]&&(o.name=e[28].name),8&n[0]&&(o.inputs=e[28].inputs),8&n[0]&&(o.outputs=e[28].outputs),136&n[0]&&(o.selected=e[7].includes(e[30])),r.$set(o)},i(t){o||(lt(r.$$.fragment,t),o=!0)},o(t){ut(r.$$.fragment,t),o=!1},d(t){t&&$(n),ht(r,t)}}}function fn(t){let e,n,r;return n=new Be({props:{source:t[6],target:t[9]}}),{c(){e=j("svg"),mt(n.$$.fragment),O(e,"class","dragged-wire svelte-wk6uwd"),I(e,"visible",!!t[1])},m(t,o){w(t,e,o),gt(n,e,null),r=!0},p(t,r){const o={};64&r[0]&&(o.source=t[6]),512&r[0]&&(o.target=t[9]),n.$set(o),2&r[0]&&I(e,"visible",!!t[1])},i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ut(n.$$.fragment,t),r=!1},d(t){t&&$(e),ht(n)}}}function mn(t){let e,n,o,i,s,a,c,l=[],u=new ln,d=t[4],_=[];for(let e=0;e<d.length;e+=1)_[e]=_n(dn(t,d,e));const p=t=>ut(_[t],1,1,(()=>{_[t]=null}));let m=t[3];const g=t=>t[28].node_id;for(let e=0;e<m.length;e+=1){let n=un(t,m,e),r=g(n);u.set(r,l[e]=pn(r,n))}let h=t[5]&&fn(t);return{c(){e=x("div"),n=x("div");for(let t=0;t<_.length;t+=1)_[t].c();o=S();for(let t=0;t<l.length;t+=1)l[t].c();i=S(),h&&h.c(),O(n,"class","track-stack svelte-wk6uwd"),O(e,"class","graph-container svelte-wk6uwd"),O(e,"id","graph-container"),O(e,"tabindex","0")},m(r,u){w(r,e,u),y(e,n);for(let t=0;t<_.length;t+=1)_[t].m(n,null);y(e,o);for(let t=0;t<l.length;t+=1)l[t].m(e,null);y(e,i),h&&h.m(e,null),t[22](e),s=!0,a||(c=[A(window,"keydown",t[16]),A(e,"pointermove",t[20]),A(e,"pointerup",t[21]),f(wt.call(null,e,t[13]))],a=!0)},p(t,r){if(16&r[0]){const e=d.length;let r;for(d=t[4],r=e;r<d.length;r+=1)dn(t,d,r),_[r]?lt(_[r],1):(_[r]=_n(),_[r].c(),lt(_[r],1),_[r].m(n,null));for(at(),r=d.length;r<_.length;r+=1)p(r);ct()}55432&r[0]&&(m=t[3],at(),l=pt(l,r,g,1,t,m,u,e,_t,pn,i,un),ct()),t[5]?h?(h.p(t,r),32&r[0]&&lt(h,1)):(h=fn(t),h.c(),lt(h,1),h.m(e,null)):h&&(at(),ut(h,1,1,(()=>{h=null})),ct())},i(t){if(!s){for(let t=0;t<d.length;t+=1)lt(_[t]);for(let t=0;t<m.length;t+=1)lt(l[t]);lt(h),s=!0}},o(t){_=_.filter(Boolean);for(let t=0;t<_.length;t+=1)ut(_[t]);for(let t=0;t<l.length;t+=1)ut(l[t]);ut(h),s=!1},d(n){n&&$(e),k(_,n);for(let t=0;t<l.length;t+=1)l[t].d();h&&h.d(),t[22](null),a=!1,r(c)}}}function gn(e,n,r){let o,i,s,a=t;e.$$.on_destroy.push((()=>a()));let l=[];we.subscribe((({nodes:t})=>{r(3,l=t)}));let u=[];we.subscribe((t=>{r(4,u=t.tracks??[])}));let d,_,p={x:0,y:0},f=!1,m={x:0,y:0},g=new Map;function h(t){return _=s.getBoundingClientRect(),{x:t.x-_.left,y:t.y-_.top}}let b={key:"nodeObject",callback:function(t,e,n){e-=s.offsetLeft,n-=s.offsetTop,we.create_node(t,e,n)}},v=[],y=[];function w(t,e){const n=y.includes(t);nn?n?(v=v.filter((t=>t!==e)),r(7,y=y.filter((e=>e!==t)))):(v=[...v,e],r(7,y=[...y,t])):n?(v=[],r(7,y=[])):(v=[e],r(7,y=[t]))}function $(t,e,n){we.set_node_position(t,e,n)}return e.$$.update=()=>{1&e.$$.dirty[0]&&(r(8,o=De({x:p.x,y:p.y},{stiffness:.25,damping:1})),a(),a=c(o,(t=>r(9,i=t)))),2&e.$$.dirty[0]&&r(5,f=null!=d),e.$$.dirty[0],e.$$.dirty[0]},[p,d,s,l,u,f,m,y,o,i,h,function(t){let e=t.detail.outputPort.getBoundingClientRect(),n=h(e);console.log(t),r(1,d=t.detail),r(6,m={x:n.x+e.width/2,y:n.y+e.height/2}),r(5,f=!0)},function(t){if(d){const e=t.detail;g.set(e.inputNodeId,new cn(e.inputData.id,d.outputData,d.outputNodeId,d.outputPort)),r(17,g),console.log(g),r(1,d=null),r(5,f=!1)}},b,w,$,function(t){if("Delete"===t.key){for(const t of v)we.delete_node(t);v=[],r(7,y=[])}},g,(t,e,n)=>w(t,e.node_id),(t,e)=>$(t.node_id,e.detail.posX,e.detail.posY),t=>{let e=h({x:t.x,y:t.y});r(0,p={x:e.x,y:e.y})},()=>r(1,d=null),function(t){U[t?"unshift":"push"]((()=>{s=t,r(2,s)}))}]}class hn extends yt{constructor(t){super(),vt(this,t,gn,mn,i,{},null,[-1,-1])}}function bn(e){let n,r,o,i,s;return{c(){n=x("div"),r=x("span"),o=E(e[0]),O(r,"class","svelte-7s9u7"),O(n,"class","node svelte-7s9u7")},m(t,a){w(t,n,a),y(n,r),y(r,o),i||(s=f($t.call(null,n,e[1])),i=!0)},p(t,[e]){1&e&&L(o,t[0])},i:t,o:t,d(t){t&&$(n),i=!1,s()}}}function vn(t,e,n){let{name:r="Undefined"}=e,{id:o=-1}=e,i={key:"nodeObject",object:o};return t.$$set=t=>{"name"in t&&n(0,r=t.name),"id"in t&&n(2,o=t.id)},[r,i,o]}class yn extends yt{constructor(t){super(),vt(this,t,vn,bn,i,{name:0,id:2})}}function wn(t,e,n){const r=t.slice();return r[1]=e[n],r}function $n(t){let e,n;return e=new yn({props:{name:t[1].name,id:t[1].id}}),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.name=t[1].name),1&n&&(r.id=t[1].id),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function kn(t){let e,n,r,o,i,s=t[0],a=[];for(let e=0;e<s.length;e+=1)a[e]=$n(wn(t,s,e));const c=t=>ut(a[t],1,1,(()=>{a[t]=null}));return{c(){e=x("aside"),n=x("div"),n.innerHTML='<p class="svelte-1gkzcdh">Modules</p>',r=S(),o=x("div");for(let t=0;t<a.length;t+=1)a[t].c();O(n,"class","node-title svelte-1gkzcdh"),O(o,"class","node-stack svelte-1gkzcdh"),O(e,"class","node-container svelte-1gkzcdh")},m(t,s){w(t,e,s),y(e,n),y(e,r),y(e,o);for(let t=0;t<a.length;t+=1)a[t].m(o,null);i=!0},p(t,[e]){if(1&e){let n;for(s=t[0],n=0;n<s.length;n+=1){const r=wn(t,s,n);a[n]?(a[n].p(r,e),lt(a[n],1)):(a[n]=$n(r),a[n].c(),lt(a[n],1),a[n].m(o,null))}for(at(),n=s.length;n<a.length;n+=1)c(n);ct()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)lt(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)ut(a[t]);i=!1},d(t){t&&$(e),k(a,t)}}}function xn(t,e,n){let r=[];return we.subscribe((({module_names:t})=>{n(0,r=t)})),[r]}class jn extends yt{constructor(t){super(),vt(this,t,xn,kn,i,{})}}function En(t){var e={exports:{}};return t(e,e.exports),e.exports}var Sn=En((function(t){(t.exports={}).forEach=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}}})),Cn=En((function(t){var e=t.exports={};e.isIE=function(t){return(-1!==(e=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==e.indexOf("trident")||-1!==e.indexOf(" edge/"))&&(!t||t===function(){var t=3,e=document.createElement("div"),n=e.getElementsByTagName("i");do{e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e"}while(n[0]);return t>4?t:undefined}());var e},e.isLegacyOpera=function(){return!!window.opera}})),An=En((function(t){(t.exports={}).getOption=function(t,e,n){var r=t[e];if(null==r&&void 0!==n)return n;return r}})),Mn=function(t){var e=(t=t||{}).reporter,n=An.getOption(t,"async",!0),r=An.getOption(t,"auto",!0);r&&!n&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var o,i=qn(),s=!1;function a(){for(s=!0;i.size();){var t=i;i=qn(),t.process()}s=!1}function c(){var t;t=a,o=setTimeout(t,0)}return{add:function(t,e){!s&&r&&n&&0===i.size()&&c(),i.add(t,e)},force:function(t){s||(void 0===t&&(t=n),o&&(clearTimeout(o),o=null),t?c():a())}}};function qn(){var t={},e=0,n=0,r=0;return{add:function(o,i){i||(i=o,o=0),o>n?n=o:o<r&&(r=o),t[o]||(t[o]=[]),t[o].push(i),e++},process:function(){for(var e=r;e<=n;e++)for(var o=t[e],i=0;i<o.length;i++){(0,o[i])()}},size:function(){return e}}}function On(t){return t._erd}var Dn={initState:function(t){return t._erd={},On(t)},getState:On,cleanState:function(t){delete t._erd}},Ln=Sn.forEach,Fn=function(t){var e=(t=t||{}).reporter,n=t.batchProcessor,r=t.stateHandler.getState;t.stateHandler.hasState;var o=t.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var i=function(){var t=500,e=500,n=document.createElement("div");n.style.cssText=c(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var r=document.createElement("div");r.style.cssText=c(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),r.appendChild(n),document.body.insertBefore(r,document.body.firstChild);var o=t-r.clientWidth,i=e-r.clientHeight;return document.body.removeChild(r),{width:o,height:i}}(),s="erd_scroll_detection_container";function a(t){!function(t,e,n){function r(n,r){r=r||function(e){t.head.appendChild(e)};var o=t.createElement("style");return o.innerHTML=n,o.id=e,r(o),o}if(!t.getElementById(e)){var o=n+"_animation",i=n+"_animation_active",s="/* Created by the element-resize-detector library. */\n";s+="."+n+" > div::-webkit-scrollbar { "+c(["display: none"])+" }\n\n",s+="."+i+" { "+c(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+o,"animation-name: "+o])+" }\n",s+="@-webkit-keyframes "+o+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",r(s+="@keyframes "+o+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}(t,"erd_scroll_detection_scrollbar_style",s)}function c(e){var n=t.important?" !important; ":"; ";return(e.join(n)+n).trim()}function l(t,n,r){if(t.addEventListener)t.addEventListener(n,r);else{if(!t.attachEvent)return e.error("[scroll] Don't know how to add event listeners.");t.attachEvent("on"+n,r)}}function u(t,n,r){if(t.removeEventListener)t.removeEventListener(n,r);else{if(!t.detachEvent)return e.error("[scroll] Don't know how to remove event listeners.");t.detachEvent("on"+n,r)}}function d(t){return r(t).container.childNodes[0].childNodes[0].childNodes[0]}function _(t){return r(t).container.childNodes[0].childNodes[0].childNodes[1]}return a(window.document),{makeDetectable:function(t,a,u){function p(){if(t.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(o.get(a),"Scroll: "),e.log.apply)e.log.apply(null,n);else for(var r=0;r<n.length;r++)e.log(n[r])}}function f(t){var e=r(t).container.childNodes[0],n=window.getComputedStyle(e);return!n.width||-1===n.width.indexOf("px")}function m(){var t=window.getComputedStyle(a),e={};return e.position=t.position,e.width=a.offsetWidth,e.height=a.offsetHeight,e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e.widthCSS=t.width,e.heightCSS=t.height,e}function g(){if(p("storeStyle invoked."),r(a)){var t=m();r(a).style=t}else p("Aborting because element has been uninstalled")}function h(t,e,n){r(t).lastWidth=e,r(t).lastHeight=n}function b(){return 2*i.width+1}function v(){return 2*i.height+1}function y(t){return t+10+b()}function w(t){return t+10+v()}function $(t,e,n){var r=d(t),o=_(t),i=y(e),s=w(n),a=function(t){return 2*t+b()}(e),c=function(t){return 2*t+v()}(n);r.scrollLeft=i,r.scrollTop=s,o.scrollLeft=a,o.scrollTop=c}function k(){var t=r(a).container;if(!t){(t=document.createElement("div")).className=s,t.style.cssText=c(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),r(a).container=t,function(t){t.className+=" "+s+"_animation_active"}(t),a.appendChild(t);var e=function(){r(a).onRendered&&r(a).onRendered()};l(t,"animationstart",e),r(a).onAnimationStart=e}return t}function x(){if(p("Injecting elements"),r(a)){!function(){var n=r(a).style;if("static"===n.position){a.style.setProperty("position","relative",t.important?"important":"");var o=function(t,e,n,r){var o=n[r];"auto"!==o&&"0"!==function(t){return t.replace(/[^-\d\.]/g,"")}(o)&&(t.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",e),e.style[r]=0)};o(e,a,n,"top"),o(e,a,n,"right"),o(e,a,n,"bottom"),o(e,a,n,"left")}}();var n=r(a).container;n||(n=k());var o,u,d,_,f=i.width,m=i.height,g=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),h=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(["left: "+(o=(o=-(1+f))?o+"px":"0"),"top: "+(u=(u=-(1+m))?u+"px":"0"),"right: "+(_=(_=-f)?_+"px":"0"),"bottom: "+(d=(d=-m)?d+"px":"0")])),b=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),v=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),y=c(["position: absolute","left: 0","top: 0"]),w=c(["position: absolute","width: 200%","height: 200%"]),$=document.createElement("div"),x=document.createElement("div"),j=document.createElement("div"),E=document.createElement("div"),S=document.createElement("div"),C=document.createElement("div");$.dir="ltr",$.style.cssText=g,$.className=s,x.className=s,x.style.cssText=h,j.style.cssText=b,E.style.cssText=y,S.style.cssText=v,C.style.cssText=w,j.appendChild(E),S.appendChild(C),x.appendChild(j),x.appendChild(S),$.appendChild(x),n.appendChild($),l(j,"scroll",A),l(S,"scroll",M),r(a).onExpandScroll=A,r(a).onShrinkScroll=M}else p("Aborting because element has been uninstalled");function A(){r(a).onExpand&&r(a).onExpand()}function M(){r(a).onShrink&&r(a).onShrink()}}function j(){function i(e,n,r){var o=function(t){return d(t).childNodes[0]}(e),i=y(n),s=w(r);o.style.setProperty("width",i+"px",t.important?"important":""),o.style.setProperty("height",s+"px",t.important?"important":"")}function s(s){var l=a.offsetWidth,u=a.offsetHeight,d=l!==r(a).lastWidth||u!==r(a).lastHeight;p("Storing current size",l,u),h(a,l,u),n.add(0,(function(){if(d)if(r(a))if(c()){if(t.debug){var n=a.offsetWidth,s=a.offsetHeight;n===l&&s===u||e.warn(o.get(a),"Scroll: Size changed before updating detector elements.")}i(a,l,u)}else p("Aborting because element container has not been initialized");else p("Aborting because element has been uninstalled")})),n.add(1,(function(){r(a)?c()?$(a,l,u):p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")})),d&&s&&n.add(2,(function(){r(a)?c()?s():p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")}))}function c(){return!!r(a).container}function l(){p("notifyListenersIfNeeded invoked");var t=r(a);return void 0===r(a).lastNotifiedWidth&&t.lastWidth===t.startSize.width&&t.lastHeight===t.startSize.height?p("Not notifying: Size is the same as the start size, and there has been no notification yet."):t.lastWidth===t.lastNotifiedWidth&&t.lastHeight===t.lastNotifiedHeight?p("Not notifying: Size already notified"):(p("Current size not notified, notifying..."),t.lastNotifiedWidth=t.lastWidth,t.lastNotifiedHeight=t.lastHeight,void Ln(r(a).listeners,(function(t){t(a)})))}function u(){p("Scroll detected."),f(a)?p("Scroll event fired while unrendered. Ignoring..."):s(l)}if(p("registerListenersAndPositionElements invoked."),r(a)){r(a).onRendered=function(){if(p("startanimation triggered."),f(a))p("Ignoring since element is still unrendered...");else{p("Element rendered.");var t=d(a),e=_(a);0!==t.scrollLeft&&0!==t.scrollTop&&0!==e.scrollLeft&&0!==e.scrollTop||(p("Scrollbars out of sync. Updating detector elements..."),s(l))}},r(a).onExpand=u,r(a).onShrink=u;var m=r(a).style;i(a,m.width,m.height)}else p("Aborting because element has been uninstalled")}function E(){if(p("finalizeDomMutation invoked."),r(a)){var t=r(a).style;h(a,t.width,t.height),$(a,t.width,t.height)}else p("Aborting because element has been uninstalled")}function S(){u(a)}function C(){var t;p("Installing..."),r(a).listeners=[],t=m(),r(a).startSize={width:t.width,height:t.height},p("Element start size",r(a).startSize),n.add(0,g),n.add(1,x),n.add(2,j),n.add(3,E),n.add(4,S)}u||(u=a,a=t,t=null),t=t||{},p("Making detectable..."),!function(t){return!function(t){var e=t.getRootNode&&t.getRootNode().contains(t);return t===t.ownerDocument.body||t.ownerDocument.body.contains(t)||e}(t)||null===window.getComputedStyle(t)}(a)?C():(p("Element is detached"),k(),p("Waiting until element is attached..."),r(a).onRendered=function(){p("Element is now attached"),C()})},addListener:function(t,e){if(!r(t).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");r(t).listeners.push(e)},uninstall:function(t){var e=r(t);e&&(e.onExpandScroll&&u(d(t),"scroll",e.onExpandScroll),e.onShrinkScroll&&u(_(t),"scroll",e.onShrinkScroll),e.onAnimationStart&&u(e.container,"animationstart",e.onAnimationStart),e.container&&t.removeChild(e.container))},initDocument:a}},Tn=Sn.forEach;function Bn(t){return Array.isArray(t)||void 0!==t.length}function Pn(t){if(Array.isArray(t))return t;var e=[];return Tn(t,(function(t){e.push(t)})),e}function zn(t){return t&&1===t.nodeType}function In(t,e,n){var r=t[e];return null==r&&void 0!==n?n:r}var Nn=function(t){var e,n;if((t=t||{}).idHandler)e={get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set};else{var r=function(t){var e=t.idGenerator,n=t.stateHandler.getState;return{get:function(t){var e=n(t);return e&&void 0!==e.id?e.id:null},set:function(t){var r=n(t);if(!r)throw new Error("setId required the element to have a resize detection state.");var o=e.generate();return r.id=o,o}}}({idGenerator:(n=1,{generate:function(){return n++}}),stateHandler:Dn});e=r}var o=t.reporter;o||(o=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var r=function(t,e){t[e]=function(){var t=console[e];if(t.apply)t.apply(console,arguments);else for(var n=0;n<arguments.length;n++)t(arguments[n])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n}(!1===o));var i=In(t,"batchProcessor",Mn({reporter:o})),s={};s.callOnAdd=!!In(t,"callOnAdd",!0),s.debug=!!In(t,"debug",!1);var a,c=function(t){var e={};function n(n){var r=t.get(n);return void 0===r?[]:e[r]||[]}return{get:n,add:function(n,r){var o=t.get(n);e[o]||(e[o]=[]),e[o].push(r)},removeListener:function(t,e){for(var r=n(t),o=0,i=r.length;o<i;++o)if(r[o]===e){r.splice(o,1);break}},removeAllListeners:function(t){var e=n(t);e&&(e.length=0)}}}(e),l=function(t){var e=t.stateHandler.getState;return{isDetectable:function(t){var n=e(t);return n&&!!n.isDetectable},markAsDetectable:function(t){e(t).isDetectable=!0},isBusy:function(t){return!!e(t).busy},markBusy:function(t,n){e(t).busy=!!n}}}({stateHandler:Dn}),u=In(t,"strategy","object"),d=In(t,"important",!1),_={reporter:o,batchProcessor:i,stateHandler:Dn,idHandler:e,important:d};if("scroll"===u&&(Cn.isLegacyOpera()?(o.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),u="object"):Cn.isIE(9)&&(o.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),u="object")),"scroll"===u)a=Fn(_);else{if("object"!==u)throw new Error("Invalid strategy name: "+u);a=function(t){var e=(t=t||{}).reporter,n=t.batchProcessor,r=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function o(e){var n=t.important?" !important; ":"; ";return(e.join(n)+n).trim()}function i(t){return r(t).object}return{makeDetectable:function(t,i,s){s||(s=i,i=t,t=null),(t=t||{}).debug,Cn.isIE(8)?s(i):function(i,s){var a=o(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),c=!1,l=window.getComputedStyle(i),u=i.offsetWidth,d=i.offsetHeight;function _(){function n(){if("static"===l.position){i.style.setProperty("position","relative",t.important?"important":"");var n=function(e,n,r,o){var i=r[o];"auto"!==i&&"0"!==function(t){return t.replace(/[^-\d\.]/g,"")}(i)&&(e.warn("An element that is positioned static has style."+o+"="+i+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+o+" will be set to 0. Element: ",n),n.style.setProperty(o,"0",t.important?"important":""))};n(e,i,l,"top"),n(e,i,l,"right"),n(e,i,l,"bottom"),n(e,i,l,"left")}}""!==l.position&&(n(),c=!0);var o=document.createElement("object");o.style.cssText=a,o.tabIndex=-1,o.type="text/html",o.setAttribute("aria-hidden","true"),o.onload=function(){c||n(),function t(e,n){if(!e.contentDocument){var o=r(e);return o.checkForObjectDocumentTimeoutId&&window.clearTimeout(o.checkForObjectDocumentTimeoutId),void(o.checkForObjectDocumentTimeoutId=setTimeout((function(){o.checkForObjectDocumentTimeoutId=0,t(e,n)}),100))}n(e.contentDocument)}(this,(function(t){s(i)}))},Cn.isIE()||(o.data="about:blank"),r(i)&&(i.appendChild(o),r(i).object=o,Cn.isIE()&&(o.data="about:blank"))}r(i).startSize={width:u,height:d},n?n.add(_):_()}(i,s)},addListener:function(t,e){function n(){e(t)}if(Cn.isIE(8))r(t).object={proxy:n},t.attachEvent("onresize",n);else{var o=i(t);if(!o)throw new Error("Element is not detectable by this strategy.");o.contentDocument.defaultView.addEventListener("resize",n)}},uninstall:function(t){if(r(t)){var e=i(t);e&&(Cn.isIE(8)?t.detachEvent("onresize",e.proxy):t.removeChild(e),r(t).checkForObjectDocumentTimeoutId&&window.clearTimeout(r(t).checkForObjectDocumentTimeoutId),delete r(t).object)}}}}(_)}var p={};return{listenTo:function(t,n,r){function i(t){var e=c.get(t);Tn(e,(function(e){e(t)}))}function u(t,e,n){c.add(e,n),t&&n(e)}if(r||(r=n,n=t,t={}),!n)throw new Error("At least one element required.");if(!r)throw new Error("Listener required.");if(zn(n))n=[n];else{if(!Bn(n))return o.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=Pn(n)}var _=0,f=In(t,"callOnAdd",s.callOnAdd),m=In(t,"onReady",(function(){})),g=In(t,"debug",s.debug);Tn(n,(function(t){Dn.getState(t)||(Dn.initState(t),e.set(t));var s=e.get(t);if(g&&o.log("Attaching listener to element",s,t),!l.isDetectable(t))return g&&o.log(s,"Not detectable."),l.isBusy(t)?(g&&o.log(s,"System busy making it detectable"),u(f,t,r),p[s]=p[s]||[],void p[s].push((function(){++_===n.length&&m()}))):(g&&o.log(s,"Making detectable..."),l.markBusy(t,!0),a.makeDetectable({debug:g,important:d},t,(function(t){if(g&&o.log(s,"onElementDetectable"),Dn.getState(t)){l.markAsDetectable(t),l.markBusy(t,!1),a.addListener(t,i),u(f,t,r);var e=Dn.getState(t);if(e&&e.startSize){var c=t.offsetWidth,d=t.offsetHeight;e.startSize.width===c&&e.startSize.height===d||i(t)}p[s]&&Tn(p[s],(function(t){t()}))}else g&&o.log(s,"Element uninstalled before being detectable.");delete p[s],++_===n.length&&m()})));g&&o.log(s,"Already detecable, adding listener."),u(f,t,r),_++})),_===n.length&&m()},removeListener:c.removeListener,removeAllListeners:c.removeAllListeners,uninstall:function(t){if(!t)return o.error("At least one element is required.");if(zn(t))t=[t];else{if(!Bn(t))return o.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=Pn(t)}Tn(t,(function(t){c.removeAllListeners(t),a.uninstall(t),Dn.cleanState(t)}))},initDocument:function(t){a.initDocument&&a.initDocument(t)}}}({strategy:"scroll"});function Hn(t,e){Nn.listenTo(t,e);var n=e;return{update:function(e){Nn.removeListener(t,n),Nn.listenTo(t,e),n=e},destroy:function(){Nn.removeListener(t,n)}}}const Rn={light:{colors:{text:"#575757",background:{primary:"#FFFFFF",contrast:"#F3F3F3"},button:{hover:"#f0f0f0",active:"#c9c9c9"},knob:{gradient_enabled_start:"#FFFFFF",gradient_enabled_end:"#BFBFBF",gradient_disabled_start:"#AFAFAF",gradient_disabled_end:"#BFBFBF",line:"#C4C4C4"},node:{deg:"287.88deg",gradient_start:"rgba(163, 163, 163, 0.132) -3.37%",gradient_end:"rgba(134, 134, 134, 0.6) 131.67%"},border:"#ebebeb",hover:"#f0f0f0",primary50:"#FFE8EE",primary100:"#FFC5D2",primary200:"#F98A97",primary300:"#F3576D",primary:"#FF0149",primary500:"#FF002B",primary600:"#F7002C",primary700:"#D8001E",primary800:"#D8001E",primary900:"#C80011",primary_dark:"#D51A4C",complementary50:"#D8FFEE",complementary100:"#9BFFD4",complementary200:"#01FFB7",complementary300:"#00FB9B",complementary:"#00F289",complementary500:"#00EA75",complementary600:"#00C45A",complementary700:"#00D969",complementary800:"#00B24D",complementary900:"#008F36"},fonts:{color:"#575757",title:"Inter",paragraph:"Merriweather"}},dark:{colors:{text:"#575757",background:{primary:"#181A1B",contrast:"#1F2123"},button:{hover:"#202325",active:"#363b3d"},knob:{gradient_enabled_start:"#181a1b",gradient_enabled_end:"#3c4144",gradient_disabled_start:"#454b4e",gradient_disabled_end:"#3c4144",line:"#484848"},node:{deg:"287.88deg",gradient_start:"rgba(76, 82, 85, 0.13) -3.37%",gradient_end:"rgba(92, 100, 104, 0.6) 131.67%"},border:"#363a3c",primary50:"#FFE8EE",primary100:"#FFC5D2",primary200:"#F98A97",primary300:"#F3576D",primary:"#FF0149",primary500:"#FF002B",primary600:"#F7002C",primary700:"#D8001E",primary800:"#D8001E",primary900:"#C80011",primary_dark:"#D51A4C",complementary50:"#D8FFEE",complementary100:"#9BFFD4",complementary200:"#01FFB7",complementary300:"#00FB9B",complementary:"#00F289",complementary500:"#00EA75",complementary600:"#00C45A",complementary700:"#00D969",complementary800:"#00B24D",complementary900:"#008F36"},fonts:{color:"#b1aaa0",title:"Inter",paragraph:"Merriweather"}}};var Wn;!function(t){t.Light="Light",t.Dark="Dark"}(Wn||(Wn={}));const Yn=qt("dark"===localStorage.getItem("__svelte-themer__theme")?Wn.Dark:Wn.Light);var Vn={subscribe:Ot(Yn,((t,e)=>t==Wn.Dark?e(Rn.dark):e(Rn.light))).subscribe,toggleTheme:function(){Yn.update((t=>t==Wn.Dark?Wn.Light:Wn.Dark))}};function Xn(e){let n,o,i,s,a,c;return{c(){n=x("div"),o=x("canvas"),O(o,"tabindex","0"),O(o,"class","grid svelte-1fkiigp"),Q((()=>e[11].call(o))),O(n,"class","track svelte-1fkiigp"),O(n,"style",s=`--track-height: ${e[0]}px;`)},m(t,r){w(t,n,r),y(n,o),e[10](o),i=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=x("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=z();let o;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=A(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{o=A(n.contentWindow,"resize",e)}),y(t,n),()=>{(r||o&&n.contentWindow)&&o(),$(n)}}(o,e[11].bind(o)),a||(c=[A(o,"pointerdown",q(e[5])),f(Hn.call(null,n,e[4]))],a=!0)},p(t,[e]){1&e&&s!==(s=`--track-height: ${t[0]}px;`)&&O(n,"style",s)},i:t,o:t,d(t){t&&$(n),e[10](null),i(),a=!1,r(c)}}}function Un(t,e,n,r,o,i){t.moveTo(e+i,n),t.lineTo(e+r-i,n),t.quadraticCurveTo(e+r,n,e+r,n+i),t.lineTo(e+r,n+o-i),t.quadraticCurveTo(e+r,n+o,e+r-i,n+o),t.lineTo(e+i,n+o),t.quadraticCurveTo(e,n+o,e,n+o-i),t.lineTo(e,n+i),t.quadraticCurveTo(e,n,e+i,n)}function Kn(t,e,n){let r,o,i,s,{track_height:a=100}=e,{start_beat:c=0}=e,{end_beat:l=20}=e,{signature:u=4}=e,{clips:d=[]}=e,_=-1;const p=Y();let f=getComputedStyle(document.documentElement).getPropertyValue("--theme-colors-background-contrast"),m=getComputedStyle(document.documentElement).getPropertyValue("--theme-colors-background-primary"),g=getComputedStyle(document.documentElement).getPropertyValue("--theme-colors-primary"),h=getComputedStyle(document.documentElement).getPropertyValue("--theme-colors-primary_dark");function b(t){return{x:t.offsetX*(i.width/i.clientWidth),y:t.offsetY*(i.height/i.clientHeight)}}function v(){i&&(s=s??i.getContext("2d",{alpha:!1}),n(3,i.width=i.clientWidth,i),n(3,i.height=i.clientHeight,i),s.save(),s.scale(1,i.height),s.stroke(),s.fillStyle=`${f}`,s.fillRect(0,0,i.width,i.height),function(t){const e=l-c,n=i.width/e,r=c%1*n;n>60&&function(t){const e=l-c,n=i.width/e,r=c%1*n;t.beginPath();for(let o=0;o<e*(u+1);o++){const e=o*n/(u+1)-r;t.moveTo(e,0),t.lineTo(e,1)}t.strokeStyle=`${f}`,t.lineWidth=1,t.globalAlpha=.5,t.stroke()}(t),t.beginPath();for(let o=0;o<e;o++){const e=o*n-r;t.moveTo(e,0),t.lineTo(e,1)}t.strokeStyle=`${f}`,t.lineWidth=2,t.globalAlpha=.5,t.stroke()}(s),s.restore(),function(){const t=i.width/(l-c);for(const e of d){const n=e.position,r=e.duration*t,o=d.indexOf(e);s.save(),s.translate((n-c)*t,0),s.fillStyle=o==_?`${h}`:`${g}`,s.beginPath(),Un(s,0,0,r,i.height,16),s.fill(),s.strokeStyle="black",s.lineWidth=2,s.stroke(),s.fillStyle=`${m}`,s.textBaseline="top",s.font="14px sans-serif",s.fillText(y(e.name,r),8,8,r),s.restore()}}())}function y(t,e){let n=s.measureText(t);for(;n.width>e-20;){if(1===t.length)return"";t.length<4?(t=t.slice(0,-1),n=s.measureText(t)):(t=t.slice(0,-4)+"...",n=s.measureText(t))}return t}return getComputedStyle(document.documentElement).getPropertyValue("--theme-colors-border"),Vn.subscribe((t=>{f=t.colors.background.contrast,m=t.colors.background.primary,g=t.colors.primary,v()})),W((()=>{v()})),t.$$set=t=>{"track_height"in t&&n(0,a=t.track_height),"start_beat"in t&&n(7,c=t.start_beat),"end_beat"in t&&n(8,l=t.end_beat),"signature"in t&&n(9,u=t.signature),"clips"in t&&n(6,d=t.clips)},t.$$.update=()=>{966&t.$$.dirty&&v()},[a,r,o,i,v,function(t){let e=[];const r=b(t).x,o=i.width/(l-c);let s=d.slice().reverse().find((t=>{const e=t.position,n=t.duration,i=(e-c)*o;return r>i&&r<i+n*o}));if(!s)return;if(rn){let t=JSON.parse(JSON.stringify(s));s=t,d.push(t);const n=t=>{this.onpointerup=null,this.onpointermove=null,this.releasePointerCapture(t.pointerId),p("clipDuplicated",s);for(const t of e)p("clipDuplicated",t)};this.onpointerup=n}else{const t=t=>{this.onpointerup=null,this.onpointermove=null,this.releasePointerCapture(t.pointerId),p("clipMoved",s);for(const t of e)console.log(t.index),p("clipDuplicated",t)};this.onpointerup=t}_=d.indexOf(s);const a=(s.position-c)*o;this.setPointerCapture(t.pointerId),this.onpointermove=t=>{const e=b(t).x;s.duration;let i=(a+(e-r))/o+c;i<0&&(i=0),o>60&&!t.altKey&&(i=Math.floor(i*(u+1))/(u+1)),t.shiftKey&&(i=Math.floor(i)),s.position=i,n(6,d)},this.onkeydown=t=>{if("Delete"===t.key&&p("clipDeleted",s),"d"===t.key||"D"===t.key){let t=JSON.parse(JSON.stringify(s));t.position+=s.duration*(e.length+1),d.push(t),e.push(t),n(6,d)}},n(6,d)},d,c,l,u,function(t){U[t?"unshift":"push"]((()=>{i=t,n(3,i)}))},function(){o=this.clientHeight,r=this.clientWidth,n(2,o),n(1,r)}]}class Gn extends yt{constructor(t){super(),vt(this,t,Kn,Xn,i,{track_height:0,start_beat:7,end_beat:8,signature:9,clips:6})}}function Jn(e){let n,r,o,i,s,a,c,l,u;return{c(){n=x("div"),r=x("div"),o=x("div"),s=S(),a=x("div"),O(o,"class","arrow-down svelte-6j6r0f"),O(o,"style",i=`margin-top: ${e[0]}px`),O(a,"class","line svelte-6j6r0f"),O(r,"class","cursor svelte-6j6r0f"),O(r,"style",c=`--posX: ${e[1]}px;\n                height: calc(100% + ${e[0]}px);`),O(n,"id","container"),O(n,"class","svelte-6j6r0f")},m(t,i){w(t,n,i),y(n,r),y(r,o),y(r,s),y(r,a),l||(u=A(r,"pointerdown",q(e[2])),l=!0)},p(t,[e]){1&e&&i!==(i=`margin-top: ${t[0]}px`)&&O(o,"style",i),3&e&&c!==(c=`--posX: ${t[1]}px;\n                height: calc(100% + ${t[0]}px);`)&&O(r,"style",c)},i:t,o:t,d(t){t&&$(n),l=!1,u()}}}function Zn(t,e,n){let{posX:r=0}=e,{scrollY:o}=e,i=r-9;return t.$$set=t=>{"posX"in t&&n(3,r=t.posX),"scrollY"in t&&n(0,o=t.scrollY)},t.$$.update=()=>{2&t.$$.dirty&&n(3,r=i+9)},[o,i,function(t){0===t.button&&(this.onpointermove=t=>{!function(t){var e=t.target.parentNode.getBoundingClientRect();n(1,i=t.clientX-e.left-9),i+9<=0&&n(1,i=-9)}(t)},this.onpointerup=t=>{this.onpointermove=null,this.onpointerup=null,this.releasePointerCapture(t.pointerId)},this.setPointerCapture(t.pointerId))},r]}class Qn extends yt{constructor(t){super(),vt(this,t,Zn,Jn,i,{posX:3,scrollY:0})}}function tr(t,e,n){const r=t.slice();return r[12]=e[n],r}function er(t,e){let n,r,i,s,a,c,l;return r=new Gn({props:{start_beat:e[1],end_beat:e[4],clips:e[12].clips??[]}}),r.$on("clipMoved",(function(){o(e[6](e[12].id))&&e[6](e[12].id).apply(this,arguments)})),r.$on("clipDeleted",(function(){o(e[7](e[12].id))&&e[7](e[12].id).apply(this,arguments)})),r.$on("clipDuplicated",(function(...t){return e[10](e[12],...t)})),{key:t,first:null,c(){n=x("div"),mt(r.$$.fragment),i=S(),O(n,"class","timeline-track"),this.first=n},m(t,o){w(t,n,o),gt(r,n,null),y(n,i),e[11](n),a=!0,c||(l=f(s=wt.call(null,n,e[5](e[12].id))),c=!0)},p(t,n){e=t;const i={};2&n&&(i.start_beat=e[1]),16&n&&(i.end_beat=e[4]),4&n&&(i.clips=e[12].clips??[]),r.$set(i),s&&o(s.update)&&4&n&&s.update.call(null,e[5](e[12].id))},i(t){a||(lt(r.$$.fragment,t),a=!0)},o(t){ut(r.$$.fragment,t),a=!1},d(t){t&&$(n),ht(r),e[11](null),c=!1,l()}}}function nr(t){let e,n,r,o,i,s,a,c=[],l=new Map;n=new Qn({props:{scrollY:t[0]}});let u=t[2];const d=t=>t[12].id;for(let e=0;e<u.length;e+=1){let n=tr(t,u,e),r=d(n);l.set(r,c[e]=er(r,n))}return{c(){e=x("div"),mt(n.$$.fragment),r=S(),o=x("div");for(let t=0;t<c.length;t+=1)c[t].c();O(o,"class","track-stack svelte-8b8eey"),O(e,"class","timeline-container svelte-8b8eey")},m(l,u){w(l,e,u),gt(n,e,null),y(e,r),y(e,o);for(let t=0;t<c.length;t+=1)c[t].m(o,null);i=!0,s||(a=A(e,"wheel",t[8]),s=!0)},p(t,[e]){const r={};1&e&&(r.scrollY=t[0]),n.$set(r),254&e&&(u=t[2],at(),c=pt(c,e,d,1,t,u,l,o,_t,er,null,tr),ct())},i(t){if(!i){lt(n.$$.fragment,t);for(let t=0;t<u.length;t+=1)lt(c[t]);i=!0}},o(t){ut(n.$$.fragment,t);for(let t=0;t<c.length;t+=1)ut(c[t]);i=!1},d(t){t&&$(e),ht(n);for(let t=0;t<c.length;t+=1)c[t].d();s=!1,a()}}}function rr(t,e,n){let r,o,{scrollY:i}=e,s=[],a=100,c=0;we.subscribe((t=>{n(2,s=t.tracks??[])}));return t.$$set=t=>{"scrollY"in t&&n(0,i=t.scrollY)},t.$$.update=()=>{514&t.$$.dirty&&n(4,o=c+20*a)},[i,c,s,r,o,function(t){return{key:"clipObject",callback:(e,n)=>{const i=e;let s=r.getBoundingClientRect(),a=s.width/(o-c),l=(n-s.x)/a;l=Math.floor(l),we.add_clip_to_track(t,i.index,l)}}},function(t){return e=>{const n=e.detail;we.set_clip_position(t,n.index,n.position)}},function(t){return e=>{const n=e.detail;we.delete_clip_from_track(t,n.index)}},function(t){if(t.preventDefault(),nn){const e=Math.sign(t.deltaY);n(9,a+=10*e),n(9,a=Math.max(a,1)),console.log(a)}else{const e=Math.sign(t.deltaX);n(1,c+=e*a),n(1,c=Math.max(c,0))}},a,(t,e)=>{const n=e.detail;we.duplicate_clip(t.id,n.from_unique_clip_index,Math.floor(n.position))},function(t){U[t?"unshift":"push"]((()=>{r=t,n(3,r)}))}]}class or extends yt{constructor(t){super(),vt(this,t,rr,nr,i,{scrollY:0})}}function ir(e){let n,r,o,i,s;return{c(){n=x("button"),r=x("img"),O(r,"alt","AddTrackButton"),a(r.src,o=sr)||O(r,"src",o),O(r,"class","svelte-1r622t9"),O(n,"class","svelte-1r622t9")},m(t,o){w(t,n,o),y(n,r),i||(s=A(n,"click",e[0]),i=!0)},p:t,i:t,o:t,d(t){t&&$(n),i=!1,s()}}}const sr="assets/Add.svg";function ar(t){return[function(e){V.call(this,t,e)}]}class cr extends yt{constructor(t){super(),vt(this,t,ar,ir,i,{})}}function lr(t){let e;return{c(){e=x("div"),O(e,"class","isEnabled svelte-9mxqen")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ur(t){let e;return{c(){e=x("div"),e.innerHTML='<div class="isSelected svelte-9mxqen"></div>',O(e,"class","shadowfilter svelte-9mxqen")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function dr(t){let e,n,o,i,s,a,c,l,u,d,p,f,m,g,h,b,v,k,j,C,D,F,T=t[0].name+"",B=t[3]&&lr();function P(e){t[10](e)}let z={min:0,max:100};function I(e){t[11](e)}void 0!==t[4]&&(z.value=t[4]),f=new Me({props:z}),U.push((()=>ft(f,"value",P)));let N={min:0,max:100};void 0!==t[5]&&(N.value=t[5]),b=new Me({props:N}),U.push((()=>ft(b,"value",I)));let H=t[2]&&ur();return{c(){e=x("div"),n=x("div"),o=x("div"),B&&B.c(),i=S(),s=x("div"),a=x("span"),c=E(T),u=S(),d=x("div"),p=x("div"),mt(f.$$.fragment),g=S(),h=x("div"),mt(b.$$.fragment),k=S(),H&&H.c(),O(o,"class","select svelte-9mxqen"),O(a,"class",l=_(t[1]?"edit-mode":"read-mode")+" svelte-9mxqen"),O(s,"class","name svelte-9mxqen"),O(p,"class","topknob svelte-9mxqen"),O(h,"class","bottomknob svelte-9mxqen"),O(d,"class","knobs svelte-9mxqen"),O(n,"class","trackholder svelte-9mxqen"),O(e,"class","container svelte-9mxqen"),O(e,"style",j=`--height: ${t[6]};`)},m(r,l){w(r,e,l),y(e,n),y(n,o),B&&B.m(o,null),y(n,i),y(n,s),y(s,a),y(a,c),y(n,u),y(n,d),y(d,p),gt(f,p,null),y(d,g),y(d,h),gt(b,h,null),y(e,k),H&&H.m(e,null),C=!0,D||(F=[A(window,"keydown",t[8]),A(o,"click",q(M(t[9]))),A(e,"click",q(M(t[7])))],D=!0)},p(t,[n]){t[3]?B||(B=lr(),B.c(),B.m(o,null)):B&&(B.d(1),B=null),(!C||1&n)&&T!==(T=t[0].name+"")&&L(c,T),(!C||2&n&&l!==(l=_(t[1]?"edit-mode":"read-mode")+" svelte-9mxqen"))&&O(a,"class",l);const r={};!m&&16&n&&(m=!0,r.value=t[4],tt((()=>m=!1))),f.$set(r);const i={};!v&&32&n&&(v=!0,i.value=t[5],tt((()=>v=!1))),b.$set(i),t[2]?H||(H=ur(),H.c(),H.m(e,null)):H&&(H.d(1),H=null),(!C||64&n&&j!==(j=`--height: ${t[6]};`))&&O(e,"style",j)},i(t){C||(lt(f.$$.fragment,t),lt(b.$$.fragment,t),C=!0)},o(t){ut(f.$$.fragment,t),ut(b.$$.fragment,t),C=!1},d(t){t&&$(e),B&&B.d(),ht(f),ht(b),H&&H.d(),D=!1,r(F)}}}function _r(t,e,n){let{track:r}=e,{selected:o=!1}=e,{editable:i=!1}=e,{enabled:s=!0}=e,{height:a="100px"}=e,{topknobvalue:c=0}=e,{botknobvalue:l=0}=e;const u=Y();return Y(),t.$$set=t=>{"track"in t&&n(0,r=t.track),"selected"in t&&n(2,o=t.selected),"editable"in t&&n(1,i=t.editable),"enabled"in t&&n(3,s=t.enabled),"height"in t&&n(6,a=t.height),"topknobvalue"in t&&n(4,c=t.topknobvalue),"botknobvalue"in t&&n(5,l=t.botknobvalue)},t.$$.update=()=>{3&t.$$.dirty&&(i||u("change-trackname",{trackname:r.name}))},[r,i,o,s,c,l,a,function(t){rn?n(1,i=!0):(n(2,o=!o),u("select"))},function(t){i&&("Enter"===t.key||"Escape"===t.key?n(1,i=!1):"Backspace"===t.key?n(0,r.name=rn?"":r.name.slice(0,-1),r):1===t.key.length&&n(0,r.name+=t.key,r))},function(){n(3,s=!s)},function(t){c=t,n(4,c)},function(t){l=t,n(5,l)}]}class pr extends yt{constructor(t){super(),vt(this,t,_r,dr,i,{track:0,selected:2,editable:1,enabled:3,height:6,topknobvalue:4,botknobvalue:5})}}function fr(t,e,n){const r=t.slice();return r[8]=e[n],r[10]=n,r}function mr(t,e){let n,r,o;return r=new pr({props:{track:e[8],selected:e[1].includes(e[8].id),editable:(e[1].includes(e[8].id),!1)}}),r.$on("select",(function(...t){return e[5](e[10],e[8],...t)})),r.$on("change-trackname",(function(...t){return e[6](e[8],...t)})),{key:t,first:null,c(){n=C(),mt(r.$$.fragment),this.first=n},m(t,e){w(t,n,e),gt(r,t,e),o=!0},p(t,n){e=t;const o={};1&n&&(o.track=e[8]),3&n&&(o.selected=e[1].includes(e[8].id)),3&n&&(o.editable=(e[1].includes(e[8].id),!1)),r.$set(o)},i(t){o||(lt(r.$$.fragment,t),o=!0)},o(t){ut(r.$$.fragment,t),o=!1},d(t){t&&$(n),ht(r,t)}}}function gr(t){let e,n,r,o,i,s,a,c,l=[],u=new Map,d=t[0];const _=t=>t[8].id;for(let e=0;e<d.length;e+=1){let n=fr(t,d,e),r=_(n);u.set(r,l[e]=mr(r,n))}return i=new cr({}),i.$on("click",t[2]),{c(){e=x("div"),n=x("div");for(let t=0;t<l.length;t+=1)l[t].c();r=S(),o=x("div"),mt(i.$$.fragment),O(n,"class","track-stack svelte-1ytdi70"),O(o,"class","add-track svelte-1ytdi70"),O(e,"class","track-container svelte-1ytdi70")},m(u,d){w(u,e,d),y(e,n);for(let t=0;t<l.length;t+=1)l[t].m(n,null);y(e,r),y(e,o),gt(i,o,null),s=!0,a||(c=A(window,"keydown",t[4]),a=!0)},p(t,[e]){11&e&&(d=t[0],at(),l=pt(l,e,_,1,t,d,u,n,_t,mr,null,fr),ct())},i(t){if(!s){for(let t=0;t<d.length;t+=1)lt(l[t]);lt(i.$$.fragment,t),s=!0}},o(t){for(let t=0;t<l.length;t+=1)ut(l[t]);ut(i.$$.fragment,t),s=!1},d(t){t&&$(e);for(let t=0;t<l.length;t+=1)l[t].d();ht(i),a=!1,c()}}}function hr(t,e,n){let r=[];we.subscribe((t=>{null!=t&&n(0,r=t.tracks)}));let o=[],i=[];function s(t,e){const r=i.includes(t);nn?r?(n(1,o=o.filter((t=>t!==e))),i=i.filter((e=>e!==t))):(n(1,o=[...o,e]),i=[...i,t]):r?(n(1,o=[]),i=[]):(n(1,o=[e]),i=[t])}return[r,o,function(){we.add_track("Track Name")},s,function(t){if("Delete"===t.key){for(let t of o)we.delete_track(t);n(1,o=[]),i=[]}},(t,e,n)=>s(t,e.id),(t,e)=>we.set_track_name(t.id,e.detail.trackname)]}class br extends yt{constructor(t){super(),vt(this,t,hr,gr,i,{})}}function vr(e){let n,r,o,i,s,c;return{c(){n=x("button"),r=x("img"),O(r,"alt","IconButton"),a(r.src,o=e[2])||O(r,"src",o),O(n,"style",i=`--size: ${e[0]}px; --buttoncolor: ${e[1]}`),O(n,"class","svelte-1lxstp7")},m(t,o){w(t,n,o),y(n,r),s||(c=A(n,"click",e[4]),s=!0)},p(t,[e]){4&e&&!a(r.src,o=t[2])&&O(r,"src",o),3&e&&i!==(i=`--size: ${t[0]}px; --buttoncolor: ${t[1]}`)&&O(n,"style",i)},i:t,o:t,d(t){t&&$(n),s=!1,c()}}}function yr(t,e,n){let r,{icontype:o}=e,{size:i=48}=e,{buttoncolor:s="white"}=e;const a={play:"assets/Play.svg",pause:"assets/Pause.svg",stop:"assets/Stop.svg"};return t.$$set=t=>{"icontype"in t&&n(3,o=t.icontype),"size"in t&&n(0,i=t.size),"buttoncolor"in t&&n(1,s=t.buttoncolor)},t.$$.update=()=>{8&t.$$.dirty&&n(2,r=a[o])},[i,s,r,o,function(e){V.call(this,t,e)}]}class wr extends yt{constructor(t){super(),vt(this,t,yr,vr,i,{icontype:3,size:0,buttoncolor:1})}}var $r;!function(t){t[t.Graph=0]="Graph",t[t.Timeline=1]="Timeline"}($r||($r={}));var kr=qt($r.Graph);function xr(e){let n,r,o,i,s,a;return{c(){n=x("label"),r=x("input"),o=S(),i=x("span"),i.innerHTML='<span class="node svelte-1evvsjh"><img alt="node" src="assets/Node1.svg" height="20" width="20"/></span> \n        <span class="timeline svelte-1evvsjh"><img alt="node" src="assets/Timeline.svg" height="24" width="24"/></span>',O(r,"type","checkbox"),O(r,"class","svelte-1evvsjh"),O(i,"class","slider svelte-1evvsjh"),O(n,"class","switch svelte-1evvsjh")},m(t,c){w(t,n,c),y(n,r),r.checked=e[0],y(n,o),y(n,i),s||(a=A(r,"change",e[1]),s=!0)},p(t,[e]){1&e&&(r.checked=t[0])},i:t,o:t,d(t){t&&$(n),s=!1,a()}}}function jr(t,e,n){let r;u(t,kr,(t=>n(2,r=t)));let{viewBool:o=!1}=e;return t.$$set=t=>{"viewBool"in t&&n(0,o=t.viewBool)},t.$$.update=()=>{1&t.$$.dirty&&p(kr,r=o?$r.Graph:$r.Timeline,r)},[o,function(){o=this.checked,n(0,o)}]}class Er extends yt{constructor(t){super(),vt(this,t,jr,xr,i,{viewBool:0})}}function Sr(e){let n,o,i,s,a,c,l,u,d,_;return{c(){n=x("div"),o=x("div"),i=x("span"),s=E(e[0]),a=S(),c=x("span"),c.textContent=".00",l=S(),u=x("div"),u.innerHTML='<svg class="arrow svelte-b0az5x" width="9" height="6" viewBox="0 0 9 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.93687 1.09089C4.7416 0.895629 4.42502 0.895629 4.22976 1.09089L1.04778 4.27287C0.852517 4.46813 0.852517 4.78472 1.04778 4.97998C1.24304 5.17524 1.55962 5.17524 1.75489 4.97998L4.58331 2.15155L7.41174 4.97998C7.607 5.17524 7.92358 5.17524 8.11885 4.97998C8.31411 4.78472 8.31411 4.46813 8.11885 4.27287L4.93687 1.09089ZM5.08331 2V1.44444H4.08331V2H5.08331Z" fill="black"></path></svg> \n        <svg width="9" height="6" viewBox="0 0 9 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.22976 5.02019C4.42502 5.21546 4.7416 5.21546 4.93687 5.02019L8.11885 1.83821C8.31411 1.64295 8.31411 1.32637 8.11885 1.13111C7.92358 0.935845 7.607 0.935845 7.41174 1.13111L4.58331 3.95953L1.75489 1.13111C1.55962 0.935845 1.24304 0.935845 1.04778 1.13111C0.852517 1.32637 0.852517 1.64295 1.04778 1.83821L4.22976 5.02019ZM4.08331 4.11108V4.66664H5.08331V4.11108H4.08331Z" fill="black"></path></svg>',O(c,"class","little svelte-b0az5x"),O(o,"class","tempo"),O(u,"class","buttons svelte-b0az5x"),O(n,"class","frame svelte-b0az5x")},m(t,r){w(t,n,r),y(n,o),y(o,i),y(i,s),y(o,a),y(o,c),y(n,l),y(n,u),d||(_=[A(n,"wheel",e[1]),A(n,"pointerdown",e[2])],d=!0)},p(t,[e]){1&e&&L(s,t[0])},i:t,o:t,d(t){t&&$(n),d=!1,r(_)}}}function Cr(t,e,n){let{tempo:r=96}=e,o=0;function i(t){const e=Math.sign(t.deltaY);t.shiftKey,0===o&&n(0,r-=e),o+=1,5===o&&(o=0)}return t.$$set=t=>{"tempo"in t&&n(0,r=t.tempo)},t.$$.update=()=>{1&t.$$.dirty&&n(0,r=Math.max(0,Math.min(r,999.9)))},[r,function(t){if(t.wheelDeltaY){if(t.wheelDeltaY===-3*t.deltaY)return void i(t)}else if(0===t.deltaMode)return void i(t);!function(t){const e=Math.sign(t.deltaY),o=t.shiftKey?2:1;n(0,r-=e*o)}(t)},function(t){if(0!==t.button)return;const e=r;let o=0;this.onpointermove=t=>{o+=t.movementY/2,n(0,r=e-Math.round(o/4))},this.onpointerup=t=>{this.onpointermove=null,this.onpointerup=null,this.releasePointerCapture(t.pointerId)},this.setPointerCapture(t.pointerId)}]}class Ar extends yt{constructor(t){super(),vt(this,t,Cr,Sr,i,{tempo:0})}}function Mr(t){let e,n,r,o,i,s,a,c;return{c(){e=x("div"),n=x("p"),r=E(t[2]),o=S(),i=x("p"),s=E(t[1]),a=S(),c=x("span"),c.textContent="Min",O(n,"class","svelte-tylyiu"),O(i,"class","little svelte-tylyiu"),O(e,"class","content svelte-tylyiu"),O(c,"class","svelte-tylyiu")},m(t,l){w(t,e,l),y(e,n),y(n,r),y(e,o),y(e,i),y(i,s),w(t,a,l),w(t,c,l)},p(t,e){4&e&&L(r,t[2]),2&e&&L(s,t[1])},d(t){t&&$(e),t&&$(a),t&&$(c)}}}function qr(t){let e,n,r,o,i,s,a,c;return{c(){e=x("div"),n=x("p"),r=E(t[4]),o=S(),i=x("p"),s=E(t[3]),a=S(),c=x("span"),c.textContent="Bar",O(n,"class","svelte-tylyiu"),O(i,"class","little svelte-tylyiu"),O(e,"class","content svelte-tylyiu"),O(c,"class","svelte-tylyiu")},m(t,l){w(t,e,l),y(e,n),y(n,r),y(e,o),y(e,i),y(i,s),w(t,a,l),w(t,c,l)},p(t,e){16&e&&L(r,t[4]),8&e&&L(s,t[3])},d(t){t&&$(e),t&&$(a),t&&$(c)}}}function Or(e){let n,r,o;function i(t,e){return t[0]?qr:Mr}let s=i(e),a=s(e);return{c(){n=x("div"),a.c(),O(n,"class","frame svelte-tylyiu")},m(t,i){w(t,n,i),a.m(n,null),r||(o=A(n,"click",e[5]),r=!0)},p(t,[e]){s===(s=i(t))&&a?a.p(t,e):(a.d(1),a=s(t),a&&(a.c(),a.m(n,null)))},i:t,o:t,d(t){t&&$(n),a.d(),r=!1,o()}}}function Dr(t){return t<10?"0"+t:t}function Lr(t,e,n){let r,o,i,s,a,c,l,u,d,_,p,{time:f=0}=e,{tempo:m=96}=e,{signature:g=4}=e,{is_bar:h=!1}=e;return t.$$set=t=>{"time"in t&&n(6,f=t.time),"tempo"in t&&n(7,m=t.tempo),"signature"in t&&n(8,g=t.signature),"is_bar"in t&&n(0,h=t.is_bar)},t.$$.update=()=>{64&t.$$.dirty&&n(11,r=Math.floor(f/60)),2112&t.$$.dirty&&n(10,o=Math.floor(f-60*r)),3136&t.$$.dirty&&n(9,i=Math.floor(100*(f-60*r-o))),128&t.$$.dirty&&n(15,s=60/m),33088&t.$$.dirty&&n(14,a=Math.floor(f/(g*s))+1),49472&t.$$.dirty&&n(13,c=Math.floor((f-(a-1)*g*s)/s)+1),49472&t.$$.dirty&&n(12,l=Math.floor((f-(a-1)*g*s)%s*24/s)),24576&t.$$.dirty&&n(4,u=`${a}:${Dr(c)}`),4096&t.$$.dirty&&n(3,d=`:${Dr(l)}`),3072&t.$$.dirty&&n(2,_=`${r}:${Dr(o)}`),512&t.$$.dirty&&n(1,p=`:${Dr(i)}`)},[h,p,_,d,u,function(){n(0,h=!h)},f,m,g,i,o,r,l,c,a,s]}class Fr extends yt{constructor(t){super(),vt(this,t,Lr,Or,i,{time:6,tempo:7,signature:8,is_bar:0})}}function Tr(t){let e,n,r,o=Math.round(parseInt(`${t[0]}`))+"";return{c(){e=x("span"),n=E(o),r=E("%"),O(e,"class","tooltiptext svelte-jc62fp")},m(t,o){w(t,e,o),y(e,n),y(e,r)},p(t,e){1&e&&o!==(o=Math.round(parseInt(`${t[0]}`))+"")&&L(n,o)},d(t){t&&$(e)}}}function Br(e){let n,o,i,s,a,c,l,u,d,_,p=e[2]&&Tr(e);return{c(){n=x("div"),o=x("div"),i=x("input"),s=S(),a=x("div"),a.innerHTML='<div class="track-inner svelte-jc62fp"></div> \n            <div class="track-progress svelte-jc62fp"></div>',c=S(),l=x("div"),p&&p.c(),O(i,"type","range"),O(i,"class","range svelte-jc62fp"),O(i,"min","0"),O(i,"max","100"),O(i,"step","0.1"),O(a,"class","track svelte-jc62fp"),O(l,"class","thumb svelte-jc62fp"),O(o,"class","wrap svelte-jc62fp"),O(o,"style",u=`--thumb_position: ${e[5]}; --track_length: ${e[3]}; --thumb_transform_x: ${e[4]};  --color: ${e[1]}`),O(n,"class","container svelte-jc62fp")},m(t,r){w(t,n,r),y(n,o),y(o,i),F(i,e[0]),y(o,s),y(o,a),y(o,c),y(o,l),p&&p.m(l,null),d||(_=[A(i,"change",e[8]),A(i,"input",e[8]),A(o,"click",e[7]),A(o,"mousedown",e[6])],d=!0)},p(t,[e]){1&e&&F(i,t[0]),t[2]?p?p.p(t,e):(p=Tr(t),p.c(),p.m(l,null)):p&&(p.d(1),p=null),58&e&&u!==(u=`--thumb_position: ${t[5]}; --track_length: ${t[3]}; --thumb_transform_x: ${t[4]};  --color: ${t[1]}`)&&O(o,"style",u)},i:t,o:t,d(t){t&&$(n),p&&p.d(),d=!1,r(_)}}}function Pr(t,e,n){let r,o,i,{volume:s=50}=e,{color:a="#ff0149"}=e,c=!1;return t.$$set=t=>{"volume"in t&&n(0,s=t.volume),"color"in t&&n(1,a=t.color)},t.$$.update=()=>{1&t.$$.dirty&&n(5,r=`${s}%`),1&t.$$.dirty&&n(4,o=`-${s}%`),1&t.$$.dirty&&n(3,i=`${s}%`)},[s,a,c,i,o,r,function(){c||n(2,c=!0)},function(){c&&n(2,c=!1)},function(){s=D(this.value),n(0,s)}]}class zr extends yt{constructor(t){super(),vt(this,t,Pr,Br,i,{volume:0,color:1})}}function Ir(t){let e,n,r,o,i,s,a,c,l,u,d,_,p,f,m,g,h,b,v,k,j,E,C,M,q,D,L,F;function T(e){t[9](e)}c=new wr({props:{icontype:t[3]}}),c.$on("click",t[5]),u=new wr({props:{icontype:"stop"}}),u.$on("click",t[6]),p=new Fr({props:{time:Nr}});let B={};function P(e){t[10](e)}void 0!==t[2]&&(B.viewBool=t[2]),g=new Er({props:B}),U.push((()=>ft(g,"viewBool",T))),g.$on("click",t[7]);let z={};function I(e){t[11](e)}void 0!==t[0]&&(z.tempo=t[0]),j=new Ar({props:z}),U.push((()=>ft(j,"tempo",P)));let N={};return void 0!==t[1]&&(N.volume=t[1]),M=new zr({props:N}),U.push((()=>ft(M,"volume",I))),{c(){e=x("nav"),n=x("div"),r=x("div"),o=x("h1"),o.textContent=".nema",i=S(),s=x("div"),a=x("div"),mt(c.$$.fragment),l=S(),mt(u.$$.fragment),d=S(),_=x("div"),mt(p.$$.fragment),f=S(),m=x("div"),mt(g.$$.fragment),b=S(),v=x("div"),k=x("div"),mt(j.$$.fragment),C=S(),mt(M.$$.fragment),O(o,"class","toolbar-title-text svelte-rlsbe8"),O(r,"class","subgroup toolbar-title svelte-rlsbe8"),O(n,"class","group left svelte-rlsbe8"),O(a,"class","subgroup control-buttons svelte-rlsbe8"),O(_,"class","subgroup time-group svelte-rlsbe8"),O(m,"class","subgroup view-group svelte-rlsbe8"),O(s,"class","group middle svelte-rlsbe8"),O(k,"class","subgroup right-controls svelte-rlsbe8"),O(v,"class","group right svelte-rlsbe8"),O(e,"class","svelte-rlsbe8")},m(h,$){w(h,e,$),y(e,n),y(n,r),y(r,o),y(e,i),y(e,s),y(s,a),gt(c,a,null),y(a,l),gt(u,a,null),y(s,d),y(s,_),gt(p,_,null),y(s,f),y(s,m),gt(g,m,null),y(e,b),y(e,v),y(v,k),gt(j,k,null),y(k,C),gt(M,k,null),D=!0,L||(F=A(o,"click",t[4]),L=!0)},p(t,[e]){const n={};8&e&&(n.icontype=t[3]),c.$set(n);const r={};!h&&4&e&&(h=!0,r.viewBool=t[2],tt((()=>h=!1))),g.$set(r);const o={};!E&&1&e&&(E=!0,o.tempo=t[0],tt((()=>E=!1))),j.$set(o);const i={};!q&&2&e&&(q=!0,i.volume=t[1],tt((()=>q=!1))),M.$set(i)},i(t){D||(lt(c.$$.fragment,t),lt(u.$$.fragment,t),lt(p.$$.fragment,t),lt(g.$$.fragment,t),lt(j.$$.fragment,t),lt(M.$$.fragment,t),D=!0)},o(t){ut(c.$$.fragment,t),ut(u.$$.fragment,t),ut(p.$$.fragment,t),ut(g.$$.fragment,t),ut(j.$$.fragment,t),ut(M.$$.fragment,t),D=!1},d(t){t&&$(e),ht(c),ht(u),ht(p),ht(g),ht(j),ht(M),L=!1,F()}}}let Nr=100;function Hr(t,e,n){let r,{toggle:o,_:i}=(s="theme",R().$$.context.get(s));var s;let a=!1,c=!1,l=96,u=50;return t.$$.update=()=>{var e,o;2&t.$$.dirty&&(e=u,we.set_volume(e)),1&t.$$.dirty&&(o=l,we.set_tempo(o)),256&t.$$.dirty&&n(3,r=a?"pause":"play")},[l,u,c,r,function(){o(),Vn.toggleTheme()},function(){n(8,a=!a),a&&we.play(),console.log(r)},function(){we.stop(),n(8,a=!1),console.log("Stop Button Clikced")},function(){console.log(c?"graph":"timeline")},a,function(t){c=t,n(2,c)},function(t){l=t,n(0,l)},function(t){u=t,n(1,u)}]}class Rr extends yt{constructor(t){super(),vt(this,t,Hr,Ir,i,{})}}
/*!
     * css-vars-ponyfill
     * v2.4.7
     * https://jhildenbiddle.github.io/css-vars-ponyfill/
     * (c) 2018-2021 John Hildenbiddle <http://hildenbiddle.com>
     * MIT license
     */function Wr(){return Wr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wr.apply(this,arguments)}
/*!
     * get-css-data
     * v2.0.2
     * https://github.com/jhildenbiddle/get-css-data
     * (c) 2018-2021 John Hildenbiddle <http://hildenbiddle.com>
     * MIT license
     */function Yr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mimeType:e.mimeType||null,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},r=Array.isArray(t)?t:[t],o=Array.apply(null,Array(r.length)).map((function(t){return null}));function i(t){var e="string"==typeof t,n=e&&"<"===t.trim().charAt(0);return e&&!n}function s(t,e){n.onError(t,r[e],e)}function a(t,e){var i=n.onSuccess(t,r[e],e);t=!1===i?"":i||t,o[e]=t,-1===o.indexOf(null)&&n.onComplete(o)}var c=document.createElement("a");r.forEach((function(t,e){if(c.setAttribute("href",t),c.href=String(c.href),Boolean(document.all&&!window.atob)&&c.host.split(":")[0]!==location.host.split(":")[0]){if(c.protocol===location.protocol){var r=new XDomainRequest;r.open("GET",t),r.timeout=0,r.onprogress=Function.prototype,r.ontimeout=Function.prototype,r.onload=function(){var t=r.responseText;i(t)?a(t,e):s(r,e)},r.onerror=function(t){s(r,e)},setTimeout((function(){r.send()}),0)}else console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(t,")")),s(null,e)}else{var o=new XMLHttpRequest;o.open("GET",t),n.mimeType&&o.overrideMimeType&&o.overrideMimeType(n.mimeType),n.onBeforeSend(o,t,e),o.onreadystatechange=function(){if(4===o.readyState){var t=o.responseText;o.status<400&&i(t)||0===o.status&&i(t)?a(t,e):s(o,e)}},o.send()}}))}
/**
     * Gets CSS data from <style> and <link> nodes (including @imports), then
     * returns data in order processed by DOM. Allows specifying nodes to
     * include/exclude and filtering CSS data using RegEx.
     *
     * @preserve
     * @param {object}   [options] The options object
     * @param {object}   [options.rootElement=document] Root element to traverse for
     *                   <link> and <style> nodes.
     * @param {string}   [options.include] CSS selector matching <link> and <style>
     *                   nodes to include
     * @param {string}   [options.exclude] CSS selector matching <link> and <style>
     *                   nodes to exclude
     * @param {object}   [options.filter] Regular expression used to filter node CSS
     *                   data. Each block of CSS data is tested against the filter,
     *                   and only matching data is included.
     * @param {boolean}  [options.skipDisabled=true] Determines if disabled
     *                   stylesheets will be skipped while collecting CSS data.
     * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be
     *                   collected from a stylesheet's runtime values instead of its
     *                   text content. This is required to get accurate CSS data
     *                   when a stylesheet has been modified using the deleteRule()
     *                   or insertRule() methods because these modifications will
     *                   not be reflected in the stylesheet's text content.
     * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
     *                   1) the XHR object, 2) source node reference, and 3) the
     *                   source URL as arguments.
     * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
     *                   1) CSS text, 2) source node reference, and 3) the source
     *                   URL as arguments.
     * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
     *                   object for inspection, 2) soure node reference, and 3) the
     *                   source URL that failed (either a <link> href or an @import)
     *                   as arguments
     * @param {function} [options.onComplete] Callback after all nodes have been
     *                   processed. Passes 1) concatenated CSS text, 2) an array of
     *                   CSS text in DOM order, and 3) an array of nodes in DOM
     *                   order as arguments.
     *
     * @example
     *
     *   getCssData({
     *     rootElement : document,
     *     include     : 'style,link[rel="stylesheet"]',
     *     exclude     : '[href="skip.css"]',
     *     filter      : /red/,
     *     skipDisabled: true,
     *     useCSSOM    : false,
     *     onBeforeSend(xhr, node, url) {
     *       // ...
     *     }
     *     onSuccess(cssText, node, url) {
     *       // ...
     *     }
     *     onError(xhr, node, url) {
     *       // ...
     *     },
     *     onComplete(cssText, cssArray, nodeArray) {
     *       // ...
     *     }
     *   });
     */function Vr(t){var e=/\/\*[\s\S]+?\*\//g,n=/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g,r={rootElement:t.rootElement||document,include:t.include||'style,link[rel="stylesheet"]',exclude:t.exclude||null,filter:t.filter||null,skipDisabled:!1!==t.skipDisabled,useCSSOM:t.useCSSOM||!1,onBeforeSend:t.onBeforeSend||Function.prototype,onSuccess:t.onSuccess||Function.prototype,onError:t.onError||Function.prototype,onComplete:t.onComplete||Function.prototype},o=Array.apply(null,r.rootElement.querySelectorAll(r.include)).filter((function(t){return e=t,n=r.exclude,!(e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector).call(e,n);var e,n})),i=Array.apply(null,Array(o.length)).map((function(t){return null}));function s(){if(-1===i.indexOf(null)){i.reduce((function(t,e,n){return""===e&&t.push(n),t}),[]).reverse().forEach((function(t){return[o,i].forEach((function(e){return e.splice(t,1)}))}));var t=i.join("");r.onComplete(t,i,o)}}function a(t,e,n,o){var a=r.onSuccess(t,n,o);l(t=void 0!==a&&!1===Boolean(a)?"":a||t,n,o,(function(t,o){null===i[e]&&(o.forEach((function(t){return r.onError(t.xhr,n,t.url)})),!r.filter||r.filter.test(t)?i[e]=t:i[e]="",s())}))}function c(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={};return i.rules=(t.replace(e,"").match(n)||[]).filter((function(t){return-1===o.indexOf(t)})),i.urls=i.rules.map((function(t){return t.replace(n,"$1")})),i.absoluteUrls=i.urls.map((function(t){return Xr(t,r)})),i.absoluteRules=i.rules.map((function(t,e){var n=i.urls[e],o=Xr(i.absoluteUrls[e],r);return t.replace(n,o)})),i}function l(t,e,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=c(t,n,s);a.rules.length?Yr(a.absoluteUrls,{onBeforeSend:function(t,n,o){r.onBeforeSend(t,e,n)},onSuccess:function(t,n,o){var i=r.onSuccess(t,e,n),a=c(t=!1===i?"":i||t,n,s);return a.rules.forEach((function(e,n){t=t.replace(e,a.absoluteRules[n])})),t},onError:function(r,c,u){i.push({xhr:r,url:c}),s.push(a.rules[u]),l(t,e,n,o,i,s)},onComplete:function(r){r.forEach((function(e,n){t=t.replace(a.rules[n],e)})),l(t,e,n,o,i,s)}}):o(t,i)}o.length?o.forEach((function(t,e){var n=t.getAttribute("href"),o=t.getAttribute("rel"),c="link"===t.nodeName.toLowerCase()&&n&&o&&-1!==o.toLowerCase().indexOf("stylesheet"),l=!1!==r.skipDisabled&&t.disabled,u="style"===t.nodeName.toLowerCase();if(c&&!l)Yr(n,{mimeType:"text/css",onBeforeSend:function(e,n,o){r.onBeforeSend(e,t,n)},onSuccess:function(r,o,i){var s=Xr(n);a(r,e,t,s)},onError:function(n,o,a){i[e]="",r.onError(n,t,o),s()}});else if(u&&!l){var d=t.textContent;r.useCSSOM&&(d=Array.apply(null,t.sheet.cssRules).map((function(t){return t.cssText})).join("")),a(d,e,t,location.href)}else i[e]="",s()})):r.onComplete("",[])}function Xr(t,e){var n=document.implementation.createHTMLDocument(""),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),r.href=e||document.baseURI||(document.querySelector("base")||{}).href||location.href,o.href=t,o.href}var Ur=Kr;function Kr(t,e,n){t instanceof RegExp&&(t=Gr(t,n)),e instanceof RegExp&&(e=Gr(e,n));var r=Jr(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function Gr(t,e){var n=e.match(t);return n?n[0]:null}function Jr(t,e,n){var r,o,i,s,a,c=n.indexOf(t),l=n.indexOf(e,c+1),u=c;if(c>=0&&l>0){if(t===e)return[c,l];for(r=[],i=n.length;u>=0&&!a;)u==c?(r.push(u),c=n.indexOf(t,u+1)):1==r.length?a=[r.pop(),l]:((o=r.pop())<i&&(i=o,s=l),l=n.indexOf(e,u+1)),u=c<l&&c>=0?c:l;r.length&&(a=[i,s])}return a}function Zr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={preserveStatic:!0,removeComments:!1},r=Wr({},n,e),o=[];function i(t){throw new Error("CSS parse error: ".concat(t))}function s(e){var n=e.exec(t);if(n)return t=t.slice(n[0].length),n}function a(){return s(/^{\s*/)}function c(){return s(/^}/)}function l(){s(/^\s*/)}function u(){if(l(),"/"===t[0]&&"*"===t[1]){for(var e=2;t[e]&&("*"!==t[e]||"/"!==t[e+1]);)e++;if(!t[e])return i("end of comment is missing");var n=t.slice(2,e);return t=t.slice(e+2),{type:"comment",comment:n}}}function d(){for(var t,e=[];t=u();)e.push(t);return r.removeComments?[]:e}function _(){for(l();"}"===t[0];)i("extra closing bracket");var e=s(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(e){var n,r=e[0].trim();/\/\*/.test(r)&&(r=r.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,""));var o=/["']\w*,\w*["']/.test(r);return o&&(r=r.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(t){return t.replace(/,/g,"")}))),n=/,/.test(r)?r.split(/\s*(?![^(]*\)),\s*/):[r],o&&(n=n.map((function(t){return t.replace(/\u200C/g,",")}))),n}}function p(){if("@"===t[0])return E();s(/^([;\s]*)+/);var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=s(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);if(n){if(n=n[0].trim(),!s(/^:\s*/))return i("property missing ':'");var r=s(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),o={type:"declaration",property:n.replace(e,""),value:r?r[0].replace(e,"").trim():""};return s(/^[;\s]*/),o}}function f(){if(!a())return i("missing '{'");for(var t,e=d();t=p();)e.push(t),e=e.concat(d());return c()?e:i("missing '}'")}function m(){l();for(var t,e=[];t=s(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)e.push(t[1]),s(/^,\s*/);if(e.length)return{type:"keyframe",values:e,declarations:f()}}function g(){var t=s(/^@([-\w]+)?keyframes\s*/);if(t){var e=t[1];if(!(t=s(/^([-\w]+)\s*/)))return i("@keyframes missing name");var n,r=t[1];if(!a())return i("@keyframes missing '{'");for(var o=d();n=m();)o.push(n),o=o.concat(d());return c()?{type:"keyframes",name:r,vendor:e,keyframes:o}:i("@keyframes missing '}'")}}function h(){if(s(/^@page */))return{type:"page",selectors:_()||[],declarations:f()}}function b(){var t=s(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(t)return{type:"page-margin-box",name:"".concat(t[1],"-").concat(t[2])+(t[3]?"-".concat(t[3]):""),declarations:f()}}function v(){if(s(/^@font-face\s*/))return{type:"font-face",declarations:f()}}function y(){var t=s(/^@supports *([^{]+)/);if(t)return{type:"supports",supports:t[1].trim(),rules:C()}}function w(){if(s(/^@host\s*/))return{type:"host",rules:C()}}function $(){var t=s(/^@media([^{]+)*/);if(t)return{type:"media",media:(t[1]||"").trim(),rules:C()}}function k(){var t=s(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return{type:"custom-media",name:t[1].trim(),media:t[2].trim()}}function x(){var t=s(/^@([-\w]+)?document *([^{]+)/);if(t)return{type:"document",document:t[2].trim(),vendor:t[1]?t[1].trim():null,rules:C()}}function j(){var t=s(/^@(import|charset|namespace)\s*([^;]+);/);if(t)return{type:t[1],name:t[2].trim()}}function E(){if(l(),"@"===t[0]){var e=j()||v()||$()||g()||y()||x()||k()||w()||h()||b();if(e&&!r.preserveStatic){var n=!1;if(e.declarations)n=e.declarations.some((function(t){return/var\(/.test(t.value)}));else n=(e.keyframes||e.rules||[]).some((function(t){return(t.declarations||[]).some((function(t){return/var\(/.test(t.value)}))}));return n?e:{}}return e}}function S(){if(!r.preserveStatic){var e=Ur("{","}",t);if(e){var n=/:(?:root|host)(?![.:#(])/.test(e.pre)&&/--\S*\s*:/.test(e.body),o=/var\(/.test(e.body);if(!n&&!o)return t=t.slice(e.end+1),{}}}var s=_()||[],a=r.preserveStatic?f():f().filter((function(t){var e=s.some((function(t){return/:(?:root|host)(?![.:#(])/.test(t)}))&&/^--\S/.test(t.property),n=/var\(/.test(t.value);return e||n}));return s.length||i("selector missing"),{type:"rule",selectors:s,declarations:a}}function C(e){if(!e&&!a())return i("missing '{'");for(var n,r=d();t.length&&(e||"}"!==t[0])&&(n=E()||S());)n.type&&r.push(n),r=r.concat(d());return e||c()?r:i("missing '}'")}return{type:"stylesheet",stylesheet:{rules:C(!0),errors:o}}}function Qr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={parseHost:!1,store:{},onWarning:function(){}},r=Wr({},n,e),o=new RegExp(":".concat(r.parseHost?"host":"root","$"));return"string"==typeof t&&(t=Zr(t,r)),t.stylesheet.rules.forEach((function(t){"rule"===t.type&&t.selectors.some((function(t){return o.test(t)}))&&t.declarations.forEach((function(t,e){var n=t.property,o=t.value;n&&0===n.indexOf("--")&&(r.store[n]=o)}))})),r.store}function to(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r={charset:function(t){return"@charset "+t.name+";"},comment:function(t){return 0===t.comment.indexOf("__CSSVARSPONYFILL")?"/*"+t.comment+"*/":""},"custom-media":function(t){return"@custom-media "+t.name+" "+t.media+";"},declaration:function(t){return t.property+":"+t.value+";"},document:function(t){return"@"+(t.vendor||"")+"document "+t.document+"{"+o(t.rules)+"}"},"font-face":function(t){return"@font-face{"+o(t.declarations)+"}"},host:function(t){return"@host{"+o(t.rules)+"}"},import:function(t){return"@import "+t.name+";"},keyframe:function(t){return t.values.join(",")+"{"+o(t.declarations)+"}"},keyframes:function(t){return"@"+(t.vendor||"")+"keyframes "+t.name+"{"+o(t.keyframes)+"}"},media:function(t){return"@media "+t.media+"{"+o(t.rules)+"}"},namespace:function(t){return"@namespace "+t.name+";"},page:function(t){return"@page "+(t.selectors.length?t.selectors.join(", "):"")+"{"+o(t.declarations)+"}"},"page-margin-box":function(t){return"@"+t.name+"{"+o(t.declarations)+"}"},rule:function(t){var e=t.declarations;if(e.length)return t.selectors.join(",")+"{"+o(e)+"}"},supports:function(t){return"@supports "+t.supports+"{"+o(t.rules)+"}"}};function o(t){for(var o="",i=0;i<t.length;i++){var s=t[i];n&&n(s);var a=r[s.type](s);a&&(o+=a,a.length&&s.selectors&&(o+=e))}return o}return o(t.stylesheet.rules)}function eo(t,e){t.rules.forEach((function(n){n.rules?eo(n,e):n.keyframes?n.keyframes.forEach((function(t){"keyframe"===t.type&&e(t.declarations,n)})):n.declarations&&e(n.declarations,t)}))}Kr.range=Jr;function no(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={preserveStatic:!0,preserveVars:!1,variables:{},onWarning:function(){}},r=Wr({},n,e);return"string"==typeof t&&(t=Zr(t,r)),eo(t.stylesheet,(function(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=o.type,s=o.property,a=o.value;if("declaration"===i)if(r.preserveVars||!s||0!==s.indexOf("--")){if(-1!==a.indexOf("var(")){var c=oo(a,r);c!==o.value&&(c=ro(c),r.preserveVars?(t.splice(n,0,{type:i,property:s,value:c}),n++):o.value=c)}}else t.splice(n,1),n--}})),to(t)}function ro(t){return(t.match(/calc\(([^)]+)\)/g)||[]).forEach((function(e){var n="calc".concat(e.split("calc").join(""));t=t.replace(e,n)})),t}function oo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(-1===t.indexOf("var("))return t;var r=Ur("(",")",t);function o(t){var r=t.split(",")[0].replace(/[\s\n\t]/g,""),o=(t.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],i=Object.prototype.hasOwnProperty.call(e.variables,r)?String(e.variables[r]):void 0,s=i||(o?String(o):void 0),a=n||t;return i||e.onWarning('variable "'.concat(r,'" is undefined')),s&&"undefined"!==s&&s.length>0?oo(s,e,a):"var(".concat(a,")")}if(r){if("var"===r.pre.slice(-3)){var i=0===r.body.trim().length;return i?(e.onWarning("var() must contain a non-whitespace string"),t):r.pre.slice(0,-3)+o(r.body)+oo(r.post,e)}return r.pre+"(".concat(oo(r.body,e),")")+oo(r.post,e)}return-1!==t.indexOf("var(")&&e.onWarning('missing closing ")" in the value "'.concat(t,'"')),t}var io="undefined"!=typeof window,so=io&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),ao={group:0,job:0},co={rootElement:io?document:null,shadowDOM:!1,include:"style,link[rel=stylesheet]",exclude:"",variables:{},onlyLegacy:!0,preserveStatic:!0,preserveVars:!1,silent:!1,updateDOM:!0,updateURLs:!0,watch:null,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},lo={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},uo={dom:{},job:{},user:{}},_o=!1,po=null,fo=0,mo=null,go=!1;
/**
     * Fetches, parses, and transforms CSS custom properties from specified
     * <style> and <link> elements into static values, then appends a new <style>
     * element with static values to the DOM to provide CSS custom property
     * compatibility for legacy browsers. Also provides a single interface for
     * live updates of runtime values in both modern and legacy browsers.
     *
     * @preserve
     * @param {object}   [options] Options object
     * @param {object}   [options.rootElement=document] Root element to traverse for
     *                   <link> and <style> nodes
     * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
     *                   and <style> nodes will be processed.
     * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
     *                   matching <link re="stylesheet"> and <style> nodes to
     *                   process
     * @param {string}   [options.exclude] CSS selector matching <link
     *                   rel="stylehseet"> and <style> nodes to exclude from those
     *                   matches by options.include
     * @param {object}   [options.variables] A map of custom property name/value
     *                   pairs. Property names can omit or include the leading
     *                   double-hyphen (), and values specified will override
     *                   previous values
     * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
     *                   only generate legacy-compatible CSS in browsers that lack
     *                   native support (i.e., legacy browsers)
     * @param {boolean}  [options.preserveStatic=true] Determines if CSS
     *                   declarations that do not reference a custom property will
     *                   be preserved in the transformed CSS
     * @param {boolean}  [options.preserveVars=false] Determines if CSS custom
     *                   property declarations will be preserved in the transformed
     *                   CSS
     * @param {boolean}  [options.silent=false] Determines if warning and error
     *                   messages will be displayed on the console
     * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
     *                   update the DOM after processing CSS custom properties
     * @param {boolean}  [options.updateURLs=true] Determines if relative url()
     *                   paths will be converted to absolute urls in external CSS
     * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
     *                   be created that will execute the ponyfill when a <link> or
     *                   <style> DOM mutation is observed
     * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
     *                   1) the XHR object, 2) source node reference, and 3) the
     *                   source URL as arguments
     * @param {function} [options.onError] Callback after a CSS parsing error has
     *                   occurred or an XHR request has failed. Passes 1) an error
     *                   message, and 2) source node reference, 3) xhr, and 4 url as
     *                   arguments.
     * @param {function} [options.onWarning] Callback after each CSS parsing warning
     *                   has occurred. Passes 1) a warning message as an argument.
     * @param {function} [options.onSuccess] Callback after CSS data has been
     *                   collected from each node and before CSS custom properties
     *                   have been transformed. Allows modifying the CSS data before
     *                   it is transformed by returning any string value (or false
     *                   to skip). Passes 1) CSS text, 2) source node reference, and
     *                   3) the source URL as arguments.
     * @param {function} [options.onComplete] Callback after all CSS has been
     *                   processed, legacy-compatible CSS has been generated, and
     *                   (optionally) the DOM has been updated. Passes 1) a CSS
     *                   string with CSS variable values resolved, 2) an array of
     *                   output <style> node references that have been appended to
     *                   the DOM, 3) an object containing all custom properies names
     *                   and values, and 4) the ponyfill execution time in
     *                   milliseconds.
     * @param {function} [options.onFinally] Callback in modern and legacy browsers
     *                   after the ponyfill has finished all tasks. Passes 1) a
     *                   boolean indicating if the last ponyfill call resulted in a
     *                   style change, 2) a boolean indicating if the current
     *                   browser provides native support for CSS custom properties,
     *                   and 3) the ponyfill execution time in milliseconds.
     * @example
     *
     *   cssVars({
     *     rootElement   : document,
     *     shadowDOM     : false,
     *     include       : 'style,link[rel="stylesheet"]',
     *     exclude       : '',
     *     variables     : {},
     *     onlyLegacy    : true,
     *     preserveStatic: true,
     *     preserveVars  : false,
     *     silent        : false,
     *     updateDOM     : true,
     *     updateURLs    : true,
     *     watch         : false,
     *     onBeforeSend(xhr, node, url) {},
     *     onError(message, node, xhr, url) {},
     *     onWarning(message) {},
     *     onSuccess(cssText, node, url) {},
     *     onComplete(cssText, styleNode, cssVariables, benchmark) {},
     *     onFinally(hasChanged, hasNativeSupport, benchmark)
     *   });
     */
function ho(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="cssVars(): ",n=Wr({},co,t);function r(t,r,o,i){!n.silent&&window.console&&console.error("".concat(e).concat(t,"\n"),r),n.onError(t,r,o,i)}function o(t){!n.silent&&window.console&&console.warn("".concat(e).concat(t)),n.onWarning(t)}function i(t){n.onFinally(Boolean(t),so,xo()-n.__benchmark)}if(io){if(n.watch)return n.watch=co.watch,bo(n),void ho(n);if(!1===n.watch&&po&&(po.disconnect(),po=null),!n.__benchmark){if(_o===n.rootElement)return void vo(t);var s=[].slice.call(n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));if(n.__benchmark=xo(),n.exclude=[po?'[data-cssvars]:not([data-cssvars=""])':'[data-cssvars="out"]',"link[disabled]:not([data-cssvars])",n.exclude].filter((function(t){return t})).join(","),n.variables=$o(n.variables),s.forEach((function(t){var e="style"===t.nodeName.toLowerCase()&&t.__cssVars.text,n=e&&t.textContent!==t.__cssVars.text;e&&n&&(t.sheet&&(t.sheet.disabled=!1),t.setAttribute("data-cssvars",""))})),!po){var a=[].slice.call(n.rootElement.querySelectorAll('[data-cssvars="out"]'));a.forEach((function(t){var e=t.getAttribute("data-cssvars-group");(e?n.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(e,'"]')):null)||t.parentNode.removeChild(t)})),fo&&s.length<fo&&(fo=s.length,uo.dom={})}}if("loading"!==document.readyState)if(so&&n.onlyLegacy){var c=!1;if(n.updateDOM){var l=n.rootElement.host||(n.rootElement===document?document.documentElement:n.rootElement);Object.keys(n.variables).forEach((function(t){var e=n.variables[t];c=c||e!==getComputedStyle(l).getPropertyValue(t),l.style.setProperty(t,e)}))}i(c)}else!go&&(n.shadowDOM||n.rootElement.shadowRoot||n.rootElement.host)?Vr({rootElement:co.rootElement,include:co.include,exclude:n.exclude,skipDisabled:!1,onSuccess:function(t,e,n){return!((e.sheet||{}).disabled&&!e.__cssVars)&&((t=((t=t.replace(lo.cssComments,"").replace(lo.cssMediaQueries,"")).match(lo.cssVarDeclRules)||[]).join(""))||!1)},onComplete:function(t,e,r){Qr(t,{store:uo.dom,onWarning:o}),go=!0,ho(n)}}):(_o=n.rootElement,Vr({rootElement:n.rootElement,include:n.include,exclude:n.exclude,skipDisabled:!1,onBeforeSend:n.onBeforeSend,onError:function(t,e,n){var o=t.responseURL||ko(n,location.href),i=t.statusText?"(".concat(t.statusText,")"):"Unspecified Error"+(0===t.status?" (possibly CORS related)":"");r("CSS XHR Error: ".concat(o," ").concat(t.status," ").concat(i),e,t,o)},onSuccess:function(t,e,r){if((e.sheet||{}).disabled&&!e.__cssVars)return!1;var o="link"===e.nodeName.toLowerCase(),i="style"===e.nodeName.toLowerCase()&&t!==e.textContent,s=n.onSuccess(t,e,r);return t=void 0!==s&&!1===Boolean(s)?"":s||t,n.updateURLs&&(o||i)&&(t=wo(t,r)),t},onComplete:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=Wr({},uo.dom,uo.user);if(uo.job={},s.forEach((function(t,i){var s=e[i];if(t.__cssVars=t.__cssVars||{},t.__cssVars.text=s,lo.cssVars.test(s))try{var a=Zr(s,{preserveStatic:n.preserveStatic,removeComments:!0});Qr(a,{parseHost:Boolean(n.rootElement.host),store:uo.dom,onWarning:o}),t.__cssVars.tree=a}catch(e){r(e.message,t)}})),Wr(uo.job,uo.dom),n.updateDOM?(Wr(uo.user,n.variables),Wr(uo.job,uo.user)):(Wr(uo.job,uo.user,n.variables),Wr(a,n.variables)),ao.job>0&&Boolean(Object.keys(uo.job).length>Object.keys(a).length||Boolean(Object.keys(a).length&&Object.keys(uo.job).some((function(t){return uo.job[t]!==a[t]})))))jo(n.rootElement),ho(n);else{var c=[],l=[],u=!1;if(n.updateDOM&&ao.job++,s.forEach((function(t,i){var s=!t.__cssVars.tree;if(t.__cssVars.tree)try{no(t.__cssVars.tree,Wr({},n,{variables:uo.job,onWarning:o}));var a=to(t.__cssVars.tree);if(n.updateDOM){var d=e[i],_=lo.cssVarFunc.test(d);if(t.getAttribute("data-cssvars")||t.setAttribute("data-cssvars","src"),a.length&&_){var p=t.getAttribute("data-cssvars-group")||++ao.group,f=a.replace(/\s/g,""),m=n.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(p,'"]'))||document.createElement("style");u=u||lo.cssKeyframes.test(a),n.preserveStatic&&t.sheet&&(t.sheet.disabled=!0),m.hasAttribute("data-cssvars")||m.setAttribute("data-cssvars","out"),f===t.textContent.replace(/\s/g,"")?(s=!0,m&&m.parentNode&&(t.removeAttribute("data-cssvars-group"),m.parentNode.removeChild(m))):f!==m.textContent.replace(/\s/g,"")&&([t,m].forEach((function(t){t.setAttribute("data-cssvars-job",ao.job),t.setAttribute("data-cssvars-group",p)})),m.textContent=a,c.push(a),l.push(m),m.parentNode||t.parentNode.insertBefore(m,t.nextSibling))}}else t.textContent.replace(/\s/g,"")!==a&&c.push(a)}catch(e){r(e.message,t)}s&&t.setAttribute("data-cssvars","skip"),t.hasAttribute("data-cssvars-job")||t.setAttribute("data-cssvars-job",ao.job)})),fo=n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,n.shadowDOM)for(var d,_=[].concat(n.rootElement).concat([].slice.call(n.rootElement.querySelectorAll("*"))),p=0;d=_[p];++p)if(d.shadowRoot&&d.shadowRoot.querySelector("style")){var f=Wr({},n,{rootElement:d.shadowRoot});ho(f)}n.updateDOM&&u&&yo(n.rootElement),_o=!1,n.onComplete(c.join(""),l,JSON.parse(JSON.stringify(uo.job)),xo()-n.__benchmark),i(l.length)}}}));else document.addEventListener("DOMContentLoaded",(function e(n){ho(t),document.removeEventListener("DOMContentLoaded",e)}))}}function bo(t){function e(t){var e=n(t)&&t.hasAttribute("disabled"),r=(t.sheet||{}).disabled;return e||r}function n(t){return"link"===t.nodeName.toLowerCase()&&-1!==(t.getAttribute("rel")||"").indexOf("stylesheet")}function r(t){return"style"===t.nodeName.toLowerCase()}window.MutationObserver&&(po&&(po.disconnect(),po=null),(po=new MutationObserver((function(o){o.some((function(o){return function(r){var o=!1;if("attributes"===r.type&&n(r.target)&&!e(r.target)){var i="disabled"===r.attributeName,s="href"===r.attributeName,a="skip"===r.target.getAttribute("data-cssvars"),c="src"===r.target.getAttribute("data-cssvars");i?o=!a&&!c:s&&(a?r.target.setAttribute("data-cssvars",""):c&&jo(t.rootElement,!0),o=!0)}return o}(o)||function(t){var e=!1;if("childList"===t.type){var n=r(t.target),o="out"===t.target.getAttribute("data-cssvars");e=n&&!o}return e}(o)||function(t){var o=!1;return"childList"===t.type&&(o=[].slice.call(t.addedNodes).some((function(t){var o=1===t.nodeType&&t.hasAttribute("data-cssvars"),i=r(t)&&lo.cssVars.test(t.textContent);return!o&&(n(t)||i)&&!e(t)}))),o}(o)||function(e){var n=!1;return"childList"===e.type&&(n=[].slice.call(e.removedNodes).some((function(e){var n=1===e.nodeType,r=n&&"out"===e.getAttribute("data-cssvars"),o=n&&"src"===e.getAttribute("data-cssvars"),i=o;if(o||r){var s=e.getAttribute("data-cssvars-group"),a=t.rootElement.querySelector('[data-cssvars-group="'.concat(s,'"]'));o&&jo(t.rootElement,!0),a&&a.parentNode.removeChild(a)}return i}))),n}(o)}))&&ho(t)}))).observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0}))}function vo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;clearTimeout(mo),mo=setTimeout((function(){t.__benchmark=null,ho(t)}),e)}function yo(t){var e=["animation-name","-moz-animation-name","-webkit-animation-name"].filter((function(t){return getComputedStyle(document.body)[t]}))[0];if(e){for(var n=t.getElementsByTagName("*"),r=[],o="__CSSVARSPONYFILL-KEYFRAMES__",i=0,s=n.length;i<s;i++){var a=n[i];"none"!==getComputedStyle(a)[e]&&(a.style[e]+=o,r.push(a))}document.body.offsetHeight;for(var c=0,l=r.length;c<l;c++){var u=r[c].style;u[e]=u[e].replace(o,"")}}}function wo(t,e){return(t.replace(lo.cssComments,"").match(lo.cssUrls)||[]).forEach((function(n){var r=n.replace(lo.cssUrls,"$1"),o=ko(r,e);t=t.replace(n,n.replace(r,o))})),t}function $o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=/^-{2}/;return Object.keys(t).reduce((function(n,r){return n[e.test(r)?r:"--".concat(r.replace(/^-+/,""))]=t[r],n}),{})}function ko(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,n=document.implementation.createHTMLDocument(""),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),r.href=e,o.href=t,o.href}function xo(){return io&&(window.performance||{}).now?window.performance.now():(new Date).getTime()}function jo(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[].slice.call(t.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));n.forEach((function(t){return t.setAttribute("data-cssvars","")})),e&&(uo.dom={})}ho.reset=function(){for(var t in ao.job=0,ao.group=0,_o=!1,po&&(po.disconnect(),po=null),fo=0,mo=null,go=!1,uo)uo[t]={}};const Eo={light:{colors:{text:"#282230",background:{_:"#f1f1f1",contrast:"#b1b1b1"},primary:"#01796f",primary_dark:"#016159",secondary:"#562931"}},dark:{colors:{text:"#f1f1f1",background:{_:"#27323a",contrast:"#0d1215"},primary:"#01978b",primary_dark:"#00887c",secondary:"#fe8690"}},forest:{colors:{text:"#f9f2cf",background:{_:"#3b6c4c",contrast:"#1d492c"},primary:"#efdc7e",primary_dark:"#e4d589",secondary:"#4a875f"}}},So=qt(),Co=qt(),Ao=qt(),Mo=qt();function qo(){let t=l(Mo);Co.update((e=>Object.keys(t).reduce(((t,n,r,o)=>n===e?o[r+1]?o[r+1]:o[0]:t),"")))}function Oo(t){const e={},n=(t,r)=>{for(let o in t){const i=t[o],s=(r?`${r}-${o}`:o).replace(/-_$/g,"").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase();i&&"object"==typeof i?n(i,s):e[s]=i}};return n(t),e}const{document:Do}=dt;function Lo(t){let e,n,r,o;const i=t[9].default,s=function(t,e,n,r){if(t){const o=d(t,e,n,r);return t[0](o)}}(i,t,t[8],null);return{c(){e=new N,n=C(),r=S(),s&&s.c(),e.a=n},m(i,a){e.m(t[0],Do.head),y(Do.head,n),w(i,r,a),s&&s.m(i,a),o=!0},p(t,[e]){s&&s.p&&(!o||256&e)&&function(t,e,n,r,o,i){if(o){const s=d(e,n,r,i);t.p(s,o)}}(s,i,t,t[8],o?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(i,t[8],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[8]),null)},i(t){o||(lt(s,t),o=!0)},o(t){ut(s,t),o=!1},d(t){$(n),t&&e.d(),t&&$(r),s&&s.d(t)}}}const Fo="__svelte-themer__theme",To="theme",Bo=["auto","light","dark"],Po=`Invalid mode string supplied, must be one of: ${Bo.join(", ")}`;function zo(t,e,n){let r;u(t,Co,(t=>n(7,r=t)));let{$$slots:o={},$$scope:i}=e,{key:s=Fo}=e,{themes:a=Eo}=e,{theme:c=null}=e,{prefix:d=To}=e,{mode:_="auto"}=e,{base:p={}}=e;if(f=a,"[object Object]"!==Object.prototype.toString.call(f)||!Object.keys(a).length)throw new Error("Invalid themes object supplied");var f;if("string"==typeof d&&!d.trim().length)throw new Error("Invalid prefix string supplied");if(!Bo.includes(_))throw new Error(Po);Mo.set(a);const[m]=Object.keys(a),g=function(t,e={}){const n=t?`--${t}`:"-";function r(t,e){return e?`${n}-${e}-${t}`:`${n}-${t}`}function o(t,e,r){return`${n}-${e}: var(${n}-${r}-${e});`}const i=l(Mo),s=Oo(e),a=Object.entries(s).map((([t,e])=>[r(t),e])),c=[].concat(a),u=[];for(let[e,n]of Object.entries(i)){const i=Oo(n),s=[];for(let[t,n]of Object.entries(i)){const i=r(t);c.some((([t])=>t===i))||c.push([i,n]),c.push([r(t,e),n]),s.push(o(r(t),t,e))}const a=t?`${t}--${e}`:e;u.push(`\n      [theme='${e}'],\n      .${a} {\n        ${s.join("\n\t")}\n      }\n    `)}return`\n    <style>\n      :root {\n        ${c.map((t=>function(t,e){return`${t}: ${e};`}(...t))).join("\n\t")}\n      }\n\n      ${u.join("")}\n    </style>\n  `.trim()}(d,p);var h;return function(t,e){R().$$.context.set(t,e)}("theme",{current:Co,toggle:qo,theme:Co}),W((()=>{const t=matchMedia("(prefers-color-scheme: dark)"),e=t.matches?"dark":"light";t.addEventListener("change",(({matches:t})=>"auto"===_&&So.set(t?"dark":"light")));const n=s?localStorage&&localStorage.getItem(s):null;return c&&a[c]?Co.set(c):n&&a[n]?Co.set(n):"auto"===_&&e?Co.set(e):["light","dark"].includes(_)&&a[_]?Co.set(_):Co.set(m),()=>s&&localStorage&&localStorage.setItem(s,r)})),h=()=>{document&&document.documentElement.setAttribute("theme",r),s&&localStorage&&localStorage.setItem(s,r)},R().$$.after_update.push(h),t.$$set=t=>{"key"in t&&n(1,s=t.key),"themes"in t&&n(2,a=t.themes),"theme"in t&&n(3,c=t.theme),"prefix"in t&&n(4,d=t.prefix),"mode"in t&&n(5,_=t.mode),"base"in t&&n(6,p=t.base),"$$scope"in t&&n(8,i=t.$$scope)},t.$$.update=()=>{132&t.$$.dirty&&(Object.keys(a).includes(r)||Co.set(m)),132&t.$$.dirty&&Ao.set(a[r])},[g,s,a,c,d,_,p,r,i,o]}var Io=class extends yt{constructor(t){super(),vt(this,t,zo,Lo,i,{key:1,themes:2,theme:3,prefix:4,mode:5,base:6})}};function No(t){let e,n;return e=new Se({}),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Ho(t){let e,n;return e=new jn({}),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Ro(e){let n,r;return n=new hn({}),{c(){mt(n.$$.fragment)},m(t,e){gt(n,t,e),r=!0},p:t,i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ut(n.$$.fragment,t),r=!1},d(t){ht(n,t)}}}function Wo(t){let e,n;return e=new or({props:{scrollY:t[0]}}),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.scrollY=t[0]),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Yo(t){let e,n,r,o,i,s,a,c,l,u,d,_,p,f,m,g;n=new Rr({});let h=t[1]&&No(),b=!t[1]&&Ho();c=new br({});const v=[Wo,Ro],k=[];function j(t,e){return t[1]?0:1}return u=j(t),d=k[u]=v[u](t),{c(){e=x("main"),mt(n.$$.fragment),r=S(),o=x("div"),h&&h.c(),i=S(),b&&b.c(),s=S(),a=x("div"),mt(c.$$.fragment),l=S(),d.c(),_=S(),p=x("div"),p.innerHTML='<h1 class="svelte-bovouo">Nema Studio</h1> \n        <p>Currently only available on desktop</p>',O(a,"class","main-content svelte-bovouo"),O(o,"class","content-container svelte-bovouo"),O(e,"class","svelte-bovouo"),O(p,"id","mobile-easteregg"),O(p,"class","svelte-bovouo")},m(d,v){w(d,e,v),gt(n,e,null),y(e,r),y(e,o),h&&h.m(o,null),y(o,i),b&&b.m(o,null),y(o,s),y(o,a),gt(c,a,null),y(a,l),k[u].m(a,null),w(d,_,v),w(d,p,v),f=!0,m||(g=A(a,"scroll",t[2]),m=!0)},p(t,e){t[1]?h?2&e&&lt(h,1):(h=No(),h.c(),lt(h,1),h.m(o,i)):h&&(at(),ut(h,1,1,(()=>{h=null})),ct()),t[1]?b&&(at(),ut(b,1,1,(()=>{b=null})),ct()):b?2&e&&lt(b,1):(b=Ho(),b.c(),lt(b,1),b.m(o,s));let n=u;u=j(t),u===n?k[u].p(t,e):(at(),ut(k[n],1,1,(()=>{k[n]=null})),ct(),d=k[u],d?d.p(t,e):(d=k[u]=v[u](t),d.c()),lt(d,1),d.m(a,null))},i(t){f||(lt(n.$$.fragment,t),lt(h),lt(b),lt(c.$$.fragment,t),lt(d),f=!0)},o(t){ut(n.$$.fragment,t),ut(h),ut(b),ut(c.$$.fragment,t),ut(d),f=!1},d(t){t&&$(e),ht(n),h&&h.d(),b&&b.d(),ht(c),k[u].d(),t&&$(_),t&&$(p),m=!1,g()}}}function Vo(t){let e,n;return e=new Io({props:{themes:Rn,$$slots:{default:[Yo]},$$scope:{ctx:t}}}),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},p(t,[n]){const r={};11&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Xo(t,e,n){let r;u(t,kr,(t=>n(1,r=t))),window.onkeydown=on,window.onkeyup=sn,window.onkeypress=an;let o=0;window.onbeforeunload=t=>{t.preventDefault(),t.returnValue=""};return[o,r,t=>n(0,o=t.currentTarget.scrollTop)]}ho();return new class extends yt{constructor(t){super(),vt(this,t,Xo,Vo,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
