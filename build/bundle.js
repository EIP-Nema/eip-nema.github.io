var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s;function a(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function c(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(t){let e;return c(t,(t=>e=t))(),e}function u(t,e,n){t.$$.on_destroy.push(c(e,n))}function d(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function _(t){return null==t?"":t}function p(t,e,n){return t.set(n),e}function f(e){return e&&o(e.destroy)?e.destroy:t}const m="undefined"!=typeof window;let g=m?()=>window.performance.now():()=>Date.now(),h=m?t=>requestAnimationFrame(t):t;const b=new Set;function v(t){b.forEach((e=>{e.c(t)||(b.delete(e),e.f())})),0!==b.size&&h(v)}function y(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function k(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function j(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function E(t){return document.createTextNode(t)}function S(){return E(" ")}function C(){return E("")}function A(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function M(t){return function(e){return e.preventDefault(),t.call(this,e)}}function q(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function O(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function T(t){return""===t?null:+t}function D(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function F(t,e){t.value=null==e?"":e}function L(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}let B,I;function N(){if(void 0===B){B=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){B=!0}}return B}function z(t,e,n){t.classList[n?"add":"remove"](e)}class P{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.e=x(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)w(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach($)}}function R(t){I=t}function H(){if(!I)throw new Error("Function called outside component initialization");return I}function W(t){H().$$.on_mount.push(t)}function V(){const t=H();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}function Y(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const U=[],X=[],K=[],G=[],J=Promise.resolve();let Z=!1;function Q(t){K.push(t)}function tt(t){G.push(t)}let et=!1;const nt=new Set;function rt(){if(!et){et=!0;do{for(let t=0;t<U.length;t+=1){const e=U[t];R(e),ot(e.$$)}for(R(null),U.length=0;X.length;)X.pop()();for(let t=0;t<K.length;t+=1){const e=K[t];nt.has(e)||(nt.add(e),e())}K.length=0}while(U.length);for(;G.length;)G.pop()();Z=!1,et=!1,nt.clear()}}function ot(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}const it=new Set;let st;function at(){st={r:0,c:[],p:st}}function ct(){st.r||r(st.c),st=st.p}function lt(t,e){t&&t.i&&(it.delete(t),t.i(e))}function ut(t,e,n,r){if(t&&t.o){if(it.has(t))return;it.add(t),st.c.push((()=>{it.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const dt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function _t(t,e){ut(t,1,1,(()=>{e.delete(t.key)}))}function pt(t,e,n,r,o,i,s,a,c,l,u,d){let _=t.length,p=i.length,f=_;const m={};for(;f--;)m[t[f].key]=f;const g=[],h=new Map,b=new Map;for(f=p;f--;){const t=d(o,i,f),a=n(t);let c=s.get(a);c?r&&c.p(t,e):(c=l(a,t),c.c()),h.set(a,g[f]=c),a in m&&b.set(a,Math.abs(f-m[a]))}const v=new Set,y=new Set;function w(t){lt(t,1),t.m(a,u),s.set(t.key,t),u=t.first,p--}for(;_&&p;){const e=g[p-1],n=t[_-1],r=e.key,o=n.key;e===n?(u=e.first,_--,p--):h.has(o)?!s.has(r)||v.has(r)?w(e):y.has(o)?_--:b.get(r)>b.get(o)?(y.add(r),w(e)):(v.add(o),_--):(c(n,s),_--)}for(;_--;){const e=t[_];h.has(e.key)||c(e,s)}for(;p;)w(g[p-1]);return g}function ft(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function mt(t){t&&t.c()}function gt(t,n,i,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:u}=t.$$;a&&a.m(n,i),s||Q((()=>{const n=c.map(e).filter(o);l?l.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(Q)}function ht(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function bt(t,e){-1===t.$$.dirty[0]&&(U.push(t),Z||(Z=!0,J.then(rt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function vt(e,o,i,s,a,c,l,u=[-1]){const d=I;R(e);const _=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||d.$$.root};l&&l(_.root);let p=!1;if(_.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return _.ctx&&a(_.ctx[t],_.ctx[t]=o)&&(!_.skip_bound&&_.bound[t]&&_.bound[t](o),p&&bt(e,t)),n})):[],_.update(),p=!0,r(_.before_update),_.fragment=!!s&&s(_.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);_.fragment&&_.fragment.l(t),t.forEach($)}else _.fragment&&_.fragment.c();o.intro&&lt(e.$$.fragment),gt(e,o.target,o.anchor,o.customElement),rt()}R(d)}class yt{$destroy(){ht(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function wt(t,e){t.ondragover=()=>!1,t.addEventListener("drop",(t=>{t.preventDefault(),t.stopPropagation();const n=t.dataTransfer.getData(e.key);if(""==n)return;const r=JSON.parse(n),o=t.clientX,i=t.clientY;e.callback(r,o,i)}))}function $t(t,e){t.draggable=!0,t.addEventListener("dragstart",(t=>{t.dataTransfer.setData(e.key,JSON.stringify(e.object))}))}function kt(e){let n,r,o,i,s;return{c(){n=x("div"),r=x("div"),o=E(e[0]),O(r,"class","clipname svelte-153thqp"),O(n,"class","container svelte-153thqp")},m(t,a){w(t,n,a),y(n,r),y(r,o),i||(s=f($t.call(null,n,e[1])),i=!0)},p(t,[e]){1&e&&D(o,t[0])},i:t,o:t,d(t){t&&$(n),i=!1,s()}}}function xt(t,e,n){let{clipname:r="ClipName"}=e,o={key:"clipObject",object:r};return t.$$set=t=>{"clipname"in t&&n(0,r=t.clipname)},[r,o]}class jt extends yt{constructor(t){super(),vt(this,t,xt,kt,i,{clipname:0})}}function Et(e){let n,o,i,s,c,l,u,d;return{c(){n=x("label"),o=x("img"),s=S(),c=x("input"),O(o,"alt","AddTrackButton"),a(o.src,i=St)||O(o,"src",i),O(o,"class","svelte-636c0t"),O(c,"type","file"),O(c,"accept","audio/*"),c.multiple=!0,c.required=!1,O(c,"class","svelte-636c0t"),O(n,"style",l=`--width:${e[2]}px; --height:${e[1]}px;`),O(n,"class","svelte-636c0t")},m(t,r){w(t,n,r),y(n,o),y(n,s),y(n,c),u||(d=[A(c,"change",e[4]),A(n,"click",e[3])],u=!0)},p(t,[e]){6&e&&l!==(l=`--width:${t[2]}px; --height:${t[1]}px;`)&&O(n,"style",l)},i:t,o:t,d(t){t&&$(n),u=!1,r(d)}}}const St="assets/Add.svg";function Ct(t,e,n){let{height:r=50}=e,{width:o=50}=e,{files:i}=e;return t.$$set=t=>{"height"in t&&n(1,r=t.height),"width"in t&&n(2,o=t.width),"files"in t&&n(0,i=t.files)},[i,r,o,function(e){Y.call(this,t,e)},function(){i=this.files,n(0,i)}]}class At extends yt{constructor(t){super(),vt(this,t,Ct,Et,i,{height:1,width:2,files:0})}}const Mt=[];function qt(e,n=t){let r;const o=new Set;function s(t){if(i(e,t)&&(e=t,r)){const t=!Mt.length;for(const t of o)t[1](),Mt.push(t,e);if(t){for(let t=0;t<Mt.length;t+=2)Mt[t][0](Mt[t+1]);Mt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(i,a=t){const c=[i,a];return o.add(c),1===o.size&&(r=n(s)||t),i(e),()=>{o.delete(c),0===o.size&&(r(),r=null)}}}}function Ot(e,n,i){const s=!Array.isArray(e),a=s?[e]:e,l=n.length<2;return u=e=>{let i=!1;const u=[];let d=0,_=t;const p=()=>{if(d)return;_();const r=n(s?u[0]:u,e);l?e(r):_=o(r)?r:t},f=a.map(((t,e)=>c(t,(t=>{u[e]=t,d&=~(1<<e),i&&p()}),(()=>{d|=1<<e}))));return i=!0,p(),function(){r(f),_()}},{subscribe:qt(i,u).subscribe};var u}const Tt="undefined"!=typeof AudioContext?AudioContext:"undefined"!=typeof webkitAudioContext?webkitAudioContext:void 0;let Dt;const Ft=new Array(32).fill(void 0);function Lt(t){return Ft[t]}Ft.push(void 0,null,!0,!1);let Bt=Ft.length;function It(t){const e=Lt(t);return function(t){t<36||(Ft[t]=Bt,Bt=t)}(t),e}let Nt=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Nt.decode();let zt=null;function Pt(){return null!==zt&&zt.buffer===Dt.memory.buffer||(zt=new Uint8Array(Dt.memory.buffer)),zt}function Rt(t,e){return Nt.decode(Pt().subarray(t,t+e))}function Ht(t){Bt===Ft.length&&Ft.push(Ft.length+1);const e=Bt;return Bt=Ft[e],Ft[e]=t,e}let Wt=0,Vt=new TextEncoder("utf-8");const Yt="function"==typeof Vt.encodeInto?function(t,e){return Vt.encodeInto(t,e)}:function(t,e){const n=Vt.encode(t);return e.set(n),{read:t.length,written:n.length}};function Ut(t,e,n){if(void 0===n){const n=Vt.encode(t),r=e(n.length);return Pt().subarray(r,r+n.length).set(n),Wt=n.length,r}let r=t.length,o=e(r);const i=Pt();let s=0;for(;s<r;s++){const e=t.charCodeAt(s);if(e>127)break;i[o+s]=e}if(s!==r){0!==s&&(t=t.slice(s)),o=n(o,r,r=s+3*t.length);const e=Pt().subarray(o+s,o+r);s+=Yt(t,e).written}return Wt=s,o}function Xt(t){return null==t}let Kt=null;function Gt(){return null!==Kt&&Kt.buffer===Dt.memory.buffer||(Kt=new Int32Array(Dt.memory.buffer)),Kt}function Jt(t){const e=typeof t;if("number"==e||"boolean"==e||null==t)return`${t}`;if("string"==e)return`"${t}"`;if("symbol"==e){const e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==e){const e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){const e=t.length;let n="[";e>0&&(n+=Jt(t[0]));for(let r=1;r<e;r++)n+=", "+Jt(t[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(!(n.length>1))return toString.call(t);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(t)+")"}catch(t){return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:r}function Zt(t,e,n){Dt._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h2105f326b72972f7(t,e,Ht(n))}const Qt=new Uint32Array(2),te=new BigInt64Array(Qt.buffer),ee=new BigUint64Array(Qt.buffer);function ne(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`);return t.ptr}let re=null;function oe(){return null!==re&&re.buffer===Dt.memory.buffer||(re=new Float64Array(Dt.memory.buffer)),re}function ie(t,e){try{return t.apply(this,e)}catch(t){Dt.__wbindgen_exn_store(Ht(t))}}let se=null;function ae(t,e){return(null!==se&&se.buffer===Dt.memory.buffer||(se=new Float32Array(Dt.memory.buffer)),se).subarray(t/4,t/4+e)}const ce=Object.freeze({Absolute:0,0:"Absolute",Relative:1,1:"Relative"}),le=Object.freeze({Linear:0,0:"Linear",Exponential:1,1:"Exponential",Logarithmic:2,2:"Logarithmic"});class ue{static __wrap(t){const e=Object.create(ue.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_bufferid_free(t)}}class de{static __wrap(t){const e=Object.create(de.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_clipid_free(t)}}class _e{static __wrap(t){const e=Object.create(_e.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_link_free(t)}get track(){var t=Dt.__wbg_get_link_track(this.ptr);return 0===t?void 0:he.__wrap(t)}set track(t){let e=0;Xt(t)||(ne(t,he),e=t.ptr,t.ptr=0),Dt.__wbg_set_link_track(this.ptr,e)}get node(){var t=Dt.__wbg_get_link_node(this.ptr);return 0===t?void 0:me.__wrap(t)}set node(t){let e=0;Xt(t)||(ne(t,me),e=t.ptr,t.ptr=0),Dt.__wbg_set_link_node(this.ptr,e)}get output_index(){return Dt.__wbg_get_link_output_index(this.ptr)>>>0}set output_index(t){Dt.__wbg_set_link_output_index(this.ptr,t)}get_track(){var t=Dt.link_get_track(this.ptr);return 0===t?void 0:he.__wrap(t)}get_node(){var t=Dt.link_get_node(this.ptr);return 0===t?void 0:me.__wrap(t)}get_output_index(){return Dt.__wbg_get_link_output_index(this.ptr)>>>0}}class pe{static __wrap(t){const e=Object.create(pe.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_moduleid_free(t)}}class fe{static __wrap(t){const e=Object.create(fe.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_moduleinstanceid_free(t)}}class me{static __wrap(t){const e=Object.create(me.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_nodeid_free(t)}}class ge{static __wrap(t){const e=Object.create(ge.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_project_free(t)}constructor(t){var e=Ut(t,Dt.__wbindgen_malloc,Dt.__wbindgen_realloc),n=Wt,r=Dt.project_new(e,n);return ge.__wrap(r)}name(){try{const n=Dt.__wbindgen_add_to_stack_pointer(-16);Dt.project_name(n,this.ptr);var t=Gt()[n/4+0],e=Gt()[n/4+1];return Rt(t,e)}finally{Dt.__wbindgen_add_to_stack_pointer(16),Dt.__wbindgen_free(t,e)}}tempo(){return Dt.project_tempo(this.ptr)}volume(){return Dt.project_volume(this.ptr)}set_tempo(t){Dt.project_set_tempo(this.ptr,t)}set_volume(t){Dt.project_set_volume(this.ptr,t)}quartz(){return Dt.project_quartz(this.ptr)}quartz_to_secs(t){te[0]=t;const e=Qt[0],n=Qt[1];return Dt.project_quartz_to_secs(this.ptr,e,n)}secs_to_quartz(t){try{const r=Dt.__wbindgen_add_to_stack_pointer(-16);Dt.project_secs_to_quartz(r,this.ptr,t);var e=Gt()[r/4+0],n=Gt()[r/4+1];Qt[0]=e,Qt[1]=n;return te[0]}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}set_name(t){var e=Ut(t,Dt.__wbindgen_malloc,Dt.__wbindgen_realloc),n=Wt;Dt.project_set_name(this.ptr,e,n)}current_pos(){try{const n=Dt.__wbindgen_add_to_stack_pointer(-16);Dt.project_current_pos(n,this.ptr);var t=Gt()[n/4+0],e=Gt()[n/4+1];Qt[0]=t,Qt[1]=e;return ee[0]}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}set_cursor_pos(t){ee[0]=t;const e=Qt[0],n=Qt[1];Dt.project_set_cursor_pos(this.ptr,e,n)}set_cursor_pos_secs(t){Dt.project_set_cursor_pos_secs(this.ptr,t)}is_track_index_in_timeline(t){return 0!==Dt.project_is_track_index_in_timeline(this.ptr,t)}get_track_by_index(t){var e=Dt.project_get_track_by_index(this.ptr,t);return he.__wrap(e)}remove_track_by_index(t){Dt.project_remove_track_by_index(this.ptr,t)}remove_track_by_id(t){ne(t,he),Dt.project_remove_track_by_id(this.ptr,t.ptr)}get_track_count(){return Dt.project_get_track_count(this.ptr)>>>0}create_buffer(t){var e=function(t,e){const n=e(1*t.length);return Pt().set(t,n/1),Wt=t.length,n}(t,Dt.__wbindgen_malloc),n=Wt;return It(Dt.project_create_buffer(this.ptr,e,n))}delete_buffer(t){return ne(t,ue),0!==Dt.project_delete_buffer(this.ptr,t.ptr)}get_buffer_duration(t){try{const r=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,ue),Dt.project_get_buffer_duration(r,this.ptr,t.ptr);var e=Gt()[r/4+0],n=Gt()[r/4+1];Qt[0]=e,Qt[1]=n;return ee[0]}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}is_buffer_alive(t){return ne(t,ue),0!==Dt.project_is_buffer_alive(this.ptr,t.ptr)}copy_clip(t,e,n){var r=Ut(t,Dt.__wbindgen_malloc,Dt.__wbindgen_realloc),o=Wt;te[0]=e;const i=Qt[0],s=Qt[1];ne(n,be);var a=n.ptr;n.ptr=0;var c=Dt.project_copy_clip(this.ptr,r,o,i,s,a);return 0===c?void 0:de.__wrap(c)}is_clip_alive(t){return ne(t,de),0!==Dt.project_is_clip_alive(this.ptr,t.ptr)}set_clip_buffer(t,e){ne(t,de),ne(e,ue),Dt.project_set_clip_buffer(this.ptr,t.ptr,e.ptr)}set_clip_name(t,e){ne(t,de);var n=Ut(e,Dt.__wbindgen_malloc,Dt.__wbindgen_realloc),r=Wt;Dt.project_set_clip_name(this.ptr,t.ptr,n,r)}set_clip_position(t,e){ne(t,de),te[0]=e;const n=Qt[0],r=Qt[1];Dt.project_set_clip_position(this.ptr,t.ptr,n,r)}set_clip_duration(t,e){ne(t,de),ee[0]=e;const n=Qt[0],r=Qt[1];Dt.project_set_clip_duration(this.ptr,t.ptr,n,r)}get_clip_position(t){try{const o=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,de),Dt.project_get_clip_position(o,this.ptr,t.ptr);var e=Gt()[o/4+0],n=Gt()[o/4+1],r=Gt()[o/4+2];Qt[0]=n,Qt[1]=r;return 0===e?void 0:te[0]}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}get_clip_duration(t){try{const o=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,de),Dt.project_get_clip_duration(o,this.ptr,t.ptr);var e=Gt()[o/4+0],n=Gt()[o/4+1],r=Gt()[o/4+2];Qt[0]=n,Qt[1]=r;return 0===e?void 0:ee[0]}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}get_clip_buffer(t){ne(t,de);var e=Dt.project_get_clip_buffer(this.ptr,t.ptr);return 0===e?void 0:ue.__wrap(e)}get_clip_name(t){try{const r=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,de),Dt.project_get_clip_name(r,this.ptr,t.ptr);var e=Gt()[r/4+0],n=Gt()[r/4+1];let o;return 0!==e&&(o=Rt(e,n).slice(),Dt.__wbindgen_free(e,1*n)),o}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}delete_clip(t){return ne(t,de),0!==Dt.project_delete_clip(this.ptr,t.ptr)}get_clip_ids_count(){return Dt.project_get_clip_ids_count(this.ptr)>>>0}get_clip_id(t){var e=Dt.project_get_clip_id(this.ptr,t);return de.__wrap(e)}get_clip_unique_clip_id_index(t){return ne(t,de),Dt.project_get_clip_unique_clip_id_index(this.ptr,t.ptr)>>>0}is_module_factory_alive(t){return ne(t,pe),0!==Dt.project_is_module_factory_alive(this.ptr,t.ptr)}create_module_instance(t){ne(t,pe);var e=Dt.project_create_module_instance(this.ptr,t.ptr);return fe.__wrap(e)}get_module_factory_name(t){try{const r=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,pe),Dt.project_get_module_factory_name(r,this.ptr,t.ptr);var e=Gt()[r/4+0],n=Gt()[r/4+1];let o;return 0!==e&&(o=Rt(e,n).slice(),Dt.__wbindgen_free(e,1*n)),o}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}get_module_factory_id_count(){return Dt.project_get_module_factory_id_count(this.ptr)>>>0}get_module_factory_id(t){var e=Dt.project_get_module_factory_id(this.ptr,t);return pe.__wrap(e)}play(){Dt.project_play(this.ptr)}stop(){Dt.project_stop(this.ptr)}create_unique_clip(t,e,n){var r=Ut(t,Dt.__wbindgen_malloc,Dt.__wbindgen_realloc),o=Wt;ee[0]=e;const i=Qt[0],s=Qt[1];ne(n,ue);var a=Dt.project_create_unique_clip(this.ptr,r,o,i,s,n.ptr);return be.__wrap(a)}is_unique_clip_alive(t){return ne(t,be),0!==Dt.project_is_unique_clip_alive(this.ptr,t.ptr)}set_unique_clip_buffer(t,e){ne(t,be),ne(e,ue),Dt.project_set_unique_clip_buffer(this.ptr,t.ptr,e.ptr)}set_unique_clip_name(t,e){ne(t,be);var n=Ut(e,Dt.__wbindgen_malloc,Dt.__wbindgen_realloc),r=Wt;Dt.project_set_unique_clip_name(this.ptr,t.ptr,n,r)}set_unique_clip_duration(t,e){ne(t,be),ee[0]=e;const n=Qt[0],r=Qt[1];Dt.project_set_unique_clip_duration(this.ptr,t.ptr,n,r)}get_unique_clip_duration(t){try{const o=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,be),Dt.project_get_unique_clip_duration(o,this.ptr,t.ptr);var e=Gt()[o/4+0],n=Gt()[o/4+1],r=Gt()[o/4+2];Qt[0]=n,Qt[1]=r;return 0===e?void 0:ee[0]}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}get_unique_clip_buffer(t){ne(t,be);var e=Dt.project_get_unique_clip_buffer(this.ptr,t.ptr);return 0===e?void 0:ue.__wrap(e)}get_unique_clip_name(t){try{const r=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,be),Dt.project_get_unique_clip_name(r,this.ptr,t.ptr);var e=Gt()[r/4+0],n=Gt()[r/4+1];let o;return 0!==e&&(o=Rt(e,n).slice(),Dt.__wbindgen_free(e,1*n)),o}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}delete_unique_clip(t){return ne(t,be),0!==Dt.project_delete_unique_clip(this.ptr,t.ptr)}get_unique_clip_ids_count(){return Dt.project_get_unique_clip_ids_count(this.ptr)>>>0}get_unique_clip_id(t){var e=Dt.project_get_unique_clip_id(this.ptr,t);return be.__wrap(e)}node_id_to_number(t){return ne(t,me),Dt.project_node_id_to_number(this.ptr,t.ptr)>>>0}number_to_node_id(t){var e=Dt.project_number_to_node_id(this.ptr,t);return me.__wrap(e)}node_id_equals(t,e){return ne(t,me),ne(e,me),0!==Dt.project_node_id_equals(this.ptr,t.ptr,e.ptr)}track_id_to_number(t){return ne(t,he),Dt.project_node_id_to_number(this.ptr,t.ptr)>>>0}number_to_track_id(t){var e=Dt.project_number_to_node_id(this.ptr,t);return he.__wrap(e)}track_id_equals(t,e){return ne(t,he),ne(e,he),0!==Dt.project_node_id_equals(this.ptr,t.ptr,e.ptr)}create_node(t,e,n,r){ne(t,pe),ne(e,fe);var o=Dt.project_create_node(this.ptr,t.ptr,e.ptr,n,r);return me.__wrap(o)}delete_node(t){return ne(t,me),0!==Dt.project_delete_node(this.ptr,t.ptr)}set_node_position_by_id(t,e,n){return ne(t,me),0!==Dt.project_set_node_position_by_id(this.ptr,t.ptr,e,n)}is_node_valid(t){return ne(t,me),0!==Dt.project_is_node_valid(this.ptr,t.ptr)}get_node_ids_count(){return Dt.project_get_node_ids_count(this.ptr)>>>0}get_node_id(t){var e=Dt.project_get_node_id(this.ptr,t);return me.__wrap(e)}get_node_name(t){try{const r=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,me),Dt.project_get_node_name(r,this.ptr,t.ptr);var e=Gt()[r/4+0],n=Gt()[r/4+1];let o;return 0!==e&&(o=Rt(e,n).slice(),Dt.__wbindgen_free(e,1*n)),o}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}get_node_module_instance_id(t){ne(t,me);var e=Dt.project_get_node_module_instance_id(this.ptr,t.ptr);return fe.__wrap(e)}set_node_position(t,e,n){ne(t,me),Dt.project_set_node_position(this.ptr,t.ptr,e,n)}get_node_x(t){return ne(t,me),Dt.project_get_node_x(this.ptr,t.ptr)}get_node_y(t){return ne(t,me),Dt.project_get_node_y(this.ptr,t.ptr)}link_nodes(t,e,n,r){return ne(t,me),ne(e,me),0!==Dt.project_link_nodes(this.ptr,t.ptr,e.ptr,n,r)}link_node_to_track(t,e,n){ne(t,me),ne(e,he),Dt.project_link_node_to_track(this.ptr,t.ptr,e.ptr,n)}unlink_node(t,e){return ne(t,me),0!==Dt.project_unlink_node(this.ptr,t.ptr,e)}input_count(t){return ne(t,me),Dt.project_input_count(this.ptr,t.ptr)>>>0}output_count(t){return ne(t,me),Dt.project_output_count(this.ptr,t.ptr)>>>0}get_param_id(t,e){try{const i=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,me),Dt.project_get_param_id(i,this.ptr,t.ptr,e);var n=Gt()[i/4+0],r=Gt()[i/4+1],o=Gt()[i/4+2];Qt[0]=r,Qt[1]=o;return 0===n?void 0:ee[0]}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}get_link(t,e){ne(t,me);var n=Dt.project_get_link(this.ptr,t.ptr,e);return 0===n?void 0:_e.__wrap(n)}get_link_from_param_id(t){ee[0]=t;const e=Qt[0],n=Qt[1];var r=Dt.project_get_link_from_param_id(this.ptr,e,n);return 0===r?void 0:_e.__wrap(r)}create_track(t){var e=Ut(t,Dt.__wbindgen_malloc,Dt.__wbindgen_realloc),n=Wt,r=Dt.project_create_track(this.ptr,e,n);return he.__wrap(r)}delete_track(t){ne(t,he),Dt.project_delete_track(this.ptr,t.ptr)}get_track_clip_count(t){try{const r=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,he),Dt.project_get_track_clip_count(r,this.ptr,t.ptr);var e=Gt()[r/4+0],n=Gt()[r/4+1];return 0===e?void 0:n>>>0}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}get_track_name(t){try{const r=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,he),Dt.project_get_track_name(r,this.ptr,t.ptr);var e=Gt()[r/4+0],n=Gt()[r/4+1];let o;return 0!==e&&(o=Rt(e,n).slice(),Dt.__wbindgen_free(e,1*n)),o}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}get_track_clip(t,e){ne(t,he);var n=Dt.project_get_track_clip(this.ptr,t.ptr,e);return de.__wrap(n)}is_track_alive(t){return ne(t,he),0!==Dt.project_is_track_alive(this.ptr,t.ptr)}set_track_name(t,e){ne(t,he);var n=Ut(e,Dt.__wbindgen_malloc,Dt.__wbindgen_realloc),r=Wt;Dt.project_set_track_name(this.ptr,t.ptr,n,r)}remove_clip(t,e){ne(t,he),ne(e,de),Dt.project_remove_clip(this.ptr,t.ptr,e.ptr)}remove_clip_by_index(t,e){ne(t,he),Dt.project_remove_clip_by_index(this.ptr,t.ptr,e)}add_clip_to_track(t,e){ne(t,he),ne(e,de),Dt.project_add_clip_to_track(this.ptr,t.ptr,e.ptr)}track_id_from_input(t){ee[0]=t;const e=Qt[0],n=Qt[1];var r=Dt.project_track_id_from_input(this.ptr,e,n);return 0===r?void 0:he.__wrap(r)}get_track_gain(t){try{const r=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,he),Dt.project_get_track_gain(r,this.ptr,t.ptr);var e=Gt()[r/4+0],n=oe()[r/8+1];return 0===e?void 0:n}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}get_track_pan(t){try{const r=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,he),Dt.project_get_track_pan(r,this.ptr,t.ptr);var e=Gt()[r/4+0],n=oe()[r/8+1];return 0===e?void 0:n}finally{Dt.__wbindgen_add_to_stack_pointer(16)}}set_track_gain(t,e){ne(t,he),Dt.project_set_track_gain(this.ptr,t.ptr,e)}set_track_enabled(t,e){ne(t,he),Dt.project_set_track_enabled(this.ptr,t.ptr,e)}set_track_pan(t,e){ne(t,he),Dt.project_set_track_pan(this.ptr,t.ptr,e)}is_track_enabled(t){return ne(t,he),0!==Dt.project_is_track_enabled(this.ptr,t.ptr)}get_module_of(t){ne(t,fe);var e=Dt.project_get_module_of(this.ptr,t.ptr);return pe.__wrap(e)}delete_module(t){return ne(t,fe),0!==Dt.project_delete_module(this.ptr,t.ptr)}get_module_instance_control_count(t){return ne(t,fe),Dt.project_get_module_instance_control_count(this.ptr,t.ptr)>>>0}get_module_instance_control_type(t,e){try{const o=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,fe),Dt.project_get_module_instance_control_type(o,this.ptr,t.ptr,e);var n=Gt()[o/4+0],r=Gt()[o/4+1];return Rt(n,r)}finally{Dt.__wbindgen_add_to_stack_pointer(16),Dt.__wbindgen_free(n,r)}}get_module_instance_control_input_label(t,e){try{const o=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,fe),Dt.project_get_module_instance_control_input_label(o,this.ptr,t.ptr,e);var n=Gt()[o/4+0],r=Gt()[o/4+1];return Rt(n,r)}finally{Dt.__wbindgen_add_to_stack_pointer(16),Dt.__wbindgen_free(n,r)}}get_module_instance_control_output_label(t,e){try{const o=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,fe),Dt.project_get_module_instance_control_output_label(o,this.ptr,t.ptr,e);var n=Gt()[o/4+0],r=Gt()[o/4+1];return Rt(n,r)}finally{Dt.__wbindgen_add_to_stack_pointer(16),Dt.__wbindgen_free(n,r)}}get_module_instance_control_param_label(t,e){try{const o=Dt.__wbindgen_add_to_stack_pointer(-16);ne(t,fe),Dt.project_get_module_instance_control_param_label(o,this.ptr,t.ptr,e);var n=Gt()[o/4+0],r=Gt()[o/4+1];return Rt(n,r)}finally{Dt.__wbindgen_add_to_stack_pointer(16),Dt.__wbindgen_free(n,r)}}get_module_instance_control_param_default_value(t,e){return ne(t,fe),Dt.project_get_module_instance_control_param_default_value(this.ptr,t.ptr,e)}get_module_instance_control_param_min_value(t,e){return ne(t,fe),Dt.project_get_module_instance_control_param_min_value(this.ptr,t.ptr,e)}get_module_instance_control_param_max_value(t,e){return ne(t,fe),Dt.project_get_module_instance_control_param_max_value(this.ptr,t.ptr,e)}get_module_instance_control_param_value(t,e){return ne(t,fe),Dt.project_get_module_instance_control_param_value(this.ptr,t.ptr,e)}set_module_instance_control_param_value(t,e,n){ne(t,fe),Dt.project_set_module_instance_control_param_value(this.ptr,t.ptr,e,n)}}class he{static __wrap(t){const e=Object.create(he.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_trackid_free(t)}}class be{static __wrap(t){const e=Object.create(be.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_uniqueclipid_free(t)}}class ve{static __wrap(t){const e=Object.create(ve.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_vec2_free(t)}get x(){return Dt.__wbg_get_vec2_x(this.ptr)}set x(t){Dt.__wbg_set_vec2_x(this.ptr,t)}get y(){return Dt.__wbg_get_vec2_y(this.ptr)}set y(t){Dt.__wbg_set_vec2_y(this.ptr,t)}static new(t,e){var n=Dt.vec2_new(t,e);return ve.__wrap(n)}}async function ye(t){void 0===t&&(t=new URL("index_bg.wasm",document.currentScript&&document.currentScript.src||new URL("bundle.js",document.baseURI).href));const e={wbg:{}};e.wbg.__wbindgen_object_drop_ref=function(t){It(t)},e.wbg.__wbindgen_string_new=function(t,e){return Ht(Rt(t,e))},e.wbg.__wbindgen_object_clone_ref=function(t){return Ht(Lt(t))},e.wbg.__wbg_bufferid_new=function(t){return Ht(ue.__wrap(t))},e.wbg.__wbindgen_cb_drop=function(t){const e=It(t).original;if(1==e.cnt--)return e.a=0,!0;return!1},e.wbg.__wbindgen_number_new=function(t){return Ht(t)},e.wbg.__wbindgen_string_get=function(t,e){const n=Lt(e);var r="string"==typeof n?n:void 0,o=Xt(r)?0:Ut(r,Dt.__wbindgen_malloc,Dt.__wbindgen_realloc),i=Wt;Gt()[t/4+1]=i,Gt()[t/4+0]=o},e.wbg.__wbg_frequency_c790829b1330266e=function(t){return Ht(Lt(t).frequency)},e.wbg.__wbg_detune_0c98198e067c9898=function(t){return Ht(Lt(t).detune)},e.wbg.__wbg_Q_241cc46dcc77b167=function(t){return Ht(Lt(t).Q)},e.wbg.__wbg_gain_74d947d9f01c5ccb=function(t){return Ht(Lt(t).gain)},e.wbg.__wbg_value_51f8c3c3dc0f903a=function(t){return Lt(t).value},e.wbg.__wbg_setvalue_df8236adf40ea2d3=function(t,e){Lt(t).value=e},e.wbg.__wbg_defaultValue_489944cf72078ada=function(t){return Lt(t).defaultValue},e.wbg.__wbg_threshold_773394fed450776b=function(t){return Ht(Lt(t).threshold)},e.wbg.__wbg_knee_62b5c28da556ba51=function(t){return Ht(Lt(t).knee)},e.wbg.__wbg_ratio_a643cb0eb7ff69f4=function(t){return Ht(Lt(t).ratio)},e.wbg.__wbg_attack_f1c47c074c6479ad=function(t){return Ht(Lt(t).attack)},e.wbg.__wbg_release_66aaf443d2ecd4fe=function(t){return Ht(Lt(t).release)},e.wbg.__wbg_pan_060c77bc11ed83a4=function(t){return Ht(Lt(t).pan)},e.wbg.__wbg_delayTime_9ac5b7dc014ec35d=function(t){return Ht(Lt(t).delayTime)},e.wbg.__wbg_gain_d4eaca6128dcfd90=function(t){return Ht(Lt(t).gain)},e.wbg.__wbg_instanceof_AudioBuffer_75ae7a42c391f759=function(t){return Lt(t)instanceof AudioBuffer},e.wbg.__wbg_duration_b1826cd5d3410ee3=function(t){return Lt(t).duration},e.wbg.__wbg_new_3d276f1b0c6c5e21=function(){return ie((function(t){return Ht(new AudioBuffer(Lt(t)))}),arguments)},e.wbg.__wbg_copyToChannel_b4918009bf25ac35=function(){return ie((function(t,e,n,r){Lt(t).copyToChannel(ae(e,n),r)}),arguments)},e.wbg.__wbg_setbuffer_fd285c7b7a06678a=function(t,e){Lt(t).buffer=Lt(e)},e.wbg.__wbg_frequency_8c3d017b1ec56a31=function(t){return Ht(Lt(t).frequency)},e.wbg.__wbg_detune_d8da7bdbf3f81230=function(t){return Ht(Lt(t).detune)},e.wbg.__wbg_log_3445347661d4505e=function(t){console.log(Lt(t))},e.wbg.__wbg_destination_6c3ac66ee8b2fe85=function(t){return Ht(Lt(t).destination)},e.wbg.__wbg_sampleRate_ffa6f08191b00934=function(t){return Lt(t).sampleRate},e.wbg.__wbg_currentTime_e231c76a3c011126=function(t){return Lt(t).currentTime},e.wbg.__wbg_new_52bbbd81ffc19dff=function(){return ie((function(){return Ht(new Tt)}),arguments)},e.wbg.__wbg_createBiquadFilter_c3c52028a2109b9d=function(){return ie((function(t){return Ht(Lt(t).createBiquadFilter())}),arguments)},e.wbg.__wbg_createBufferSource_7244d810d62a0bed=function(){return ie((function(t){return Ht(Lt(t).createBufferSource())}),arguments)},e.wbg.__wbg_createChannelMerger_542d0885aa4bdc09=function(){return ie((function(t,e){return Ht(Lt(t).createChannelMerger(e>>>0))}),arguments)},e.wbg.__wbg_createChannelSplitter_95302cbc3f9b9f85=function(){return ie((function(t,e){return Ht(Lt(t).createChannelSplitter(e>>>0))}),arguments)},e.wbg.__wbg_createConstantSource_b41469da72be11da=function(){return ie((function(t){return Ht(Lt(t).createConstantSource())}),arguments)},e.wbg.__wbg_createConvolver_c452427019e40ddc=function(){return ie((function(t){return Ht(Lt(t).createConvolver())}),arguments)},e.wbg.__wbg_createDelay_d178a6d343f579c3=function(){return ie((function(t){return Ht(Lt(t).createDelay())}),arguments)},e.wbg.__wbg_createDynamicsCompressor_ac679007d232220a=function(){return ie((function(t){return Ht(Lt(t).createDynamicsCompressor())}),arguments)},e.wbg.__wbg_createGain_c5f114390c363029=function(){return ie((function(t){return Ht(Lt(t).createGain())}),arguments)},e.wbg.__wbg_createOscillator_976d3c8e16e078b0=function(){return ie((function(t){return Ht(Lt(t).createOscillator())}),arguments)},e.wbg.__wbg_createStereoPanner_6b0ead6c67bbd51c=function(){return ie((function(t){return Ht(Lt(t).createStereoPanner())}),arguments)},e.wbg.__wbg_decodeAudioData_e04afd162e340c7d=function(){return ie((function(t,e){return Ht(Lt(t).decodeAudioData(Lt(e)))}),arguments)},e.wbg.__wbg_instanceof_AudioNode_ed5150583da4af19=function(t){return Lt(t)instanceof AudioNode},e.wbg.__wbg_numberOfInputs_1f4e15cb1c81e60f=function(t){return Lt(t).numberOfInputs},e.wbg.__wbg_numberOfOutputs_93000d7c5d3817c8=function(t){return Lt(t).numberOfOutputs},e.wbg.__wbg_connect_eb8fcb61cab88f0b=function(){return ie((function(t,e,n,r){return Ht(Lt(t).connect(Lt(e),n>>>0,r>>>0))}),arguments)},e.wbg.__wbg_connect_ba14c50174f91c1f=function(){return ie((function(t,e,n){Lt(t).connect(Lt(e),n>>>0)}),arguments)},e.wbg.__wbg_disconnect_a7d53f0c0236762f=function(){return ie((function(t,e,n,r){Lt(t).disconnect(Lt(e),n>>>0,r>>>0)}),arguments)},e.wbg.__wbg_disconnect_4ebe1430792b62cd=function(){return ie((function(t,e,n){Lt(t).disconnect(Lt(e),n>>>0)}),arguments)},e.wbg.__wbg_setbuffer_c643a88bac27b2bd=function(t,e){Lt(t).buffer=Lt(e)},e.wbg.__wbg_start_2fc7c700ae119a8f=function(){return ie((function(t,e,n,r){Lt(t).start(e,n,r)}),arguments)},e.wbg.__wbg_stop_ceac30cd41a20744=function(){return ie((function(t){Lt(t).stop()}),arguments)},e.wbg.__wbg_offset_d3bf86d8c20965b0=function(t){return Ht(Lt(t).offset)},e.wbg.__wbg_new_0b83d3df67ecb33e=function(){return Ht(new Object)},e.wbg.__wbg_instanceof_Error_561efcb1265706d8=function(t){return Lt(t)instanceof Error},e.wbg.__wbg_message_9f7d15ff97fc4102=function(t){return Ht(Lt(t).message)},e.wbg.__wbg_call_346669c262382ad7=function(){return ie((function(t,e,n){return Ht(Lt(t).call(Lt(e),Lt(n)))}),arguments)},e.wbg.__wbg_new_b1d61b5687f5e73a=function(t,e){try{var n={a:t,b:e},r=new Promise(((t,e)=>{const r=n.a;n.a=0;try{return function(t,e,n,r){Dt.wasm_bindgen__convert__closures__invoke2_mut__h0567eb209159ce2b(t,e,Ht(n),Ht(r))}(r,n.b,t,e)}finally{n.a=r}}));return Ht(r)}finally{n.a=n.b=0}},e.wbg.__wbg_resolve_d23068002f584f22=function(t){return Ht(Promise.resolve(Lt(t)))},e.wbg.__wbg_then_2fcac196782070cc=function(t,e){return Ht(Lt(t).then(Lt(e)))},e.wbg.__wbg_then_8c2d62e8ae5978f7=function(t,e,n){return Ht(Lt(t).then(Lt(e),Lt(n)))},e.wbg.__wbg_buffer_397eaa4d72ee94dd=function(t){return Ht(Lt(t).buffer)},e.wbg.__wbg_newwithbyteoffsetandlength_4b9b8c4e3f5adbff=function(t,e,n){return Ht(new Uint8Array(Lt(t),e>>>0,n>>>0))},e.wbg.__wbg_new_a7ce447f15ff496f=function(t){return Ht(new Uint8Array(Lt(t)))},e.wbg.__wbg_buffer_facf0398a281c85b=function(t){return Ht(Lt(t).buffer)},e.wbg.__wbg_set_82a4e8a85e31ac42=function(){return ie((function(t,e,n){return Reflect.set(Lt(t),Lt(e),Lt(n))}),arguments)},e.wbg.__wbindgen_debug_string=function(t,e){var n=Ut(Jt(Lt(e)),Dt.__wbindgen_malloc,Dt.__wbindgen_realloc),r=Wt;Gt()[t/4+1]=r,Gt()[t/4+0]=n},e.wbg.__wbindgen_throw=function(t,e){throw new Error(Rt(t,e))},e.wbg.__wbindgen_memory=function(){return Ht(Dt.memory)},e.wbg.__wbindgen_closure_wrapper1181=function(t,e,n){var r=function(t,e,n,r){const o={a:t,b:e,cnt:1,dtor:n},i=(...t)=>{o.cnt++;const e=o.a;o.a=0;try{return r(e,o.b,...t)}finally{0==--o.cnt?Dt.__wbindgen_export_2.get(o.dtor)(e,o.b):o.a=e}};return i.original=o,i}(t,e,333,Zt);return Ht(r)},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await t,e);return Dt=n.exports,ye.__wbindgen_wasm_module=r,Dt}var we=Object.freeze({__proto__:null,KnobKind:ce,KnobMode:le,AudioBufferSourceFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_audiobuffersourcefactory_free(t)}},AudioBufferWrapper:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_audiobufferwrapper_free(t)}},AudioModule:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_audiomodule_free(t)}get id(){var t=Dt.__wbg_get_audiomodule_id(this.ptr);return pe.__wrap(t)}set id(t){ne(t,pe);var e=t.ptr;t.ptr=0,Dt.__wbg_set_audiomodule_id(this.ptr,e)}get x(){return Dt.__wbg_get_audiomodule_x(this.ptr)>>>0}set x(t){Dt.__wbg_set_audiomodule_x(this.ptr,t)}get y(){return Dt.__wbg_get_audiomodule_y(this.ptr)>>>0}set y(t){Dt.__wbg_set_audiomodule_y(this.ptr,t)}},BiquadFilterFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_biquadfilterfactory_free(t)}},BufferId:ue,ChannelMergerFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_channelmergerfactory_free(t)}},ChannelSplitterFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_channelsplitterfactory_free(t)}},ClipId:de,ConstantSourceFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_constantsourcefactory_free(t)}},ConvolverFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_convolverfactory_free(t)}},DelayFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_delayfactory_free(t)}},DestinationFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_destinationfactory_free(t)}},DynamicsCompressorFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_dynamicscompressorfactory_free(t)}},GainFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_gainfactory_free(t)}},Link:_e,MixerFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_mixerfactory_free(t)}},ModuleId:pe,ModuleInstanceId:fe,NodeId:me,OscillatorFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_oscillatorfactory_free(t)}},Project:ge,ReverbFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_reverbfactory_free(t)}},StereoPannerFactory:class{__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dt.__wbg_stereopannerfactory_free(t)}},TrackId:he,UniqueClipId:be,Vec2:ve,default:ye});const $e=qt();const ke=Ot($e,((t,e)=>{if(!t)return e({tracks:[],module_names:[],clips:[],unique_clips:[],nodes:[],volume:0,tempo:0,quartz_to_secs:t=>0,secs_to_quartz:t=>0n});function n(e){return t.node_id_to_number(e)}function r(e){return t.track_id_to_number(e)}function o(e){const n=t.get_track_clip_count(e),r=[...Array(n).keys()].map((n=>{const r=function(e,n){const r=t.get_track_clip(e,n);if(r&&t.is_clip_alive(r))return{id:r,from_unique_clip_index:t.get_clip_unique_clip_id_index(r),index:n,name:t.get_clip_name(r),position:Number(t.get_clip_position(r)),duration:Number(t.get_clip_duration(r)),buffer:[]}}(e,n);return r}));return r}function i(e){const n=t.get_track_name(e),i=o(e),s=t.get_track_gain(e),a=t.get_track_pan(e),c=t.is_track_enabled(e);return{id:e,numeral_track_id:r(e),name:n,clips:i,gain:s,pan:a,is_enabled:c}}function s(e,n){const r=t.get_clip_name(e),o=t.get_clip_position(e),i=t.get_clip_duration(e);return{from_unique_clip_index:t.get_clip_unique_clip_id_index(e),id:e,index:n,name:r,position:Number(o),duration:Number(i)}}function a(e,n){const r=t.get_unique_clip_name(e),o=t.get_unique_clip_duration(e);return{id:e,index:n,name:r,duration:Number(o)}}e({tracks:function(t){let e=[];const n=t.get_track_count();for(let r=0;r<n;r++){let n=t.get_track_by_index(r);e.push(i(n))}return e}(t),clips:function(t){let e=[];const n=t.get_clip_ids_count();for(let r=0;r<n;r++){const n=t.get_clip_id(r);e.push(s(n,r))}return e}(t),unique_clips:function(t){let e=[];const n=t.get_unique_clip_ids_count();for(let r=0;r<n;r++){const n=t.get_unique_clip_id(r);e.push(a(n,r))}return e}(t),module_names:function(t){const e=t.get_module_factory_id_count(),n=[];for(let r=0;r<e;r++){const e=t.get_module_factory_id(r);n.push({id:r,name:t.get_module_factory_name(e)})}return n}(t),nodes:function(t){const e=t.get_node_ids_count(),o=[];for(let i=0;i<e;i++){const e=t.get_node_id(i),s=t.get_node_name(e),a=t.get_node_x(e),c=t.get_node_y(e),l=t.get_node_module_instance_id(e);let u=[],d=[],_=[],p=[];const f=t.get_module_instance_control_count(l);for(let e=0;e<f;e++){const n=t.get_module_instance_control_type(l,e);if("input"==n){const e=u.length,n=t.get_module_instance_control_input_label(l,e);u.push({id:e,label:n})}else if("output"==n){const e=d.length,n=t.get_module_instance_control_output_label(l,e);d.push({id:e,label:n})}else if("param"==n){const e=_.length,n=t.get_module_instance_control_param_label(l,e),r=t.get_module_instance_control_param_default_value(l,e),o=t.get_module_instance_control_param_min_value(l,e),i=t.get_module_instance_control_param_max_value(l,e),s=t.get_module_instance_control_param_value(l,e);_.push({type:0,id:e,object:{label:n,max:i,min:o,default:r,value:s}})}}u.forEach(((o,i)=>{let s=t.get_link(e,i);s&&(console.log(s),s.node?p.push({outputNodeId:s.node,outputNumeralNodeId:n(s.node),inputPortIndex:i,outputPortIndex:s.output_index}):s.track&&(console.log("LINK TO TRCAKCJ:",s.track),p.push({outputTrackId:s.track,outputNumeralTrackId:r(s.track),inputPortIndex:i,outputPortIndex:s.output_index})))}));const m={node_id:e,numeral_node_id:n(e),x:a,y:c,name:s,parameters:_,inputs:u,outputs:d,links:p};o.push(m)}return o}(t),volume:function(t){return t.volume()}(t),tempo:function(t){return t.tempo()}(t),quartz_to_secs:e=>t.quartz_to_secs(e),secs_to_quartz:e=>t.secs_to_quartz(e)})}));!async function(){const{Project:t}=await(async(t={})=>{let{importHook:e,serverPath:n}=t,r="/build/assets/audio-engine-6e9bafab.wasm";return null!=n&&(r=n+/[^\/\\]*$/.exec(r)[0]),null!=e&&(r=e(r)),await ye(r),we})();$e.set(new t("untitled")),$e.update((t=>(t.create_track("Track Name"),t.create_track("Track Name"),t)))}();var xe={subscribe:ke.subscribe,add_buffer:function(t){return new Promise(((e,n)=>{$e.update((r=>(r?.create_buffer(t).then(e).catch(n),r)))}))},add_track:function(t){let e;return $e.update((n=>(e=n.create_track(t),n))),e},add_clip_to_track:function(t,e,n,r){let o;return $e.update((i=>{const s=i.get_unique_clip_id(e),a=i.get_unique_clip_name(s);return o=i.copy_clip(a,BigInt(n),s),r&&i.set_clip_duration(o,BigInt(r)),i.add_clip_to_track(t,o),i})),o},add_unique_clips:async function(t,e){$e.update((n=>((async()=>{for(let r=0;r<t.length;r++){const o=e[r],i=t[r];try{const t=await n.create_buffer(o),e=n.get_buffer_duration(t);n.create_unique_clip(i,e,t)}catch(t){console.log("Couldn't add clip:",i)}}$e.set(n)})(),n)))},set_clip_position:function(t,e,n){n=Math.round(n),$e.update((r=>{const o=r.get_track_clip(t,e);return r.set_clip_position(o,BigInt(n)),r}))},set_clip_duration:function(t,e,n){n=Math.round(n),$e.update((r=>{const o=r.get_track_clip(t,e);return r.set_clip_duration(o,BigInt(n)),r}))},create_node:function(t,e,n){let r,o,i;return $e.update((s=>(r=s?.get_module_factory_id(t),o=s?.create_module_instance(r),i=s?.create_node(r,o,e,n),s))),i},set_node_position:function(t,e,n){$e.update((r=>(r?.set_node_position_by_id(t,e,n),r)))},delete_node:function(t){$e.update((e=>(e?.delete_node(t),e)))},delete_buffer:function(t){$e.update((e=>(e?.delete_buffer(t),e)))},delete_clip:function(t){$e.update((e=>(e?.delete_clip(t),e)))},delete_track:function(t){$e.update((e=>(e?.delete_track(t),e)))},delete_clip_from_track:function(t,e){$e.update((n=>{const r=n.get_track_clip(t,e);return n.remove_clip(t,r),n.delete_clip(r),n}))},set_track_gain:function(t,e){$e.update((n=>(n.set_track_gain(t,e),n)))},set_track_pan:function(t,e){$e.update((n=>(n.set_track_pan(t,e),n)))},set_volume:function(t){$e.update((e=>(e?.set_volume(t),e)))},set_tempo:function(t){$e.update((e=>(e?.set_tempo(t),e)))},set_node_param_value:function(t,e,n){$e.update((r=>{const o=r.get_node_module_instance_id(t);return r?.set_module_instance_control_param_value(o,e,n),r}))},set_track_name:function(t,e){$e.update((n=>(n?.set_track_name(t,e),n)))},set_track_enabled:function(t,e){$e.update((n=>(n.set_track_enabled(t,e),n)))},play:function(){$e.update((t=>(t.play(),t)))},stop:function(){$e.update((t=>(t.stop(),t)))},duplicate_clip:function(t,e,n){$e.update((r=>{const o=r.get_unique_clip_id(e),i=r.get_unique_clip_name(o);let s=r.copy_clip(i,BigInt(n),o);return r.add_clip_to_track(t,s),r}))},link_nodes:function(t,e,n,r){let o=!1;return $e.update((i=>(o=i.link_nodes(t,e,n,r),i))),o},link_node_track:function(t,e,n){$e.update((r=>(r.link_node_to_track(t,e,n),r)))}};function je(t,e,n){const r=t.slice();return r[3]=e[n],r}function Ee(t){let e,n,r,i,s,a,c;return n=new jt({props:{clipname:t[3].name}}),{c(){e=x("div"),mt(n.$$.fragment),r=S(),L(e,"width","100%"),O(e,"class","svelte-15tv8rc")},m(o,l){w(o,e,l),gt(n,e,null),y(e,r),s=!0,a||(c=f(i=$t.call(null,e,Ce(t[3]))),a=!0)},p(e,r){t=e;const s={};2&r&&(s.clipname=t[3].name),n.$set(s),i&&o(i.update)&&2&r&&i.update.call(null,Ce(t[3]))},i(t){s||(lt(n.$$.fragment,t),s=!0)},o(t){ut(n.$$.fragment,t),s=!1},d(t){t&&$(e),ht(n),a=!1,c()}}}function Se(t){let e,n,r,o,i,s,a,c,l;function u(e){t[2](e)}let d={};void 0!==t[0]&&(d.files=t[0]),r=new At({props:d}),X.push((()=>ft(r,"files",u)));let _=t[1],p=[];for(let e=0;e<_.length;e+=1)p[e]=Ee(je(t,_,e));const f=t=>ut(p[t],1,1,(()=>{p[t]=null}));return{c(){e=x("aside"),n=x("div"),mt(r.$$.fragment),i=S(),s=x("p"),s.textContent="Clips",a=S(),c=x("div");for(let t=0;t<p.length;t+=1)p[t].c();O(s,"class","svelte-15tv8rc"),O(n,"class","clip-title svelte-15tv8rc"),O(c,"class","clip-stack svelte-15tv8rc"),O(e,"class","clip-container svelte-15tv8rc")},m(t,o){w(t,e,o),y(e,n),gt(r,n,null),y(n,i),y(n,s),y(e,a),y(e,c);for(let t=0;t<p.length;t+=1)p[t].m(c,null);l=!0},p(t,[e]){const n={};if(!o&&1&e&&(o=!0,n.files=t[0],tt((()=>o=!1))),r.$set(n),2&e){let n;for(_=t[1],n=0;n<_.length;n+=1){const r=je(t,_,n);p[n]?(p[n].p(r,e),lt(p[n],1)):(p[n]=Ee(r),p[n].c(),lt(p[n],1),p[n].m(c,null))}for(at(),n=_.length;n<p.length;n+=1)f(n);ct()}},i(t){if(!l){lt(r.$$.fragment,t);for(let t=0;t<_.length;t+=1)lt(p[t]);l=!0}},o(t){ut(r.$$.fragment,t),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)ut(p[t]);l=!1},d(t){t&&$(e),ht(r),k(p,t)}}}function Ce(t){return{key:"clipObject",object:t}}function Ae(t,e,n){let r,o=[];return xe.subscribe((t=>{n(1,o=t?.unique_clips??[])})),t.$$.update=()=>{1&t.$$.dirty&&null!=r&&(async()=>{let t=[],e=[];for(let n of r){let r=await n.arrayBuffer(),o=new Uint8Array(r);t.push(n.name),e.push(o)}xe.add_unique_clips(t,e)})()},[r,o,function(t){r=t,n(0,r)}]}class Me extends yt{constructor(t){super(),vt(this,t,Ae,Se,i,{})}}function qe(e){let n,o,i,s,a,c,l,u,d,_,p,f,m,g,h,b,v,k,E,C,D,L,B,I,N,z,P,R,H,W,V;return{c(){n=x("input"),o=S(),i=j("svg"),s=j("circle"),l=j("defs"),u=j("linearGradient"),d=j("stop"),_=j("stop"),p=j("linearGradient"),f=j("stop"),m=j("stop"),g=j("g"),h=j("g"),b=j("line"),L=j("path"),N=j("path"),O(n,"type","number"),n.hidden=!0,O(n,"enabled",e[4]),O(n,"min",e[2]),O(n,"max",e[3]),O(s,"opacity","1"),O(s,"cx","50%"),O(s,"cy","50%"),O(s,"r",a=e[1]/2),O(s,"fill",c="url(#"+(e[4]?"gradient_enabled":"gradient_disabled")+")"),O(d,"stop-color","currentColor"),O(d,"class","knob-gradient-enabled-start svelte-196qqdq"),O(_,"offset","1"),O(_,"stop-color","currentColor"),O(_,"class","knob-gradient-enabled-end svelte-196qqdq"),O(u,"id","gradient_enabled"),O(u,"x1","50%"),O(u,"y1","0"),O(u,"x2","50%"),O(u,"y2","100%"),O(u,"gradientUnits","userSpaceOnUse"),O(f,"stop-color","currentColor"),O(f,"class","knob-gradient-disabled-start svelte-196qqdq"),O(m,"offset","1"),O(m,"stop-color","currentColor"),O(m,"class","knob-gradient-disabled-end svelte-196qqdq"),O(p,"id","gradient_disabled"),O(p,"x1","50%"),O(p,"y1","0"),O(p,"x2","50%"),O(p,"y2","100%"),O(p,"gradientUnits","userSpaceOnUse"),O(b,"stroke-width",v=e[6]/2),O(b,"stroke-linecap","square"),O(b,"stroke","#555555"),O(b,"opacity",k=e[10]?.5:1),O(b,"x1","0"),O(b,"y1",E=2*e[6]-e[1]/2),O(b,"x2","0"),O(b,"y2",C=3*e[6]-e[1]/2),O(h,"transform",D=`translate(${e[1]/2} ${e[1]/2}) rotate(${270*e[9]-135})`),O(L,"opacity","0.25"),O(L,"transform",B=`translate(${e[1]/2} ${e[1]/2}) rotate(-135)`),O(L,"d",I=`\n                M 0,${e[6]/2-e[1]/2}\n                A ${e[1]/2-e[6]/2} ${e[1]/2-e[6]/2} 0 1 1 ${e[6]/2-e[1]/2},0\n            `),O(N,"stroke",z=e[4]?e[5]:"#C4C4C4"),O(N,"stroke-width",e[6]),O(N,"transform",P=`translate(${e[1]/2} ${e[1]/2}) rotate(-135)`),O(N,"opacity",R=Math.abs(e[7]-e[8])<.001?0:1),O(N,"d",H=`\n                M ${Math.cos(e[7])*(e[6]/2-e[1]/2)}\n                ${Math.sin(e[7])*(e[6]/2-e[1]/2)}\n                A ${e[1]/2-e[6]/2} ${e[1]/2-e[6]/2} 0\n                ${e[12]?1:0} ${e[11]?1:0}\n                ${Math.cos(e[8])*(e[6]/2-e[1]/2)}\n                ${Math.sin(e[8])*(e[6]/2-e[1]/2)}\n            `),O(g,"stroke","currentColor"),O(g,"class","knob-line svelte-196qqdq"),O(g,"stroke-width",e[6]),O(g,"stroke-linecap","round"),O(g,"fill","none"),O(i,"width",e[1]),O(i,"height",e[1])},m(t,r){w(t,n,r),F(n,e[0]),w(t,o,r),w(t,i,r),y(i,s),y(i,l),y(l,u),y(u,d),y(u,_),y(l,p),y(p,f),y(p,m),y(i,g),y(g,h),y(h,b),y(g,L),y(g,N),W||(V=[A(n,"input",e[16]),A(i,"pointerdown",q(M(e[13]))),A(i,"wheel",q(M(e[14])))],W=!0)},p(t,[e]){16&e&&O(n,"enabled",t[4]),4&e&&O(n,"min",t[2]),8&e&&O(n,"max",t[3]),1&e&&T(n.value)!==t[0]&&F(n,t[0]),2&e&&a!==(a=t[1]/2)&&O(s,"r",a),16&e&&c!==(c="url(#"+(t[4]?"gradient_enabled":"gradient_disabled")+")")&&O(s,"fill",c),64&e&&v!==(v=t[6]/2)&&O(b,"stroke-width",v),1024&e&&k!==(k=t[10]?.5:1)&&O(b,"opacity",k),66&e&&E!==(E=2*t[6]-t[1]/2)&&O(b,"y1",E),66&e&&C!==(C=3*t[6]-t[1]/2)&&O(b,"y2",C),514&e&&D!==(D=`translate(${t[1]/2} ${t[1]/2}) rotate(${270*t[9]-135})`)&&O(h,"transform",D),2&e&&B!==(B=`translate(${t[1]/2} ${t[1]/2}) rotate(-135)`)&&O(L,"transform",B),66&e&&I!==(I=`\n                M 0,${t[6]/2-t[1]/2}\n                A ${t[1]/2-t[6]/2} ${t[1]/2-t[6]/2} 0 1 1 ${t[6]/2-t[1]/2},0\n            `)&&O(L,"d",I),48&e&&z!==(z=t[4]?t[5]:"#C4C4C4")&&O(N,"stroke",z),64&e&&O(N,"stroke-width",t[6]),2&e&&P!==(P=`translate(${t[1]/2} ${t[1]/2}) rotate(-135)`)&&O(N,"transform",P),384&e&&R!==(R=Math.abs(t[7]-t[8])<.001?0:1)&&O(N,"opacity",R),6594&e&&H!==(H=`\n                M ${Math.cos(t[7])*(t[6]/2-t[1]/2)}\n                ${Math.sin(t[7])*(t[6]/2-t[1]/2)}\n                A ${t[1]/2-t[6]/2} ${t[1]/2-t[6]/2} 0\n                ${t[12]?1:0} ${t[11]?1:0}\n                ${Math.cos(t[8])*(t[6]/2-t[1]/2)}\n                ${Math.sin(t[8])*(t[6]/2-t[1]/2)}\n            `)&&O(N,"d",H),64&e&&O(g,"stroke-width",t[6]),2&e&&O(i,"width",t[1]),2&e&&O(i,"height",t[1])},i:t,o:t,d(t){t&&$(n),t&&$(o),t&&$(i),W=!1,r(V)}}}function Oe(t,e,n){let r,o,i,s,a,c,{size:l=30}=e,{progress_type:u="absolute"}=e,{min:d={absolute:0,relative:-1}[u]}=e,{max:_=1}=e,{value:p=0}=e,{enabled:f=!0}=e,{progress_color:m="#FF0149"}=e,{track_width:g=3}=e;const h=V();return t.$$set=t=>{"size"in t&&n(1,l=t.size),"progress_type"in t&&n(15,u=t.progress_type),"min"in t&&n(2,d=t.min),"max"in t&&n(3,_=t.max),"value"in t&&n(0,p=t.value),"enabled"in t&&n(4,f=t.enabled),"progress_color"in t&&n(5,m=t.progress_color),"track_width"in t&&n(6,g=t.track_width)},t.$$.update=()=>{13&t.$$.dirty&&n(0,p=Math.min(_,Math.max(d,p))),13&t.$$.dirty&&n(9,r=(p-d)/(_-d)),32768&t.$$.dirty&&n(7,o=("absolute"===u?90:225)*(Math.PI/180)),512&t.$$.dirty&&n(8,i=(90+270*r)*(Math.PI/180)),384&t.$$.dirty&&n(12,s=i-o>Math.PI),384&t.$$.dirty&&n(11,a=i>o),1&t.$$.dirty&&n(10,c=0===p)},[p,l,d,_,f,m,g,o,i,r,c,a,s,function(t){t.preventDefault(),t.stopPropagation(),0===t.button&&f&&(this.requestPointerLock=this.requestPointerLock||this.mozRequestPointerLock||this.webkitPointerLockElement,this.requestPointerLock(),this.onpointermove=t=>{t.preventDefault(),t.stopPropagation(),Math.abs(t.movementX)>Math.abs(t.movementY)?n(0,p+=t.movementX/100*(_-d)*.5):n(0,p-=t.movementY/100*(_-d)*.5),p<d&&n(0,p=d),p>_&&n(0,p=_)},this.onpointerup=t=>{t.preventDefault(),t.stopPropagation(),this.onpointermove=null,this.onpointerup=null,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock(),h("change",{value:p})})},function(t){t.preventDefault(),t.stopPropagation(),f&&(n(0,p-=(Math.abs(t.deltaX)>Math.abs(t.deltaY)?t.deltaX:t.deltaY)/400*(_-d)*.5),p<d&&n(0,p=d),p>_&&n(0,p=_),h("change",{value:p}))},u,function(){p=T(this.value),n(0,p),n(3,_),n(2,d)}]}class Te extends yt{constructor(t){super(),vt(this,t,Oe,qe,i,{size:1,progress_type:15,min:2,max:3,value:0,enabled:4,progress_color:5,track_width:6})}}function De(t){return"[object Date]"===Object.prototype.toString.call(t)}function Fe(t,e,n,r){if("number"==typeof n||De(n)){const o=r-n,i=(n-e)/(t.dt||1/60),s=(i+(t.opts.stiffness*o-t.opts.damping*i)*t.inv_mass)*t.dt;return Math.abs(s)<t.opts.precision&&Math.abs(o)<t.opts.precision?r:(t.settled=!1,De(n)?new Date(n.getTime()+s):n+s)}if(Array.isArray(n))return n.map(((o,i)=>Fe(t,e[i],n[i],r[i])));if("object"==typeof n){const o={};for(const i in n)o[i]=Fe(t,e[i],n[i],r[i]);return o}throw new Error(`Cannot spring ${typeof n} values`)}function Le(t,e={}){const n=qt(t),{stiffness:r=.15,damping:o=.8,precision:i=.01}=e;let s,a,c,l=t,u=t,d=1,_=0,p=!1;function f(e,r={}){u=e;const o=c={};if(null==t||r.hard||m.stiffness>=1&&m.damping>=1)return p=!0,s=g(),l=e,n.set(t=u),Promise.resolve();if(r.soft){const t=!0===r.soft?.5:+r.soft;_=1/(60*t),d=0}return a||(s=g(),p=!1,a=function(t){let e;return 0===b.size&&h(v),{promise:new Promise((n=>{b.add(e={c:t,f:n})})),abort(){b.delete(e)}}}((e=>{if(p)return p=!1,a=null,!1;d=Math.min(d+_,1);const r={inv_mass:d,opts:m,settled:!0,dt:60*(e-s)/1e3},o=Fe(r,l,t,u);return s=e,l=t,n.set(t=o),r.settled&&(a=null),!r.settled}))),new Promise((t=>{a.promise.then((()=>{o===c&&t()}))}))}const m={set:f,update:(e,n)=>f(e(u,t),n),subscribe:n.subscribe,stiffness:r,damping:o,precision:i};return m}function Be(t,e){const n=e.params;let r;e.elem_store.subscribe((t=>r=t));const o=Le({x:n.posX,y:n.posY},{stiffness:1,damping:1});function i(t){const e=t.clientX-n.mousePosX,r=t.clientY-n.mousePosY;n.mousePosX=t.clientX,n.mousePosY=t.clientY,o.update((t=>{let o=t.x+e,i=t.y+r;return o<0&&(n.mousePosX-=o,o=0),i<0&&(n.mousePosY-=i,i=0),{x:o,y:i}}))}function s(){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s),o.update((t=>(n.updatePos(t.x,t.y,n.mousePosX,n.mousePosY),t)))}return o.subscribe((t=>{null!=r&&(r.style.transform=`translate3d(${t.x}px, ${t.y}px, 0)`)})),t.addEventListener("mousedown",(function(t){n.mousePosX=t.clientX,n.mousePosY=t.clientY,window.addEventListener("mousemove",i),window.addEventListener("mouseup",s)})),{destroy(){t.removeEventListener("mousedown",(()=>console.log("clicks")))}}}function Ie(e){let n,r,o,i,s,a,c,l,u,d;return{c(){n=j("path"),o=S(),i=j("circle"),c=S(),l=j("circle"),O(n,"class","link svelte-1vdfi8j"),O(n,"fill","none"),O(n,"stroke","currentColor"),O(n,"stroke-width",e[1]),O(n,"d",r=`\n    M ${e[0].x},${e[0].y}\n    c ${e[3].x*e[4]},0\n      ${e[3].x*e[2]},${e[3].y}\n      ${e[3].x},${e[3].y}\n  `),O(i,"cx",s=e[0].x),O(i,"cy",a=e[0].y),O(i,"r","4"),O(i,"fill","currentColor"),O(l,"cx",u=e[0].x+e[3].x),O(l,"cy",d=e[0].y+e[3].y),O(l,"r","4"),O(l,"fill","currentColor")},m(t,e){w(t,n,e),w(t,o,e),w(t,i,e),w(t,c,e),w(t,l,e)},p(t,[e]){2&e&&O(n,"stroke-width",t[1]),29&e&&r!==(r=`\n    M ${t[0].x},${t[0].y}\n    c ${t[3].x*t[4]},0\n      ${t[3].x*t[2]},${t[3].y}\n      ${t[3].x},${t[3].y}\n  `)&&O(n,"d",r),1&e&&s!==(s=t[0].x)&&O(i,"cx",s),1&e&&a!==(a=t[0].y)&&O(i,"cy",a),9&e&&u!==(u=t[0].x+t[3].x)&&O(l,"cx",u),9&e&&d!==(d=t[0].y+t[3].y)&&O(l,"cy",d)},i:t,o:t,d(t){t&&$(n),t&&$(o),t&&$(i),t&&$(c),t&&$(l)}}}function Ne(t,e,n){let r,o,i,{source:s}=e,{target:a}=e,{linkWidth:c="2"}=e,{stiffness:l=(({x:t})=>1+1/(-1-Math.abs(t)/300))}=e;return t.$$set=t=>{"source"in t&&n(0,s=t.source),"target"in t&&n(5,a=t.target),"linkWidth"in t&&n(1,c=t.linkWidth),"stiffness"in t&&n(6,l=t.stiffness)},t.$$.update=()=>{33&t.$$.dirty&&n(3,r={x:a.x-s.x,y:a.y-s.y}),72&t.$$.dirty&&n(2,o=Math.max(0,Math.min(1,"number"==typeof l?l:l({...r})))),4&t.$$.dirty&&n(4,i=1-o)},[s,c,o,r,i,a,l]}class ze extends yt{constructor(t){super(),vt(this,t,Ne,Ie,i,{source:0,target:5,linkWidth:1,stiffness:6})}}var Pe=qt();function Re(t){let e,n,r;return n=new ze({props:{source:{x:0,y:0},target:t[2]}}),{c(){e=j("svg"),mt(n.$$.fragment),O(e,"class","link svelte-1r7hc85")},m(t,o){w(t,e,o),gt(n,e,null),r=!0},p(t,e){const r={};4&e&&(r.target=t[2]),n.$set(r)},i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ut(n.$$.fragment,t),r=!1},d(t){t&&$(e),ht(n)}}}function He(t){let e,n,o,i,s,a,c=t[2]&&Re(t);return{c(){e=x("div"),n=x("button"),o=S(),c&&c.c(),O(n,"class","svelte-1r7hc85"),O(e,"class","svelte-1r7hc85")},m(r,l){w(r,e,l),y(e,n),y(e,o),c&&c.m(e,null),t[10](e),i=!0,s||(a=[A(e,"pointerup",t[8]),A(e,"pointerdown",t[9]),A(e,"click",q(t[7]))],s=!0)},p(t,[n]){t[2]?c?(c.p(t,n),4&n&&lt(c,1)):(c=Re(t),c.c(),lt(c,1),c.m(e,null)):c&&(at(),ut(c,1,1,(()=>{c=null})),ct())},i(t){i||(lt(c),i=!0)},o(t){ut(c),i=!1},d(n){n&&$(e),c&&c.d(),t[10](null),s=!1,r(a)}}}function We(t,e,n){let{link_data:r=null}=e,{size:o=8}=e,{color:i="var(--color-foreground-2)"}=e;const s=V();let a=null,c=null;var l;l=()=>{},H().$$.on_destroy.push(l);return t.$$set=t=>{"link_data"in t&&n(0,r=t.link_data),"size"in t&&n(4,o=t.size),"color"in t&&n(5,i=t.color)},t.$$.update=()=>{65&t.$$.dirty&&(r||n(2,c=null)),67&t.$$.dirty&&r&&a&&Pe.subscribe((t=>{if(r&&a)try{let e=t.get(r.outputNumeralNodeId?r.outputNumeralNodeId:"Track"+r.outputNumeralTrackId).get(r.outputPortIndex),o=a.getBoundingClientRect();n(2,c={x:e.x-o.x-6,y:e.y-o.y-6})}catch(t){}}))},[r,a,c,s,o,i,null,function(e){Y.call(this,t,e)},t=>0===t.button&&s("connect",a),t=>0===t.button&&r&&s("wiretake"),function(t){X[t?"unshift":"push"]((()=>{a=t,n(1,a)}))}]}class Ve extends yt{constructor(t){super(),vt(this,t,We,He,i,{link_data:0,size:4,color:5})}}function Ye(e){let n,o,i;return{c(){n=x("button"),O(n,"class","svelte-1kjc0jb"),z(n,"is_link",e[0])},m(t,r){w(t,n,r),e[8](n),o||(i=[A(n,"pointerdown",e[2]),A(n,"click",q(e[7]))],o=!0)},p(t,[e]){1&e&&z(n,"is_link",t[0])},i:t,o:t,d(t){t&&$(n),e[8](null),o=!1,r(i)}}}function Ue(t,e,n){let{is_link:r=!1}=e,{track:o}=e;const i=V();let s,a,{owner_node:c}=e,{output_index:l}=e;return t.$$set=t=>{"is_link"in t&&n(0,r=t.is_link),"track"in t&&n(3,o=t.track),"owner_node"in t&&n(4,c=t.owner_node),"output_index"in t&&n(5,l=t.output_index)},t.$$.update=()=>{67&t.$$.dirty&&s&&(n(6,a=s.getBoundingClientRect()),n(6,a.x+=a.width/2,a),n(6,a.y+=a.height/2,a)),121&t.$$.dirty&&r&&Pe.update((t=>{t||(t=new Map),t.get(o?"Track"+o.numeral_track_id:c.numeral_node_id)||t.set(o?"Track"+o.numeral_track_id:c.numeral_node_id,new Map);let e=t.get(o?"Track"+o.numeral_track_id:c.numeral_node_id);return e.set(l,a),t.set(o?"Track"+o.numeral_track_id:c.numeral_node_id,e),t}))},[r,s,function(t){0===t.button&&i("wireout",o?{track:o,target:t.currentTarget}:t.currentTarget)},o,c,l,a,function(e){Y.call(this,t,e)},function(t){X[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class Xe extends yt{constructor(t){super(),vt(this,t,Ue,Ye,i,{is_link:0,track:3,owner_node:4,output_index:5})}}function Ke(t,e,n){const r=t.slice();return r[38]=e[n],r[40]=n,r}function Ge(t,e,n){const r=t.slice();return r[41]=e[n],r}function Je(t,e,n){const r=t.slice();return r[44]=e[n],r[40]=n,r}function Ze(t,e){let n,r,o;return r=new Ve({props:{link_data:e[21](e[44],e[40],e[8])}}),r.$on("wiretake",(function(){return e[26](e[44])})),r.$on("connect",(function(...t){return e[27](e[44],...t)})),{key:t,first:null,c(){n=C(),mt(r.$$.fragment),this.first=n},m(t,e){w(t,n,e),gt(r,t,e),o=!0},p(t,n){e=t;const o={};288&n[0]&&(o.link_data=e[21](e[44],e[40],e[8])),r.$set(o)},i(t){o||(lt(r.$$.fragment,t),o=!0)},o(t){ut(r.$$.fragment,t),o=!1},d(t){t&&$(n),ht(r,t)}}}function Qe(t){let e,n,r,o=t[41].node.type==t[9].Knob&&tn(t);return{c(){e=x("div"),o&&o.c(),n=S(),L(e,"grid-column",t[41].col),L(e,"grid-row",t[41].row),O(e,"class","node-content svelte-1p4202p")},m(t,i){w(t,e,i),o&&o.m(e,null),y(e,n),r=!0},p(t,i){t[41].node.type==t[9].Knob?o?(o.p(t,i),16896&i[0]&&lt(o,1)):(o=tn(t),o.c(),lt(o,1),o.m(e,n)):o&&(at(),ut(o,1,1,(()=>{o=null})),ct()),(!r||16384&i[0])&&L(e,"grid-column",t[41].col),(!r||16384&i[0])&&L(e,"grid-row",t[41].row)},i(t){r||(lt(o),r=!0)},o(t){ut(o),r=!1},d(t){t&&$(e),o&&o.d()}}}function tn(t){let e,n,r,o,i,s,a=t[41].node.object.label+"";return n=new Te({props:{min:t[41].node.object.min,max:t[41].node.object.max,value:t[41].node.object.value,progress_type:t[41].node.object.kind}}),n.$on("change",(function(...e){return t[28](t[41],...e)})),{c(){e=x("div"),mt(n.$$.fragment),r=S(),o=x("h4"),i=E(a),O(e,"class","node-content-knob svelte-1p4202p"),O(o,"class","svelte-1p4202p")},m(t,a){w(t,e,a),gt(n,e,null),w(t,r,a),w(t,o,a),y(o,i),s=!0},p(e,r){t=e;const o={};16384&r[0]&&(o.min=t[41].node.object.min),16384&r[0]&&(o.max=t[41].node.object.max),16384&r[0]&&(o.value=t[41].node.object.value),16384&r[0]&&(o.progress_type=t[41].node.object.kind),n.$set(o),(!s||16384&r[0])&&a!==(a=t[41].node.object.label+"")&&D(i,a)},i(t){s||(lt(n.$$.fragment,t),s=!0)},o(t){ut(n.$$.fragment,t),s=!1},d(t){t&&$(e),ht(n),t&&$(r),t&&$(o)}}}function en(t){let e,n,r=null!=t[41]&&Qe(t);return{c(){r&&r.c(),e=C()},m(t,o){r&&r.m(t,o),w(t,e,o),n=!0},p(t,n){null!=t[41]?r?(r.p(t,n),16384&n[0]&&lt(r,1)):(r=Qe(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(at(),ut(r,1,1,(()=>{r=null})),ct())},i(t){n||(lt(r),n=!0)},o(t){ut(r),n=!1},d(t){r&&r.d(t),t&&$(e)}}}function nn(t){let e,n;return e=new Xe({props:{owner_node:t[4],output_index:t[40],is_link:t[22](t[40],t[8])}}),e.$on("wireout",(function(...e){return t[29](t[38],...e)})),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},p(n,r){t=n;const o={};16&r[0]&&(o.owner_node=t[4]),256&r[0]&&(o.is_link=t[22](t[40],t[8])),e.$set(o)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function rn(t){let e,n,i,s,a,c,l,u,d,_,p,m,g,h,b,v,j=[],C=new Map,M=t[5];const q=t=>t[44];for(let e=0;e<M.length;e+=1){let n=Je(t,M,e),r=q(n);C.set(r,j[e]=Ze(r,n))}let T=t[14],F=[];for(let e=0;e<T.length;e+=1)F[e]=en(Ge(t,T,e));const B=t=>ut(F[t],1,1,(()=>{F[t]=null}));let I=t[6],N=[];for(let e=0;e<I.length;e+=1)N[e]=nn(Ke(t,I,e));const z=t=>ut(N[t],1,1,(()=>{N[t]=null}));return{c(){e=x("div"),n=x("div");for(let t=0;t<j.length;t+=1)j[t].c();i=S(),s=x("div"),a=x("div"),c=x("h2"),l=E(t[7]),u=S(),d=x("div");for(let t=0;t<F.length;t+=1)F[t].c();m=S(),g=x("div");for(let t=0;t<N.length;t+=1)N[t].c();O(n,"class","input svelte-1p4202p"),O(c,"class","svelte-1p4202p"),O(d,"class","grid svelte-1p4202p"),O(a,"class","content svelte-1p4202p"),O(s,"class","container svelte-1p4202p"),O(s,"style",_=`--grid-width: ${t[12]}; --grid-height: ${t[13]}; --border-width: ${t[2]?"1px":"0px"};`),O(g,"class","output svelte-1p4202p"),O(e,"class","node svelte-1p4202p"),L(e,"--pos-x",t[0]+"px"),L(e,"--pos-y",t[1]+"px")},m(r,o){w(r,e,o),y(e,n);for(let t=0;t<j.length;t+=1)j[t].m(n,null);y(e,i),y(e,s),y(s,a),y(a,c),y(c,l),y(a,u),y(a,d);for(let t=0;t<F.length;t+=1)F[t].m(d,null);y(e,m),y(e,g);for(let t=0;t<N.length;t+=1)N[t].m(g,null);t[30](e),h=!0,b||(v=[A(s,"mousedown",t[19]),A(s,"mousemove",t[18]),A(s,"mouseup",t[20]),f(p=Be.call(null,s,{params:t[11],elem_store:t[16]}))],b=!0)},p(t,r){if(2131256&r[0]&&(M=t[5],at(),j=pt(j,r,q,1,t,M,C,n,_t,Ze,null,Je),ct()),(!h||128&r[0])&&D(l,t[7]),147968&r[0]){let e;for(T=t[14],e=0;e<T.length;e+=1){const n=Ge(t,T,e);F[e]?(F[e].p(n,r),lt(F[e],1)):(F[e]=en(n),F[e].c(),lt(F[e],1),F[e].m(d,null))}for(at(),e=T.length;e<F.length;e+=1)B(e);ct()}if((!h||12292&r[0]&&_!==(_=`--grid-width: ${t[12]}; --grid-height: ${t[13]}; --border-width: ${t[2]?"1px":"0px"};`))&&O(s,"style",_),p&&o(p.update)&&2048&r[0]&&p.update.call(null,{params:t[11],elem_store:t[16]}),4228432&r[0]){let e;for(I=t[6],e=0;e<I.length;e+=1){const n=Ke(t,I,e);N[e]?(N[e].p(n,r),lt(N[e],1)):(N[e]=nn(n),N[e].c(),lt(N[e],1),N[e].m(g,null))}for(at(),e=I.length;e<N.length;e+=1)z(e);ct()}(!h||1&r[0])&&L(e,"--pos-x",t[0]+"px"),(!h||2&r[0])&&L(e,"--pos-y",t[1]+"px")},i(t){if(!h){for(let t=0;t<M.length;t+=1)lt(j[t]);for(let t=0;t<T.length;t+=1)lt(F[t]);for(let t=0;t<I.length;t+=1)lt(N[t]);h=!0}},o(t){for(let t=0;t<j.length;t+=1)ut(j[t]);F=F.filter(Boolean);for(let t=0;t<F.length;t+=1)ut(F[t]);N=N.filter(Boolean);for(let t=0;t<N.length;t+=1)ut(N[t]);h=!1},d(n){n&&$(e);for(let t=0;t<j.length;t+=1)j[t].d();k(F,n),k(N,n),t[30](null),b=!1,r(v)}}}function on(t,e,n){var r;!function(t){t[t.Knob=0]="Knob",t[t.Breaker=1]="Breaker"}(r||(r={}));class o{constructor(t,e,n,r){this.node=t,this.index=e,this.row=n,this.col=r}}let{node_id:i}=e,{node_id_index:s=-1}=e,{node_data:a=null}=e,{parameters:c=[]}=e,{inputs:l=[]}=e,{outputs:u=[]}=e,{name:d="Undefined"}=e,{parentid:_="graph-container"}=e,{posX:p=0}=e,{posY:f=0}=e,{graph_nodes:m=[]}=e,g=!1,{selected:h=!1}=e;const b=V();let v,y=null,w={posX:p,posY:f,mousePosX:0,mousePosY:0,parentTop:0,parentLeft:0,parentWidth:0,parentHeight:0,updatePos:function(t,e){p==t&&f==e||(n(0,p=t),n(1,f=e),b("move",{node_id:a.node_id,posX:p,posY:f}))}},$=qt(v);W((()=>{y=document.getElementById(_),n(11,w.parentTop=y.offsetTop,w),n(11,w.parentLeft=y.offsetLeft,w),n(11,w.parentWidth=y.offsetWidth,w),n(11,w.parentHeight=y.offsetHeight,w)}));let k=0,x=0,j=[];function E(t,e){xe.set_node_param_value(i,t,e)}return t.$$set=t=>{"node_id"in t&&n(23,i=t.node_id),"node_id_index"in t&&n(3,s=t.node_id_index),"node_data"in t&&n(4,a=t.node_data),"parameters"in t&&n(24,c=t.parameters),"inputs"in t&&n(5,l=t.inputs),"outputs"in t&&n(6,u=t.outputs),"name"in t&&n(7,d=t.name),"parentid"in t&&n(25,_=t.parentid),"posX"in t&&n(0,p=t.posX),"posY"in t&&n(1,f=t.posY),"graph_nodes"in t&&n(8,m=t.graph_nodes),"selected"in t&&n(2,h=t.selected)},t.$$.update=()=>{if(1024&t.$$.dirty[0]&&$.set(v),16777728&t.$$.dirty[0]){let t=0,e=0;c.forEach(((n,o,i)=>{console.log({v:n,i:o,a:i}),n.type==r.Breaker?e=0:e+=1,e>t&&(t=e)})),n(12,k=t)}if(16777728&t.$$.dirty[0]){let t=1;c.forEach(((e,n,o)=>{e.type==r.Breaker&&(t+=1)})),n(13,x=t)}if(16777728&t.$$.dirty[0]){let t=0,e=0;function i(n,i){let s=e,a=t;return console.log(s,a),n.type==r.Breaker?(e+=1,t=1,null):(t+=1,new o(n,i,s,a))}n(14,j=c.map(i))}},[p,f,h,s,a,l,u,d,m,r,v,w,k,x,j,b,$,E,function(t){g=!1},function(t){g=!0},function(t){1==g&&(n(2,h=!h),b("select")),g=!1},function(t,e,n){let r=null;return n.forEach((t=>{t.links.forEach((n=>{if(t.numeral_node_id==a.numeral_node_id&&n.inputPortIndex==e)return r=n,void console.log("Input link: ",n)}))})),console.log("GetInputLink returns ",r),r},function(t,e){let n=!1;return e.forEach((e=>{e.links.forEach((e=>{e.outputNumeralNodeId!=a.numeral_node_id||e.outputPortIndex!=t||(n=!0)}))})),n},i,c,_,t=>b("wiretake",{input:t,node_id_index:s}),(t,e)=>{b("connect",{inputPort:e.detail,inputNode:v,inputData:t,inputNodeId:a.node_id})},(t,e)=>E(t.index,e.detail.value),(t,e)=>{b("wireout",{outputNode:v,outputPort:e.detail,outputData:t,outputNodeId:a.node_id})},function(t){X[t?"unshift":"push"]((()=>{v=t,n(10,v)}))}]}class sn extends yt{constructor(t){super(),vt(this,t,on,rn,i,{node_id:23,node_id_index:3,node_data:4,parameters:24,inputs:5,outputs:6,name:7,parentid:25,posX:0,posY:1,graph_nodes:8,selected:2},null,[-1,-1])}}let an=!1,cn=!1;function ln(t){"Shift"===t.key&&(an=!0),"Control"===t.key&&(cn=!0)}function un(t){"Shift"===t.key&&(an=!1),"Control"===t.key&&(cn=!1)}function dn(t){}function _n(t,e,n){const r=t.slice();return r[28]=e[n],r[30]=n,r}function pn(t,e,n){const r=t.slice();return r[31]=e[n],r[30]=n,r}function fn(t){let e,n;return e=new Xe({props:{track:t[31],owner_node:void 0,is_link:bn(t[30],t[31],t[4],t[2]),output_index:0}}),e.$on("wireout",t[18]),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},p(t,n){const r={};16&n[0]&&(r.track=t[31]),20&n[0]&&(r.is_link=bn(t[30],t[31],t[4],t[2])),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function mn(t,e){let n,r,o;return r=new sn({props:{node_id:e[28].node_id,node_id_index:e[30],node_data:e[28],posX:e[28].x,posY:e[28].y,parameters:e[28].parameters,name:e[28].name,inputs:e[28].inputs,outputs:e[28].outputs,selected:e[7].includes(e[28].node_id),graph_nodes:e[2]}}),r.$on("connect",e[13]),r.$on("wireout",e[11]),r.$on("wiretake",e[12]),r.$on("select",(function(...t){return e[19](e[30],e[28],...t)})),r.$on("move",(function(...t){return e[20](e[28],...t)})),{key:t,first:null,c(){n=C(),mt(r.$$.fragment),this.first=n},m(t,e){w(t,n,e),gt(r,t,e),o=!0},p(t,n){e=t;const o={};4&n[0]&&(o.node_id=e[28].node_id),4&n[0]&&(o.node_id_index=e[30]),4&n[0]&&(o.node_data=e[28]),4&n[0]&&(o.posX=e[28].x),4&n[0]&&(o.posY=e[28].y),4&n[0]&&(o.parameters=e[28].parameters),4&n[0]&&(o.name=e[28].name),4&n[0]&&(o.inputs=e[28].inputs),4&n[0]&&(o.outputs=e[28].outputs),132&n[0]&&(o.selected=e[7].includes(e[28].node_id)),4&n[0]&&(o.graph_nodes=e[2]),r.$set(o)},i(t){o||(lt(r.$$.fragment,t),o=!0)},o(t){ut(r.$$.fragment,t),o=!1},d(t){t&&$(n),ht(r,t)}}}function gn(t){let e,n,r;return n=new ze({props:{source:t[6],target:t[9]}}),{c(){e=j("svg"),mt(n.$$.fragment),O(e,"class","dragged-wire svelte-wk6uwd"),z(e,"visible",!!t[1])},m(t,o){w(t,e,o),gt(n,e,null),r=!0},p(t,r){const o={};64&r[0]&&(o.source=t[6]),512&r[0]&&(o.target=t[9]),n.$set(o),2&r[0]&&z(e,"visible",!!t[1])},i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ut(n.$$.fragment,t),r=!1},d(t){t&&$(e),ht(n)}}}function hn(t){let e,n,o,i,s,a,c,l=[],u=new Map,d=t[4],_=[];for(let e=0;e<d.length;e+=1)_[e]=fn(pn(t,d,e));const p=t=>ut(_[t],1,1,(()=>{_[t]=null}));let m=t[2];const g=t=>t[28].node_id;for(let e=0;e<m.length;e+=1){let n=_n(t,m,e),r=g(n);u.set(r,l[e]=mn(r,n))}let h=t[5]&&gn(t);return{c(){e=x("div"),n=x("div");for(let t=0;t<_.length;t+=1)_[t].c();o=S();for(let t=0;t<l.length;t+=1)l[t].c();i=S(),h&&h.c(),O(n,"class","track-stack svelte-wk6uwd"),O(e,"class","graph-container svelte-wk6uwd"),O(e,"id","graph-container"),O(e,"tabindex","0")},m(r,u){w(r,e,u),y(e,n);for(let t=0;t<_.length;t+=1)_[t].m(n,null);y(e,o);for(let t=0;t<l.length;t+=1)l[t].m(e,null);y(e,i),h&&h.m(e,null),t[23](e),s=!0,a||(c=[A(window,"keydown",t[17]),A(e,"pointermove",t[21]),A(e,"pointerup",t[22]),f(wt.call(null,e,t[14]))],a=!0)},p(t,r){if(262164&r[0]){let e;for(d=t[4],e=0;e<d.length;e+=1){const o=pn(t,d,e);_[e]?(_[e].p(o,r),lt(_[e],1)):(_[e]=fn(o),_[e].c(),lt(_[e],1),_[e].m(n,null))}for(at(),e=d.length;e<_.length;e+=1)p(e);ct()}112772&r[0]&&(m=t[2],at(),l=pt(l,r,g,1,t,m,u,e,_t,mn,i,_n),ct()),t[5]?h?(h.p(t,r),32&r[0]&&lt(h,1)):(h=gn(t),h.c(),lt(h,1),h.m(e,null)):h&&(at(),ut(h,1,1,(()=>{h=null})),ct())},i(t){if(!s){for(let t=0;t<d.length;t+=1)lt(_[t]);for(let t=0;t<m.length;t+=1)lt(l[t]);lt(h),s=!0}},o(t){_=_.filter(Boolean);for(let t=0;t<_.length;t+=1)ut(_[t]);for(let t=0;t<l.length;t+=1)ut(l[t]);ut(h),s=!1},d(n){n&&$(e),k(_,n);for(let t=0;t<l.length;t+=1)l[t].d();h&&h.d(),t[23](null),a=!1,r(c)}}}function bn(t,e,n,r){let o=!1;return r.forEach((t=>{t.links.forEach((t=>{null==t.outputNumeralTrackId||t.outputNumeralTrackId!=e.numeral_track_id||(o=!0)}))})),o}function vn(e,n,r){let o,i,s,a=t;e.$$.on_destroy.push((()=>a()));let l=[];xe.subscribe((t=>{r(4,l=t.tracks??[]),console.log(t)}));let u,d,_={x:0,y:0},p=!1,f={x:0,y:0},m=[];function g(t){return d=s.getBoundingClientRect(),{x:t.x-d.left,y:t.y-d.top}}xe.subscribe((t=>{r(2,m=t.nodes)}));let h={key:"nodeObject",callback:function(t,e,n){e-=s.offsetLeft,n-=s.offsetTop,xe.create_node(t,e,n)}},b=[],v=[];function y(t,e){const n=v.includes(t);an?n?(r(7,b=b.filter((t=>t!==e))),v=v.filter((e=>e!==t))):(r(7,b=[...b,e]),v=[...v,t]):n?(r(7,b=[]),v=[]):(r(7,b=[e]),v=[t])}function w(t,e,n){xe.set_node_position(t,e,n)}return e.$$.update=()=>{1&e.$$.dirty[0]&&(r(8,o=Le({x:_.x,y:_.y},{stiffness:.25,damping:1})),a(),a=c(o,(t=>r(9,i=t)))),2&e.$$.dirty[0]&&r(5,p=null!=u),e.$$.dirty[0],e.$$.dirty[0]},[_,u,m,s,l,p,f,b,o,i,g,function(t){let e=t.detail.outputPort.getBoundingClientRect(),n=g(e);r(1,u=t.detail),r(6,f={x:n.x+e.width/2,y:n.y+e.height/2}),r(5,p=!0)},function(t){},function(t){if(u)if(u.track){const e=t.detail;xe.link_node_track(e.inputNodeId,u.track.id,e.inputData.id),r(2,m),r(1,u=null),r(5,p=!1)}else{const e=t.detail;let n=xe.link_nodes(e.inputNodeId,u.outputNodeId,e.inputData.id,u.outputData.id);console.log(n?"Successfully linked nodes.":"Couldn't link nodes."),r(2,m),r(1,u=null),r(5,p=!1)}},h,y,w,function(t){if("Delete"===t.key){for(const t of b)xe.delete_node(t);r(7,b=[]),v=[]}},function(t){let e=t.detail.target.getBoundingClientRect(),n=g(e);r(1,u=t.detail),r(6,f={x:n.x+e.width/2,y:n.y+e.height/2}),r(5,p=!0)},(t,e,n)=>y(t,e.node_id),(t,e)=>w(t.node_id,e.detail.posX,e.detail.posY),t=>{let e=g({x:t.x,y:t.y});r(0,_={x:e.x,y:e.y})},()=>r(1,u=null),function(t){X[t?"unshift":"push"]((()=>{s=t,r(3,s)}))}]}class yn extends yt{constructor(t){super(),vt(this,t,vn,hn,i,{},null,[-1,-1])}}function wn(e){let n,r,o,i,s;return{c(){n=x("div"),r=x("span"),o=E(e[0]),O(r,"class","svelte-7s9u7"),O(n,"class","node svelte-7s9u7")},m(t,a){w(t,n,a),y(n,r),y(r,o),i||(s=f($t.call(null,n,e[1])),i=!0)},p(t,[e]){1&e&&D(o,t[0])},i:t,o:t,d(t){t&&$(n),i=!1,s()}}}function $n(t,e,n){let{name:r="Undefined"}=e,{id:o=-1}=e,i={key:"nodeObject",object:o};return t.$$set=t=>{"name"in t&&n(0,r=t.name),"id"in t&&n(2,o=t.id)},[r,i,o]}class kn extends yt{constructor(t){super(),vt(this,t,$n,wn,i,{name:0,id:2})}}function xn(t,e,n){const r=t.slice();return r[1]=e[n],r}function jn(t,e){let n,r,o;return r=new kn({props:{name:e[1].name,id:e[1].id}}),{key:t,first:null,c(){n=C(),mt(r.$$.fragment),this.first=n},m(t,e){w(t,n,e),gt(r,t,e),o=!0},p(t,n){e=t;const o={};1&n&&(o.name=e[1].name),1&n&&(o.id=e[1].id),r.$set(o)},i(t){o||(lt(r.$$.fragment,t),o=!0)},o(t){ut(r.$$.fragment,t),o=!1},d(t){t&&$(n),ht(r,t)}}}function En(t){let e,n,r,o,i,s=[],a=new Map,c=t[0];const l=t=>t[1].id;for(let e=0;e<c.length;e+=1){let n=xn(t,c,e),r=l(n);a.set(r,s[e]=jn(r,n))}return{c(){e=x("aside"),n=x("div"),n.innerHTML='<p class="svelte-1gkzcdh">Modules</p>',r=S(),o=x("div");for(let t=0;t<s.length;t+=1)s[t].c();O(n,"class","node-title svelte-1gkzcdh"),O(o,"class","node-stack svelte-1gkzcdh"),O(e,"class","node-container svelte-1gkzcdh")},m(t,a){w(t,e,a),y(e,n),y(e,r),y(e,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null);i=!0},p(t,[e]){1&e&&(c=t[0],at(),s=pt(s,e,l,1,t,c,a,o,_t,jn,null,xn),ct())},i(t){if(!i){for(let t=0;t<c.length;t+=1)lt(s[t]);i=!0}},o(t){for(let t=0;t<s.length;t+=1)ut(s[t]);i=!1},d(t){t&&$(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function Sn(t,e,n){let r=[];return xe.subscribe((({module_names:t})=>{n(0,r=t)})),[r]}class Cn extends yt{constructor(t){super(),vt(this,t,Sn,En,i,{})}}function An(t){var e={exports:{}};return t(e,e.exports),e.exports}var Mn=An((function(t){(t.exports={}).forEach=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}}})),qn=An((function(t){var e=t.exports={};e.isIE=function(t){return(-1!==(e=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==e.indexOf("trident")||-1!==e.indexOf(" edge/"))&&(!t||t===function(){var t=3,e=document.createElement("div"),n=e.getElementsByTagName("i");do{e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e"}while(n[0]);return t>4?t:undefined}());var e},e.isLegacyOpera=function(){return!!window.opera}})),On=An((function(t){(t.exports={}).getOption=function(t,e,n){var r=t[e];if(null==r&&void 0!==n)return n;return r}})),Tn=function(t){var e=(t=t||{}).reporter,n=On.getOption(t,"async",!0),r=On.getOption(t,"auto",!0);r&&!n&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var o,i=Dn(),s=!1;function a(){for(s=!0;i.size();){var t=i;i=Dn(),t.process()}s=!1}function c(){var t;t=a,o=setTimeout(t,0)}return{add:function(t,e){!s&&r&&n&&0===i.size()&&c(),i.add(t,e)},force:function(t){s||(void 0===t&&(t=n),o&&(clearTimeout(o),o=null),t?c():a())}}};function Dn(){var t={},e=0,n=0,r=0;return{add:function(o,i){i||(i=o,o=0),o>n?n=o:o<r&&(r=o),t[o]||(t[o]=[]),t[o].push(i),e++},process:function(){for(var e=r;e<=n;e++)for(var o=t[e],i=0;i<o.length;i++){(0,o[i])()}},size:function(){return e}}}function Fn(t){return t._erd}var Ln={initState:function(t){return t._erd={},Fn(t)},getState:Fn,cleanState:function(t){delete t._erd}},Bn=Mn.forEach,In=function(t){var e=(t=t||{}).reporter,n=t.batchProcessor,r=t.stateHandler.getState;t.stateHandler.hasState;var o=t.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var i=function(){var t=500,e=500,n=document.createElement("div");n.style.cssText=c(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var r=document.createElement("div");r.style.cssText=c(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),r.appendChild(n),document.body.insertBefore(r,document.body.firstChild);var o=t-r.clientWidth,i=e-r.clientHeight;return document.body.removeChild(r),{width:o,height:i}}(),s="erd_scroll_detection_container";function a(t){!function(t,e,n){function r(n,r){r=r||function(e){t.head.appendChild(e)};var o=t.createElement("style");return o.innerHTML=n,o.id=e,r(o),o}if(!t.getElementById(e)){var o=n+"_animation",i=n+"_animation_active",s="/* Created by the element-resize-detector library. */\n";s+="."+n+" > div::-webkit-scrollbar { "+c(["display: none"])+" }\n\n",s+="."+i+" { "+c(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+o,"animation-name: "+o])+" }\n",s+="@-webkit-keyframes "+o+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",r(s+="@keyframes "+o+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}(t,"erd_scroll_detection_scrollbar_style",s)}function c(e){var n=t.important?" !important; ":"; ";return(e.join(n)+n).trim()}function l(t,n,r){if(t.addEventListener)t.addEventListener(n,r);else{if(!t.attachEvent)return e.error("[scroll] Don't know how to add event listeners.");t.attachEvent("on"+n,r)}}function u(t,n,r){if(t.removeEventListener)t.removeEventListener(n,r);else{if(!t.detachEvent)return e.error("[scroll] Don't know how to remove event listeners.");t.detachEvent("on"+n,r)}}function d(t){return r(t).container.childNodes[0].childNodes[0].childNodes[0]}function _(t){return r(t).container.childNodes[0].childNodes[0].childNodes[1]}return a(window.document),{makeDetectable:function(t,a,u){function p(){if(t.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(o.get(a),"Scroll: "),e.log.apply)e.log.apply(null,n);else for(var r=0;r<n.length;r++)e.log(n[r])}}function f(t){var e=r(t).container.childNodes[0],n=window.getComputedStyle(e);return!n.width||-1===n.width.indexOf("px")}function m(){var t=window.getComputedStyle(a),e={};return e.position=t.position,e.width=a.offsetWidth,e.height=a.offsetHeight,e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e.widthCSS=t.width,e.heightCSS=t.height,e}function g(){if(p("storeStyle invoked."),r(a)){var t=m();r(a).style=t}else p("Aborting because element has been uninstalled")}function h(t,e,n){r(t).lastWidth=e,r(t).lastHeight=n}function b(){return 2*i.width+1}function v(){return 2*i.height+1}function y(t){return t+10+b()}function w(t){return t+10+v()}function $(t,e,n){var r=d(t),o=_(t),i=y(e),s=w(n),a=function(t){return 2*t+b()}(e),c=function(t){return 2*t+v()}(n);r.scrollLeft=i,r.scrollTop=s,o.scrollLeft=a,o.scrollTop=c}function k(){var t=r(a).container;if(!t){(t=document.createElement("div")).className=s,t.style.cssText=c(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),r(a).container=t,function(t){t.className+=" "+s+"_animation_active"}(t),a.appendChild(t);var e=function(){r(a).onRendered&&r(a).onRendered()};l(t,"animationstart",e),r(a).onAnimationStart=e}return t}function x(){if(p("Injecting elements"),r(a)){!function(){var n=r(a).style;if("static"===n.position){a.style.setProperty("position","relative",t.important?"important":"");var o=function(t,e,n,r){var o=n[r];"auto"!==o&&"0"!==function(t){return t.replace(/[^-\d\.]/g,"")}(o)&&(t.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",e),e.style[r]=0)};o(e,a,n,"top"),o(e,a,n,"right"),o(e,a,n,"bottom"),o(e,a,n,"left")}}();var n=r(a).container;n||(n=k());var o,u,d,_,f=i.width,m=i.height,g=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),h=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(["left: "+(o=(o=-(1+f))?o+"px":"0"),"top: "+(u=(u=-(1+m))?u+"px":"0"),"right: "+(_=(_=-f)?_+"px":"0"),"bottom: "+(d=(d=-m)?d+"px":"0")])),b=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),v=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),y=c(["position: absolute","left: 0","top: 0"]),w=c(["position: absolute","width: 200%","height: 200%"]),$=document.createElement("div"),x=document.createElement("div"),j=document.createElement("div"),E=document.createElement("div"),S=document.createElement("div"),C=document.createElement("div");$.dir="ltr",$.style.cssText=g,$.className=s,x.className=s,x.style.cssText=h,j.style.cssText=b,E.style.cssText=y,S.style.cssText=v,C.style.cssText=w,j.appendChild(E),S.appendChild(C),x.appendChild(j),x.appendChild(S),$.appendChild(x),n.appendChild($),l(j,"scroll",A),l(S,"scroll",M),r(a).onExpandScroll=A,r(a).onShrinkScroll=M}else p("Aborting because element has been uninstalled");function A(){r(a).onExpand&&r(a).onExpand()}function M(){r(a).onShrink&&r(a).onShrink()}}function j(){function i(e,n,r){var o=function(t){return d(t).childNodes[0]}(e),i=y(n),s=w(r);o.style.setProperty("width",i+"px",t.important?"important":""),o.style.setProperty("height",s+"px",t.important?"important":"")}function s(s){var l=a.offsetWidth,u=a.offsetHeight,d=l!==r(a).lastWidth||u!==r(a).lastHeight;p("Storing current size",l,u),h(a,l,u),n.add(0,(function(){if(d)if(r(a))if(c()){if(t.debug){var n=a.offsetWidth,s=a.offsetHeight;n===l&&s===u||e.warn(o.get(a),"Scroll: Size changed before updating detector elements.")}i(a,l,u)}else p("Aborting because element container has not been initialized");else p("Aborting because element has been uninstalled")})),n.add(1,(function(){r(a)?c()?$(a,l,u):p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")})),d&&s&&n.add(2,(function(){r(a)?c()?s():p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")}))}function c(){return!!r(a).container}function l(){p("notifyListenersIfNeeded invoked");var t=r(a);return void 0===r(a).lastNotifiedWidth&&t.lastWidth===t.startSize.width&&t.lastHeight===t.startSize.height?p("Not notifying: Size is the same as the start size, and there has been no notification yet."):t.lastWidth===t.lastNotifiedWidth&&t.lastHeight===t.lastNotifiedHeight?p("Not notifying: Size already notified"):(p("Current size not notified, notifying..."),t.lastNotifiedWidth=t.lastWidth,t.lastNotifiedHeight=t.lastHeight,void Bn(r(a).listeners,(function(t){t(a)})))}function u(){p("Scroll detected."),f(a)?p("Scroll event fired while unrendered. Ignoring..."):s(l)}if(p("registerListenersAndPositionElements invoked."),r(a)){r(a).onRendered=function(){if(p("startanimation triggered."),f(a))p("Ignoring since element is still unrendered...");else{p("Element rendered.");var t=d(a),e=_(a);0!==t.scrollLeft&&0!==t.scrollTop&&0!==e.scrollLeft&&0!==e.scrollTop||(p("Scrollbars out of sync. Updating detector elements..."),s(l))}},r(a).onExpand=u,r(a).onShrink=u;var m=r(a).style;i(a,m.width,m.height)}else p("Aborting because element has been uninstalled")}function E(){if(p("finalizeDomMutation invoked."),r(a)){var t=r(a).style;h(a,t.width,t.height),$(a,t.width,t.height)}else p("Aborting because element has been uninstalled")}function S(){u(a)}function C(){var t;p("Installing..."),r(a).listeners=[],t=m(),r(a).startSize={width:t.width,height:t.height},p("Element start size",r(a).startSize),n.add(0,g),n.add(1,x),n.add(2,j),n.add(3,E),n.add(4,S)}u||(u=a,a=t,t=null),t=t||{},p("Making detectable..."),!function(t){return!function(t){var e=t.getRootNode&&t.getRootNode().contains(t);return t===t.ownerDocument.body||t.ownerDocument.body.contains(t)||e}(t)||null===window.getComputedStyle(t)}(a)?C():(p("Element is detached"),k(),p("Waiting until element is attached..."),r(a).onRendered=function(){p("Element is now attached"),C()})},addListener:function(t,e){if(!r(t).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");r(t).listeners.push(e)},uninstall:function(t){var e=r(t);e&&(e.onExpandScroll&&u(d(t),"scroll",e.onExpandScroll),e.onShrinkScroll&&u(_(t),"scroll",e.onShrinkScroll),e.onAnimationStart&&u(e.container,"animationstart",e.onAnimationStart),e.container&&t.removeChild(e.container))},initDocument:a}},Nn=Mn.forEach;function zn(t){return Array.isArray(t)||void 0!==t.length}function Pn(t){if(Array.isArray(t))return t;var e=[];return Nn(t,(function(t){e.push(t)})),e}function Rn(t){return t&&1===t.nodeType}function Hn(t,e,n){var r=t[e];return null==r&&void 0!==n?n:r}var Wn=function(t){var e,n;if((t=t||{}).idHandler)e={get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set};else{var r=function(t){var e=t.idGenerator,n=t.stateHandler.getState;return{get:function(t){var e=n(t);return e&&void 0!==e.id?e.id:null},set:function(t){var r=n(t);if(!r)throw new Error("setId required the element to have a resize detection state.");var o=e.generate();return r.id=o,o}}}({idGenerator:(n=1,{generate:function(){return n++}}),stateHandler:Ln});e=r}var o=t.reporter;o||(o=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var r=function(t,e){t[e]=function(){var t=console[e];if(t.apply)t.apply(console,arguments);else for(var n=0;n<arguments.length;n++)t(arguments[n])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n}(!1===o));var i=Hn(t,"batchProcessor",Tn({reporter:o})),s={};s.callOnAdd=!!Hn(t,"callOnAdd",!0),s.debug=!!Hn(t,"debug",!1);var a,c=function(t){var e={};function n(n){var r=t.get(n);return void 0===r?[]:e[r]||[]}return{get:n,add:function(n,r){var o=t.get(n);e[o]||(e[o]=[]),e[o].push(r)},removeListener:function(t,e){for(var r=n(t),o=0,i=r.length;o<i;++o)if(r[o]===e){r.splice(o,1);break}},removeAllListeners:function(t){var e=n(t);e&&(e.length=0)}}}(e),l=function(t){var e=t.stateHandler.getState;return{isDetectable:function(t){var n=e(t);return n&&!!n.isDetectable},markAsDetectable:function(t){e(t).isDetectable=!0},isBusy:function(t){return!!e(t).busy},markBusy:function(t,n){e(t).busy=!!n}}}({stateHandler:Ln}),u=Hn(t,"strategy","object"),d=Hn(t,"important",!1),_={reporter:o,batchProcessor:i,stateHandler:Ln,idHandler:e,important:d};if("scroll"===u&&(qn.isLegacyOpera()?(o.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),u="object"):qn.isIE(9)&&(o.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),u="object")),"scroll"===u)a=In(_);else{if("object"!==u)throw new Error("Invalid strategy name: "+u);a=function(t){var e=(t=t||{}).reporter,n=t.batchProcessor,r=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function o(e){var n=t.important?" !important; ":"; ";return(e.join(n)+n).trim()}function i(t){return r(t).object}return{makeDetectable:function(t,i,s){s||(s=i,i=t,t=null),(t=t||{}).debug,qn.isIE(8)?s(i):function(i,s){var a=o(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),c=!1,l=window.getComputedStyle(i),u=i.offsetWidth,d=i.offsetHeight;function _(){function n(){if("static"===l.position){i.style.setProperty("position","relative",t.important?"important":"");var n=function(e,n,r,o){var i=r[o];"auto"!==i&&"0"!==function(t){return t.replace(/[^-\d\.]/g,"")}(i)&&(e.warn("An element that is positioned static has style."+o+"="+i+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+o+" will be set to 0. Element: ",n),n.style.setProperty(o,"0",t.important?"important":""))};n(e,i,l,"top"),n(e,i,l,"right"),n(e,i,l,"bottom"),n(e,i,l,"left")}}""!==l.position&&(n(),c=!0);var o=document.createElement("object");o.style.cssText=a,o.tabIndex=-1,o.type="text/html",o.setAttribute("aria-hidden","true"),o.onload=function(){c||n(),function t(e,n){if(!e.contentDocument){var o=r(e);return o.checkForObjectDocumentTimeoutId&&window.clearTimeout(o.checkForObjectDocumentTimeoutId),void(o.checkForObjectDocumentTimeoutId=setTimeout((function(){o.checkForObjectDocumentTimeoutId=0,t(e,n)}),100))}n(e.contentDocument)}(this,(function(t){s(i)}))},qn.isIE()||(o.data="about:blank"),r(i)&&(i.appendChild(o),r(i).object=o,qn.isIE()&&(o.data="about:blank"))}r(i).startSize={width:u,height:d},n?n.add(_):_()}(i,s)},addListener:function(t,e){function n(){e(t)}if(qn.isIE(8))r(t).object={proxy:n},t.attachEvent("onresize",n);else{var o=i(t);if(!o)throw new Error("Element is not detectable by this strategy.");o.contentDocument.defaultView.addEventListener("resize",n)}},uninstall:function(t){if(r(t)){var e=i(t);e&&(qn.isIE(8)?t.detachEvent("onresize",e.proxy):t.removeChild(e),r(t).checkForObjectDocumentTimeoutId&&window.clearTimeout(r(t).checkForObjectDocumentTimeoutId),delete r(t).object)}}}}(_)}var p={};return{listenTo:function(t,n,r){function i(t){var e=c.get(t);Nn(e,(function(e){e(t)}))}function u(t,e,n){c.add(e,n),t&&n(e)}if(r||(r=n,n=t,t={}),!n)throw new Error("At least one element required.");if(!r)throw new Error("Listener required.");if(Rn(n))n=[n];else{if(!zn(n))return o.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=Pn(n)}var _=0,f=Hn(t,"callOnAdd",s.callOnAdd),m=Hn(t,"onReady",(function(){})),g=Hn(t,"debug",s.debug);Nn(n,(function(t){Ln.getState(t)||(Ln.initState(t),e.set(t));var s=e.get(t);if(g&&o.log("Attaching listener to element",s,t),!l.isDetectable(t))return g&&o.log(s,"Not detectable."),l.isBusy(t)?(g&&o.log(s,"System busy making it detectable"),u(f,t,r),p[s]=p[s]||[],void p[s].push((function(){++_===n.length&&m()}))):(g&&o.log(s,"Making detectable..."),l.markBusy(t,!0),a.makeDetectable({debug:g,important:d},t,(function(t){if(g&&o.log(s,"onElementDetectable"),Ln.getState(t)){l.markAsDetectable(t),l.markBusy(t,!1),a.addListener(t,i),u(f,t,r);var e=Ln.getState(t);if(e&&e.startSize){var c=t.offsetWidth,d=t.offsetHeight;e.startSize.width===c&&e.startSize.height===d||i(t)}p[s]&&Nn(p[s],(function(t){t()}))}else g&&o.log(s,"Element uninstalled before being detectable.");delete p[s],++_===n.length&&m()})));g&&o.log(s,"Already detecable, adding listener."),u(f,t,r),_++})),_===n.length&&m()},removeListener:c.removeListener,removeAllListeners:c.removeAllListeners,uninstall:function(t){if(!t)return o.error("At least one element is required.");if(Rn(t))t=[t];else{if(!zn(t))return o.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=Pn(t)}Nn(t,(function(t){c.removeAllListeners(t),a.uninstall(t),Ln.cleanState(t)}))},initDocument:function(t){a.initDocument&&a.initDocument(t)}}}({strategy:"scroll"});function Vn(t,e){Wn.listenTo(t,e);var n=e;return{update:function(e){Wn.removeListener(t,n),Wn.listenTo(t,e),n=e},destroy:function(){Wn.removeListener(t,n)}}}const Yn={light:{colors:{text:"#575757",background:{primary:"#FFFFFF",contrast:"#F3F3F3"},button:{hover:"#f0f0f0",active:"#c9c9c9"},knob:{gradient_enabled_start:"#FFFFFF",gradient_enabled_end:"#BFBFBF",gradient_disabled_start:"#AFAFAF",gradient_disabled_end:"#BFBFBF",line:"#C4C4C4"},node:{deg:"287.88deg",gradient_start:"rgba(163, 163, 163, 0.132) -3.37%",gradient_end:"rgba(134, 134, 134, 0.6) 131.67%"},border:"#ebebeb",hover:"#f0f0f0",primary50:"#FFE8EE",primary100:"#FFC5D2",primary200:"#F98A97",primary300:"#F3576D",primary:"#FF0149",primary500:"#FF002B",primary600:"#F7002C",primary700:"#D8001E",primary800:"#D8001E",primary900:"#C80011",primary_dark:"#D51A4C",complementary50:"#D8FFEE",complementary100:"#9BFFD4",complementary200:"#01FFB7",complementary300:"#00FB9B",complementary:"#00F289",complementary500:"#00EA75",complementary600:"#00C45A",complementary700:"#00D969",complementary800:"#00B24D",complementary900:"#008F36"},fonts:{color:"#575757",title:"Inter",paragraph:"Merriweather"}},dark:{colors:{text:"#575757",background:{primary:"#181A1B",contrast:"#1F2123"},button:{hover:"#202325",active:"#363b3d"},knob:{gradient_enabled_start:"#181a1b",gradient_enabled_end:"#3c4144",gradient_disabled_start:"#454b4e",gradient_disabled_end:"#3c4144",line:"#484848"},node:{deg:"287.88deg",gradient_start:"rgba(76, 82, 85, 0.13) -3.37%",gradient_end:"rgba(92, 100, 104, 0.6) 131.67%"},border:"#363a3c",primary50:"#FFE8EE",primary100:"#FFC5D2",primary200:"#F98A97",primary300:"#F3576D",primary:"#FF0149",primary500:"#FF002B",primary600:"#F7002C",primary700:"#D8001E",primary800:"#D8001E",primary900:"#C80011",primary_dark:"#D51A4C",complementary50:"#D8FFEE",complementary100:"#9BFFD4",complementary200:"#01FFB7",complementary300:"#00FB9B",complementary:"#00F289",complementary500:"#00EA75",complementary600:"#00C45A",complementary700:"#00D969",complementary800:"#00B24D",complementary900:"#008F36"},fonts:{color:"#b1aaa0",title:"Inter",paragraph:"Merriweather"}}};var Un;!function(t){t.Light="Light",t.Dark="Dark"}(Un||(Un={}));const Xn=qt("dark"===localStorage.getItem("__svelte-themer__theme")?Un.Dark:Un.Light);var Kn={subscribe:Ot(Xn,((t,e)=>t==Un.Dark?e(Yn.dark):e(Yn.light))).subscribe,toggleTheme:function(){Xn.update((t=>t==Un.Dark?Un.Light:Un.Dark))}};function Gn(e){let n,o,i,s,a,c;return{c(){n=x("div"),o=x("canvas"),O(o,"tabindex","0"),O(o,"class","grid svelte-1fkiigp"),Q((()=>e[12].call(o))),O(n,"class","track svelte-1fkiigp"),O(n,"style",s=`--track-height: ${e[0]}px;`)},m(t,r){w(t,n,r),y(n,o),e[11](o),i=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=x("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=N();let o;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=A(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{o=A(n.contentWindow,"resize",e)}),y(t,n),()=>{(r||o&&n.contentWindow)&&o(),$(n)}}(o,e[12].bind(o)),a||(c=[A(o,"pointerdown",q(e[5])),A(o,"pointermove",e[6]),A(o,"contextmenu",q(Zn)),f(Vn.call(null,n,e[4]))],a=!0)},p(t,[e]){1&e&&s!==(s=`--track-height: ${t[0]}px;`)&&O(n,"style",s)},i:t,o:t,d(t){t&&$(n),e[11](null),i(),a=!1,r(c)}}}function Jn(t,e,n,r,o,i){t.moveTo(e+i,n),t.lineTo(e+r-i,n),t.quadraticCurveTo(e+r,n,e+r,n+i),t.lineTo(e+r,n+o-i),t.quadraticCurveTo(e+r,n+o,e+r-i,n+o),t.lineTo(e+i,n+o),t.quadraticCurveTo(e,n+o,e,n+o-i),t.lineTo(e,n+i),t.quadraticCurveTo(e,n,e+i,n)}const Zn=t=>t.preventDefault();function Qn(t,e,n){let r,o,i,s,{track_height:a=100}=e,{start_beat:c=0}=e,{end_beat:l=20}=e,{signature:u=4}=e,{clips:d=[]}=e,_=-1;const p=V();let f=getComputedStyle(document.documentElement).getPropertyValue("--theme-colors-background-contrast"),m=getComputedStyle(document.documentElement).getPropertyValue("--theme-colors-background-primary"),g=getComputedStyle(document.documentElement).getPropertyValue("--theme-colors-primary"),h=getComputedStyle(document.documentElement).getPropertyValue("--theme-colors-primary_dark");function b(t){return{x:t.offsetX*(i.width/i.clientWidth),y:t.offsetY*(i.height/i.clientHeight)}}function v(){i&&(s=s??i.getContext("2d",{alpha:!1}),n(3,i.width=i.clientWidth,i),n(3,i.height=i.clientHeight,i),s.save(),s.scale(1,i.height),s.stroke(),s.fillStyle=`${f}`,s.fillRect(0,0,i.width,i.height),function(t){const e=l-c,n=i.width/e,r=c%1*n;n>60&&function(t){const e=l-c,n=i.width/e,r=c%1*n;t.beginPath();for(let o=0;o<e*(u+1);o++){const e=o*n/(u+1)-r;t.moveTo(e,0),t.lineTo(e,1)}t.strokeStyle=`${f}`,t.lineWidth=1,t.globalAlpha=.5,t.stroke()}(t),t.beginPath();for(let o=0;o<e;o++){const e=o*n-r;t.moveTo(e,0),t.lineTo(e,1)}t.strokeStyle=`${f}`,t.lineWidth=2,t.globalAlpha=.5,t.stroke()}(s),s.restore(),function(){const t=i.width/(l-c);for(const e of d){const n=e.position,r=e.duration*t,o=d.indexOf(e);s.save(),s.translate((n-c)*t,0),s.fillStyle=o==_?`${h}`:`${g}`,s.beginPath(),Jn(s,0,0,r,i.height,16),s.fill(),s.strokeStyle="black",s.lineWidth=2,s.stroke(),s.fillStyle=`${m}`,s.textBaseline="top",s.font="14px sans-serif",s.fillText(y(e.name,r),8,8,r),s.restore()}}())}function y(t,e){let n=s.measureText(t);for(;n.width>e-20;){if(1===t.length)return"";t.length<4?(t=t.slice(0,-1),n=s.measureText(t)):(t=t.slice(0,-4)+"...",n=s.measureText(t))}return t}return getComputedStyle(document.documentElement).getPropertyValue("--theme-colors-border"),Kn.subscribe((t=>{f=t.colors.background.contrast,m=t.colors.background.primary,g=t.colors.primary,v()})),W((()=>{v()})),t.$$set=t=>{"track_height"in t&&n(0,a=t.track_height),"start_beat"in t&&n(8,c=t.start_beat),"end_beat"in t&&n(9,l=t.end_beat),"signature"in t&&n(10,u=t.signature),"clips"in t&&n(7,d=t.clips)},t.$$.update=()=>{1926&t.$$.dirty&&v()},[a,r,o,i,v,function(t){if(2==t.button)return;let e=[];const r=b(t).x,o=i.width/(l-c);let s=d.slice().reverse().find((t=>{const e=t.position,n=t.duration,i=(e-c)*o;return r>i&&r<i+n*o}));if(!s)return;if(cn){let t=JSON.parse(JSON.stringify(s));s=t,d.push(t);const n=t=>{this.onpointerup=null,this.onpointermove=null,this.releasePointerCapture(t.pointerId),p("clipDuplicated",s);for(const t of e)p("clipDuplicated",t)};this.onpointerup=n}else{const t=t=>{this.onpointerup=null,this.onpointermove=null,this.releasePointerCapture(t.pointerId),p("clipMoved",s);for(const t of e)p("clipDuplicated",t)};this.onpointerup=t}_=d.indexOf(s);const a=(s.position-c)*o;this.setPointerCapture(t.pointerId),this.onpointermove=t=>{const e=b(t).x;s.duration;let i=(a+(e-r))/o+c;i<0&&(i=0),o>60&&!t.altKey&&(i=Math.floor(i*(u+1))/(u+1)),t.shiftKey&&(i=Math.floor(i)),s.position=i,n(7,d)},this.onkeydown=t=>{if("Delete"===t.key&&p("clipDeleted",s),"d"===t.key||"D"===t.key){let t=JSON.parse(JSON.stringify(s));t.position+=s.duration*(e.length+1),d.push(t),e.push(t),n(7,d)}},n(7,d)},function(t){if(2!=t.buttons)return;const e=b(t).x,n=i.width/(l-c);let r=d.slice().reverse().find((t=>{const r=t.position,o=t.duration,i=(r-c)*n;return e>i&&e<i+o*n}));r&&p("clipDeleted",r)},d,c,l,u,function(t){X[t?"unshift":"push"]((()=>{i=t,n(3,i)}))},function(){o=this.clientHeight,r=this.clientWidth,n(2,o),n(1,r)}]}class tr extends yt{constructor(t){super(),vt(this,t,Qn,Gn,i,{track_height:0,start_beat:8,end_beat:9,signature:10,clips:7})}}function er(t,e,n){const r=t.slice();return r[12]=e[n],r}function nr(t,e){let n,r,i,s,a,c,l;return r=new tr({props:{start_beat:e[0],end_beat:e[3],clips:e[12].clips??[]}}),r.$on("clipMoved",(function(){o(e[5](e[12].id))&&e[5](e[12].id).apply(this,arguments)})),r.$on("clipDeleted",(function(){o(e[6](e[12].id))&&e[6](e[12].id).apply(this,arguments)})),r.$on("clipDuplicated",(function(...t){return e[10](e[12],...t)})),{key:t,first:null,c(){n=x("div"),mt(r.$$.fragment),i=S(),O(n,"class","timeline-track svelte-1irczjz"),this.first=n},m(t,o){w(t,n,o),gt(r,n,null),y(n,i),e[11](n),a=!0,c||(l=f(s=wt.call(null,n,e[4](e[12].id))),c=!0)},p(t,n){e=t;const i={};1&n&&(i.start_beat=e[0]),8&n&&(i.end_beat=e[3]),2&n&&(i.clips=e[12].clips??[]),r.$set(i),s&&o(s.update)&&2&n&&s.update.call(null,e[4](e[12].id))},i(t){a||(lt(r.$$.fragment,t),a=!0)},o(t){ut(r.$$.fragment,t),a=!1},d(t){t&&$(n),ht(r),e[11](null),c=!1,l()}}}function rr(t){let e,n,r,o,i,s=[],a=new Map,c=t[1];const l=t=>t[12].id;for(let e=0;e<c.length;e+=1){let n=er(t,c,e),r=l(n);a.set(r,s[e]=nr(r,n))}return{c(){e=x("div"),n=x("div");for(let t=0;t<s.length;t+=1)s[t].c();O(n,"class","track-stack svelte-1irczjz"),O(e,"class","timeline-container svelte-1irczjz")},m(a,c){w(a,e,c),y(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);r=!0,o||(i=A(e,"wheel",t[7]),o=!0)},p(t,[e]){127&e&&(c=t[1],at(),s=pt(s,e,l,1,t,c,a,n,_t,nr,null,er),ct())},i(t){if(!r){for(let t=0;t<c.length;t+=1)lt(s[t]);r=!0}},o(t){for(let t=0;t<s.length;t+=1)ut(s[t]);r=!1},d(t){t&&$(e);for(let t=0;t<s.length;t+=1)s[t].d();o=!1,i()}}}function or(t,e,n){let r,o,{scrollY:i}=e,s=[],a=100,c=0;xe.subscribe((t=>{n(1,s=t.tracks??[])}));return t.$$set=t=>{"scrollY"in t&&n(8,i=t.scrollY)},t.$$.update=()=>{513&t.$$.dirty&&n(3,o=c+20*a)},[c,s,r,o,function(t){return{key:"clipObject",callback:(e,n)=>{const i=e;let s=r.getBoundingClientRect(),a=s.width/(o-c),l=(n-s.x)/a;l=Math.floor(l),xe.add_clip_to_track(t,i.index,l)}}},function(t){return e=>{const n=e.detail;xe.set_clip_position(t,n.index,n.position)}},function(t){return e=>{const n=e.detail;xe.delete_clip_from_track(t,n.index)}},function(t){if(t.preventDefault(),an){const e=Math.sign(t.deltaY);n(9,a+=10*e),n(9,a=Math.max(a,1)),console.log(a)}else{const e=Math.sign(t.deltaX);n(0,c+=e*a),n(0,c=Math.max(c,0))}},i,a,(t,e)=>{const n=e.detail;xe.duplicate_clip(t.id,n.from_unique_clip_index,Math.floor(n.position))},function(t){X[t?"unshift":"push"]((()=>{r=t,n(2,r)}))}]}class ir extends yt{constructor(t){super(),vt(this,t,or,rr,i,{scrollY:8})}}function sr(e){let n,r,o,i,s;return{c(){n=x("button"),r=x("img"),O(r,"alt","AddTrackButton"),a(r.src,o=ar)||O(r,"src",o),O(r,"class","svelte-1r622t9"),O(n,"class","svelte-1r622t9")},m(t,o){w(t,n,o),y(n,r),i||(s=A(n,"click",e[0]),i=!0)},p:t,i:t,o:t,d(t){t&&$(n),i=!1,s()}}}const ar="assets/Add.svg";function cr(t){return[function(e){Y.call(this,t,e)}]}class lr extends yt{constructor(t){super(),vt(this,t,cr,sr,i,{})}}function ur(t){let e;return{c(){e=x("div"),O(e,"class","isEnabled svelte-9mxqen")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function dr(t){let e;return{c(){e=x("div"),e.innerHTML='<div class="isSelected svelte-9mxqen"></div>',O(e,"class","shadowfilter svelte-9mxqen")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function _r(t){let e,n,o,i,s,a,c,l,u,d,p,f,m,g,h,b,v,k,j,C,T,F,L=t[0].name+"",B=t[3]&&ur();function I(e){t[10](e)}let N={min:0,max:100};function z(e){t[11](e)}void 0!==t[4]&&(N.value=t[4]),f=new Te({props:N}),X.push((()=>ft(f,"value",I)));let P={min:0,max:100};void 0!==t[5]&&(P.value=t[5]),b=new Te({props:P}),X.push((()=>ft(b,"value",z)));let R=t[2]&&dr();return{c(){e=x("div"),n=x("div"),o=x("div"),B&&B.c(),i=S(),s=x("div"),a=x("span"),c=E(L),u=S(),d=x("div"),p=x("div"),mt(f.$$.fragment),g=S(),h=x("div"),mt(b.$$.fragment),k=S(),R&&R.c(),O(o,"class","select svelte-9mxqen"),O(a,"class",l=_(t[1]?"edit-mode":"read-mode")+" svelte-9mxqen"),O(s,"class","name svelte-9mxqen"),O(p,"class","topknob svelte-9mxqen"),O(h,"class","bottomknob svelte-9mxqen"),O(d,"class","knobs svelte-9mxqen"),O(n,"class","trackholder svelte-9mxqen"),O(e,"class","container svelte-9mxqen"),O(e,"style",j=`--height: ${t[6]};`)},m(r,l){w(r,e,l),y(e,n),y(n,o),B&&B.m(o,null),y(n,i),y(n,s),y(s,a),y(a,c),y(n,u),y(n,d),y(d,p),gt(f,p,null),y(d,g),y(d,h),gt(b,h,null),y(e,k),R&&R.m(e,null),C=!0,T||(F=[A(window,"keydown",t[8]),A(o,"click",q(M(t[9]))),A(e,"click",q(M(t[7])))],T=!0)},p(t,[n]){t[3]?B||(B=ur(),B.c(),B.m(o,null)):B&&(B.d(1),B=null),(!C||1&n)&&L!==(L=t[0].name+"")&&D(c,L),(!C||2&n&&l!==(l=_(t[1]?"edit-mode":"read-mode")+" svelte-9mxqen"))&&O(a,"class",l);const r={};!m&&16&n&&(m=!0,r.value=t[4],tt((()=>m=!1))),f.$set(r);const i={};!v&&32&n&&(v=!0,i.value=t[5],tt((()=>v=!1))),b.$set(i),t[2]?R||(R=dr(),R.c(),R.m(e,null)):R&&(R.d(1),R=null),(!C||64&n&&j!==(j=`--height: ${t[6]};`))&&O(e,"style",j)},i(t){C||(lt(f.$$.fragment,t),lt(b.$$.fragment,t),C=!0)},o(t){ut(f.$$.fragment,t),ut(b.$$.fragment,t),C=!1},d(t){t&&$(e),B&&B.d(),ht(f),ht(b),R&&R.d(),T=!1,r(F)}}}function pr(t,e,n){let{track:r}=e,{selected:o=!1}=e,{editable:i=!1}=e,{enabled:s=!0}=e,{height:a="100px"}=e,{topknobvalue:c=0}=e,{botknobvalue:l=0}=e;const u=V();return V(),t.$$set=t=>{"track"in t&&n(0,r=t.track),"selected"in t&&n(2,o=t.selected),"editable"in t&&n(1,i=t.editable),"enabled"in t&&n(3,s=t.enabled),"height"in t&&n(6,a=t.height),"topknobvalue"in t&&n(4,c=t.topknobvalue),"botknobvalue"in t&&n(5,l=t.botknobvalue)},t.$$.update=()=>{3&t.$$.dirty&&(i||u("change-trackname",{trackname:r.name}))},[r,i,o,s,c,l,a,function(t){cn?n(1,i=!0):(n(2,o=!o),u("select"))},function(t){i&&("Enter"===t.key||"Escape"===t.key?n(1,i=!1):"Backspace"===t.key?n(0,r.name=cn?"":r.name.slice(0,-1),r):1===t.key.length&&n(0,r.name+=t.key,r))},function(){n(3,s=!s)},function(t){c=t,n(4,c)},function(t){l=t,n(5,l)}]}class fr extends yt{constructor(t){super(),vt(this,t,pr,_r,i,{track:0,selected:2,editable:1,enabled:3,height:6,topknobvalue:4,botknobvalue:5})}}function mr(t,e,n){const r=t.slice();return r[8]=e[n],r[10]=n,r}function gr(t,e){let n,r,o;return r=new fr({props:{track:e[8],selected:e[1].includes(e[8].id),editable:(e[1].includes(e[8].id),!1)}}),r.$on("select",(function(...t){return e[5](e[10],e[8],...t)})),r.$on("change-trackname",(function(...t){return e[6](e[8],...t)})),{key:t,first:null,c(){n=C(),mt(r.$$.fragment),this.first=n},m(t,e){w(t,n,e),gt(r,t,e),o=!0},p(t,n){e=t;const o={};1&n&&(o.track=e[8]),3&n&&(o.selected=e[1].includes(e[8].id)),3&n&&(o.editable=(e[1].includes(e[8].id),!1)),r.$set(o)},i(t){o||(lt(r.$$.fragment,t),o=!0)},o(t){ut(r.$$.fragment,t),o=!1},d(t){t&&$(n),ht(r,t)}}}function hr(t){let e,n,r,o,i,s,a,c,l=[],u=new Map,d=t[0];const _=t=>t[8].id;for(let e=0;e<d.length;e+=1){let n=mr(t,d,e),r=_(n);u.set(r,l[e]=gr(r,n))}return i=new lr({}),i.$on("click",t[2]),{c(){e=x("div"),n=x("div");for(let t=0;t<l.length;t+=1)l[t].c();r=S(),o=x("div"),mt(i.$$.fragment),O(n,"class","track-stack svelte-1ytdi70"),O(o,"class","add-track svelte-1ytdi70"),O(e,"class","track-container svelte-1ytdi70")},m(u,d){w(u,e,d),y(e,n);for(let t=0;t<l.length;t+=1)l[t].m(n,null);y(e,r),y(e,o),gt(i,o,null),s=!0,a||(c=A(window,"keydown",t[4]),a=!0)},p(t,[e]){11&e&&(d=t[0],at(),l=pt(l,e,_,1,t,d,u,n,_t,gr,null,mr),ct())},i(t){if(!s){for(let t=0;t<d.length;t+=1)lt(l[t]);lt(i.$$.fragment,t),s=!0}},o(t){for(let t=0;t<l.length;t+=1)ut(l[t]);ut(i.$$.fragment,t),s=!1},d(t){t&&$(e);for(let t=0;t<l.length;t+=1)l[t].d();ht(i),a=!1,c()}}}function br(t,e,n){let r=[];xe.subscribe((t=>{null!=t&&n(0,r=t.tracks)}));let o=[],i=[];function s(t,e){const r=i.includes(t);an?r?(n(1,o=o.filter((t=>t!==e))),i=i.filter((e=>e!==t))):(n(1,o=[...o,e]),i=[...i,t]):r?(n(1,o=[]),i=[]):(n(1,o=[e]),i=[t])}return[r,o,function(){xe.add_track("Track Name")},s,function(t){if("Delete"===t.key){for(let t of o)xe.delete_track(t);n(1,o=[]),i=[]}},(t,e,n)=>s(t,e.id),(t,e)=>xe.set_track_name(t.id,e.detail.trackname)]}class vr extends yt{constructor(t){super(),vt(this,t,br,hr,i,{})}}function yr(e){let n,r,o,i,s,c;return{c(){n=x("button"),r=x("img"),O(r,"alt","IconButton"),a(r.src,o=e[2])||O(r,"src",o),O(n,"style",i=`--size: ${e[0]}px; --buttoncolor: ${e[1]}`),O(n,"class","svelte-1ra1bpt")},m(t,o){w(t,n,o),y(n,r),s||(c=A(n,"click",e[4]),s=!0)},p(t,[e]){4&e&&!a(r.src,o=t[2])&&O(r,"src",o),3&e&&i!==(i=`--size: ${t[0]}px; --buttoncolor: ${t[1]}`)&&O(n,"style",i)},i:t,o:t,d(t){t&&$(n),s=!1,c()}}}function wr(t,e,n){let r,{icontype:o}=e,{size:i=48}=e,{buttoncolor:s="white"}=e;const a={play:"assets/Play.svg",pause:"assets/Pause.svg",stop:"assets/Stop.svg"};return t.$$set=t=>{"icontype"in t&&n(3,o=t.icontype),"size"in t&&n(0,i=t.size),"buttoncolor"in t&&n(1,s=t.buttoncolor)},t.$$.update=()=>{8&t.$$.dirty&&n(2,r=a[o])},[i,s,r,o,function(e){Y.call(this,t,e)}]}class $r extends yt{constructor(t){super(),vt(this,t,wr,yr,i,{icontype:3,size:0,buttoncolor:1})}}var kr;!function(t){t[t.Graph=0]="Graph",t[t.Timeline=1]="Timeline"}(kr||(kr={}));var xr=qt(kr.Graph);function jr(e){let n,r,o,i,s,a;return{c(){n=x("label"),r=x("input"),o=S(),i=x("span"),i.innerHTML='<span class="node svelte-1evvsjh"><img alt="node" src="assets/Node1.svg" height="20" width="20"/></span> \n        <span class="timeline svelte-1evvsjh"><img alt="node" src="assets/Timeline.svg" height="24" width="24"/></span>',O(r,"type","checkbox"),O(r,"class","svelte-1evvsjh"),O(i,"class","slider svelte-1evvsjh"),O(n,"class","switch svelte-1evvsjh")},m(t,c){w(t,n,c),y(n,r),r.checked=e[0],y(n,o),y(n,i),s||(a=A(r,"change",e[1]),s=!0)},p(t,[e]){1&e&&(r.checked=t[0])},i:t,o:t,d(t){t&&$(n),s=!1,a()}}}function Er(t,e,n){let r;u(t,xr,(t=>n(2,r=t)));let{viewBool:o=!1}=e;return t.$$set=t=>{"viewBool"in t&&n(0,o=t.viewBool)},t.$$.update=()=>{1&t.$$.dirty&&p(xr,r=o?kr.Graph:kr.Timeline,r)},[o,function(){o=this.checked,n(0,o)}]}class Sr extends yt{constructor(t){super(),vt(this,t,Er,jr,i,{viewBool:0})}}function Cr(e){let n,o,i,s,a,c,l,u,d,_;return{c(){n=x("div"),o=x("div"),i=x("span"),s=E(e[0]),a=S(),c=x("span"),c.textContent=".00",l=S(),u=x("div"),u.innerHTML='<svg class="arrow svelte-b0az5x" width="9" height="6" viewBox="0 0 9 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.93687 1.09089C4.7416 0.895629 4.42502 0.895629 4.22976 1.09089L1.04778 4.27287C0.852517 4.46813 0.852517 4.78472 1.04778 4.97998C1.24304 5.17524 1.55962 5.17524 1.75489 4.97998L4.58331 2.15155L7.41174 4.97998C7.607 5.17524 7.92358 5.17524 8.11885 4.97998C8.31411 4.78472 8.31411 4.46813 8.11885 4.27287L4.93687 1.09089ZM5.08331 2V1.44444H4.08331V2H5.08331Z" fill="black"></path></svg> \n        <svg width="9" height="6" viewBox="0 0 9 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.22976 5.02019C4.42502 5.21546 4.7416 5.21546 4.93687 5.02019L8.11885 1.83821C8.31411 1.64295 8.31411 1.32637 8.11885 1.13111C7.92358 0.935845 7.607 0.935845 7.41174 1.13111L4.58331 3.95953L1.75489 1.13111C1.55962 0.935845 1.24304 0.935845 1.04778 1.13111C0.852517 1.32637 0.852517 1.64295 1.04778 1.83821L4.22976 5.02019ZM4.08331 4.11108V4.66664H5.08331V4.11108H4.08331Z" fill="black"></path></svg>',O(c,"class","little svelte-b0az5x"),O(o,"class","tempo"),O(u,"class","buttons svelte-b0az5x"),O(n,"class","frame svelte-b0az5x")},m(t,r){w(t,n,r),y(n,o),y(o,i),y(i,s),y(o,a),y(o,c),y(n,l),y(n,u),d||(_=[A(n,"wheel",e[1]),A(n,"pointerdown",e[2])],d=!0)},p(t,[e]){1&e&&D(s,t[0])},i:t,o:t,d(t){t&&$(n),d=!1,r(_)}}}function Ar(t,e,n){let{tempo:r=96}=e,o=0;function i(t){const e=Math.sign(t.deltaY);t.shiftKey,0===o&&n(0,r-=e),o+=1,5===o&&(o=0)}return t.$$set=t=>{"tempo"in t&&n(0,r=t.tempo)},t.$$.update=()=>{1&t.$$.dirty&&n(0,r=Math.max(0,Math.min(r,999.9)))},[r,function(t){if(t.wheelDeltaY){if(t.wheelDeltaY===-3*t.deltaY)return void i(t)}else if(0===t.deltaMode)return void i(t);!function(t){const e=Math.sign(t.deltaY),o=t.shiftKey?2:1;n(0,r-=e*o)}(t)},function(t){if(0!==t.button)return;const e=r;let o=0;this.onpointermove=t=>{o+=t.movementY/2,n(0,r=e-Math.round(o/4))},this.onpointerup=t=>{this.onpointermove=null,this.onpointerup=null,this.releasePointerCapture(t.pointerId)},this.setPointerCapture(t.pointerId)}]}class Mr extends yt{constructor(t){super(),vt(this,t,Ar,Cr,i,{tempo:0})}}function qr(t){let e,n,r,o,i,s,a,c;return{c(){e=x("div"),n=x("p"),r=E(t[2]),o=S(),i=x("p"),s=E(t[1]),a=S(),c=x("span"),c.textContent="Min",O(n,"class","svelte-tylyiu"),O(i,"class","little svelte-tylyiu"),O(e,"class","content svelte-tylyiu"),O(c,"class","svelte-tylyiu")},m(t,l){w(t,e,l),y(e,n),y(n,r),y(e,o),y(e,i),y(i,s),w(t,a,l),w(t,c,l)},p(t,e){4&e&&D(r,t[2]),2&e&&D(s,t[1])},d(t){t&&$(e),t&&$(a),t&&$(c)}}}function Or(t){let e,n,r,o,i,s,a,c;return{c(){e=x("div"),n=x("p"),r=E(t[4]),o=S(),i=x("p"),s=E(t[3]),a=S(),c=x("span"),c.textContent="Bar",O(n,"class","svelte-tylyiu"),O(i,"class","little svelte-tylyiu"),O(e,"class","content svelte-tylyiu"),O(c,"class","svelte-tylyiu")},m(t,l){w(t,e,l),y(e,n),y(n,r),y(e,o),y(e,i),y(i,s),w(t,a,l),w(t,c,l)},p(t,e){16&e&&D(r,t[4]),8&e&&D(s,t[3])},d(t){t&&$(e),t&&$(a),t&&$(c)}}}function Tr(e){let n,r,o;function i(t,e){return t[0]?Or:qr}let s=i(e),a=s(e);return{c(){n=x("div"),a.c(),O(n,"class","frame svelte-tylyiu")},m(t,i){w(t,n,i),a.m(n,null),r||(o=A(n,"click",e[5]),r=!0)},p(t,[e]){s===(s=i(t))&&a?a.p(t,e):(a.d(1),a=s(t),a&&(a.c(),a.m(n,null)))},i:t,o:t,d(t){t&&$(n),a.d(),r=!1,o()}}}function Dr(t){return t<10?"0"+t:t}function Fr(t,e,n){let r,o,i,s,a,c,l,u,d,_,p,{time:f=0}=e,{tempo:m=96}=e,{signature:g=4}=e,{is_bar:h=!1}=e;return t.$$set=t=>{"time"in t&&n(6,f=t.time),"tempo"in t&&n(7,m=t.tempo),"signature"in t&&n(8,g=t.signature),"is_bar"in t&&n(0,h=t.is_bar)},t.$$.update=()=>{64&t.$$.dirty&&n(11,r=Math.floor(f/60)),2112&t.$$.dirty&&n(10,o=Math.floor(f-60*r)),3136&t.$$.dirty&&n(9,i=Math.floor(100*(f-60*r-o))),128&t.$$.dirty&&n(15,s=60/m),33088&t.$$.dirty&&n(14,a=Math.floor(f/(g*s))+1),49472&t.$$.dirty&&n(13,c=Math.floor((f-(a-1)*g*s)/s)+1),49472&t.$$.dirty&&n(12,l=Math.floor((f-(a-1)*g*s)%s*24/s)),24576&t.$$.dirty&&n(4,u=`${a}:${Dr(c)}`),4096&t.$$.dirty&&n(3,d=`:${Dr(l)}`),3072&t.$$.dirty&&n(2,_=`${r}:${Dr(o)}`),512&t.$$.dirty&&n(1,p=`:${Dr(i)}`)},[h,p,_,d,u,function(){n(0,h=!h)},f,m,g,i,o,r,l,c,a,s]}class Lr extends yt{constructor(t){super(),vt(this,t,Fr,Tr,i,{time:6,tempo:7,signature:8,is_bar:0})}}function Br(t){let e,n,r,o=Math.round(parseInt(`${t[0]}`))+"";return{c(){e=x("span"),n=E(o),r=E("%"),O(e,"class","tooltiptext svelte-jc62fp")},m(t,o){w(t,e,o),y(e,n),y(e,r)},p(t,e){1&e&&o!==(o=Math.round(parseInt(`${t[0]}`))+"")&&D(n,o)},d(t){t&&$(e)}}}function Ir(e){let n,o,i,s,a,c,l,u,d,_,p=e[2]&&Br(e);return{c(){n=x("div"),o=x("div"),i=x("input"),s=S(),a=x("div"),a.innerHTML='<div class="track-inner svelte-jc62fp"></div> \n            <div class="track-progress svelte-jc62fp"></div>',c=S(),l=x("div"),p&&p.c(),O(i,"type","range"),O(i,"class","range svelte-jc62fp"),O(i,"min","0"),O(i,"max","100"),O(i,"step","0.1"),O(a,"class","track svelte-jc62fp"),O(l,"class","thumb svelte-jc62fp"),O(o,"class","wrap svelte-jc62fp"),O(o,"style",u=`--thumb_position: ${e[5]}; --track_length: ${e[3]}; --thumb_transform_x: ${e[4]};  --color: ${e[1]}`),O(n,"class","container svelte-jc62fp")},m(t,r){w(t,n,r),y(n,o),y(o,i),F(i,e[0]),y(o,s),y(o,a),y(o,c),y(o,l),p&&p.m(l,null),d||(_=[A(i,"change",e[8]),A(i,"input",e[8]),A(o,"click",e[7]),A(o,"mousedown",e[6])],d=!0)},p(t,[e]){1&e&&F(i,t[0]),t[2]?p?p.p(t,e):(p=Br(t),p.c(),p.m(l,null)):p&&(p.d(1),p=null),58&e&&u!==(u=`--thumb_position: ${t[5]}; --track_length: ${t[3]}; --thumb_transform_x: ${t[4]};  --color: ${t[1]}`)&&O(o,"style",u)},i:t,o:t,d(t){t&&$(n),p&&p.d(),d=!1,r(_)}}}function Nr(t,e,n){let r,o,i,{volume:s=50}=e,{color:a="#ff0149"}=e,c=!1;return t.$$set=t=>{"volume"in t&&n(0,s=t.volume),"color"in t&&n(1,a=t.color)},t.$$.update=()=>{1&t.$$.dirty&&n(5,r=`${s}%`),1&t.$$.dirty&&n(4,o=`-${s}%`),1&t.$$.dirty&&n(3,i=`${s}%`)},[s,a,c,i,o,r,function(){c||n(2,c=!0)},function(){c&&n(2,c=!1)},function(){s=T(this.value),n(0,s)}]}class zr extends yt{constructor(t){super(),vt(this,t,Nr,Ir,i,{volume:0,color:1})}}function Pr(e){let n,r,o,i;return{c(){n=x("img"),O(n,"alt","logo"),a(n.src,r="assets/logo-light.svg")||O(n,"src","assets/logo-light.svg"),O(n,"class","svelte-7mrj68")},m(t,r){w(t,n,r),o||(i=A(n,"click",e[6]),o=!0)},p:t,d(t){t&&$(n),o=!1,i()}}}function Rr(e){let n,r,o,i;return{c(){n=x("img"),O(n,"alt","logo"),a(n.src,r="assets/logo-dark.svg")||O(n,"src","assets/logo-dark.svg"),O(n,"class","svelte-7mrj68")},m(t,r){w(t,n,r),o||(i=A(n,"click",e[6]),o=!0)},p:t,d(t){t&&$(n),o=!1,i()}}}function Hr(t){let e,n,r,o,i,s,a,c,l,u,d,_,p,f,m,g,h,b,v,k,j,E,C,A,M;function q(t,e){return"light"===t[4]?Rr:Pr}let T=q(t),D=T(t);function F(e){t[11](e)}a=new $r({props:{icontype:t[3]}}),a.$on("click",t[7]),l=new $r({props:{icontype:"stop"}}),l.$on("click",t[8]),_=new Lr({props:{time:Wr}});let L={};function B(e){t[12](e)}void 0!==t[2]&&(L.viewBool=t[2]),m=new Sr({props:L}),X.push((()=>ft(m,"viewBool",F))),m.$on("click",t[9]);let I={};function N(e){t[13](e)}void 0!==t[0]&&(I.tempo=t[0]),k=new Mr({props:I}),X.push((()=>ft(k,"tempo",B)));let z={};return void 0!==t[1]&&(z.volume=t[1]),C=new zr({props:z}),X.push((()=>ft(C,"volume",N))),{c(){e=x("nav"),n=x("div"),r=x("div"),D.c(),o=S(),i=x("div"),s=x("div"),mt(a.$$.fragment),c=S(),mt(l.$$.fragment),u=S(),d=x("div"),mt(_.$$.fragment),p=S(),f=x("div"),mt(m.$$.fragment),h=S(),b=x("div"),v=x("div"),mt(k.$$.fragment),E=S(),mt(C.$$.fragment),O(r,"class","subgroup toolbar-title svelte-7mrj68"),O(n,"class","group left svelte-7mrj68"),O(s,"class","subgroup control-buttons svelte-7mrj68"),O(d,"class","subgroup time-group svelte-7mrj68"),O(f,"class","subgroup view-group svelte-7mrj68"),O(i,"class","group middle svelte-7mrj68"),O(v,"class","subgroup right-controls svelte-7mrj68"),O(b,"class","group right svelte-7mrj68"),O(e,"class","svelte-7mrj68")},m(t,g){w(t,e,g),y(e,n),y(n,r),D.m(r,null),y(e,o),y(e,i),y(i,s),gt(a,s,null),y(s,c),gt(l,s,null),y(i,u),y(i,d),gt(_,d,null),y(i,p),y(i,f),gt(m,f,null),y(e,h),y(e,b),y(b,v),gt(k,v,null),y(v,E),gt(C,v,null),M=!0},p(t,[e]){T===(T=q(t))&&D?D.p(t,e):(D.d(1),D=T(t),D&&(D.c(),D.m(r,null)));const n={};8&e&&(n.icontype=t[3]),a.$set(n);const o={};!g&&4&e&&(g=!0,o.viewBool=t[2],tt((()=>g=!1))),m.$set(o);const i={};!j&&1&e&&(j=!0,i.tempo=t[0],tt((()=>j=!1))),k.$set(i);const s={};!A&&2&e&&(A=!0,s.volume=t[1],tt((()=>A=!1))),C.$set(s)},i(t){M||(lt(a.$$.fragment,t),lt(l.$$.fragment,t),lt(_.$$.fragment,t),lt(m.$$.fragment,t),lt(k.$$.fragment,t),lt(C.$$.fragment,t),M=!0)},o(t){ut(a.$$.fragment,t),ut(l.$$.fragment,t),ut(_.$$.fragment,t),ut(m.$$.fragment,t),ut(k.$$.fragment,t),ut(C.$$.fragment,t),M=!1},d(t){t&&$(e),D.d(),ht(a),ht(l),ht(_),ht(m),ht(k),ht(C)}}}let Wr=100;function Vr(t,e,n){let r,o,{toggle:i,current:s,_:a}=(c="theme",H().$$.context.get(c));var c;u(t,s,(t=>n(4,o=t)));let l=!1,d=!1,_=96,p=50;return t.$$.update=()=>{var e,o;2&t.$$.dirty&&(e=p,xe.set_volume(e)),1&t.$$.dirty&&(o=_,xe.set_tempo(o)),1024&t.$$.dirty&&n(3,r=l?"pause":"play")},[_,p,d,r,o,s,function(){i(),Kn.toggleTheme()},function(){n(10,l=!l),l&&xe.play(),console.log(r)},function(){xe.stop(),n(10,l=!1),console.log("Stop Button Clikced")},function(){console.log(d?"graph":"timeline")},l,function(t){d=t,n(2,d)},function(t){_=t,n(0,_)},function(t){p=t,n(1,p)}]}class Yr extends yt{constructor(t){super(),vt(this,t,Vr,Hr,i,{})}}
/*!
     * css-vars-ponyfill
     * v2.4.7
     * https://jhildenbiddle.github.io/css-vars-ponyfill/
     * (c) 2018-2021 John Hildenbiddle <http://hildenbiddle.com>
     * MIT license
     */function Ur(){return Ur=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ur.apply(this,arguments)}
/*!
     * get-css-data
     * v2.0.2
     * https://github.com/jhildenbiddle/get-css-data
     * (c) 2018-2021 John Hildenbiddle <http://hildenbiddle.com>
     * MIT license
     */function Xr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mimeType:e.mimeType||null,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},r=Array.isArray(t)?t:[t],o=Array.apply(null,Array(r.length)).map((function(t){return null}));function i(t){var e="string"==typeof t,n=e&&"<"===t.trim().charAt(0);return e&&!n}function s(t,e){n.onError(t,r[e],e)}function a(t,e){var i=n.onSuccess(t,r[e],e);t=!1===i?"":i||t,o[e]=t,-1===o.indexOf(null)&&n.onComplete(o)}var c=document.createElement("a");r.forEach((function(t,e){if(c.setAttribute("href",t),c.href=String(c.href),Boolean(document.all&&!window.atob)&&c.host.split(":")[0]!==location.host.split(":")[0]){if(c.protocol===location.protocol){var r=new XDomainRequest;r.open("GET",t),r.timeout=0,r.onprogress=Function.prototype,r.ontimeout=Function.prototype,r.onload=function(){var t=r.responseText;i(t)?a(t,e):s(r,e)},r.onerror=function(t){s(r,e)},setTimeout((function(){r.send()}),0)}else console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(t,")")),s(null,e)}else{var o=new XMLHttpRequest;o.open("GET",t),n.mimeType&&o.overrideMimeType&&o.overrideMimeType(n.mimeType),n.onBeforeSend(o,t,e),o.onreadystatechange=function(){if(4===o.readyState){var t=o.responseText;o.status<400&&i(t)||0===o.status&&i(t)?a(t,e):s(o,e)}},o.send()}}))}
/**
     * Gets CSS data from <style> and <link> nodes (including @imports), then
     * returns data in order processed by DOM. Allows specifying nodes to
     * include/exclude and filtering CSS data using RegEx.
     *
     * @preserve
     * @param {object}   [options] The options object
     * @param {object}   [options.rootElement=document] Root element to traverse for
     *                   <link> and <style> nodes.
     * @param {string}   [options.include] CSS selector matching <link> and <style>
     *                   nodes to include
     * @param {string}   [options.exclude] CSS selector matching <link> and <style>
     *                   nodes to exclude
     * @param {object}   [options.filter] Regular expression used to filter node CSS
     *                   data. Each block of CSS data is tested against the filter,
     *                   and only matching data is included.
     * @param {boolean}  [options.skipDisabled=true] Determines if disabled
     *                   stylesheets will be skipped while collecting CSS data.
     * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be
     *                   collected from a stylesheet's runtime values instead of its
     *                   text content. This is required to get accurate CSS data
     *                   when a stylesheet has been modified using the deleteRule()
     *                   or insertRule() methods because these modifications will
     *                   not be reflected in the stylesheet's text content.
     * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
     *                   1) the XHR object, 2) source node reference, and 3) the
     *                   source URL as arguments.
     * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
     *                   1) CSS text, 2) source node reference, and 3) the source
     *                   URL as arguments.
     * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
     *                   object for inspection, 2) soure node reference, and 3) the
     *                   source URL that failed (either a <link> href or an @import)
     *                   as arguments
     * @param {function} [options.onComplete] Callback after all nodes have been
     *                   processed. Passes 1) concatenated CSS text, 2) an array of
     *                   CSS text in DOM order, and 3) an array of nodes in DOM
     *                   order as arguments.
     *
     * @example
     *
     *   getCssData({
     *     rootElement : document,
     *     include     : 'style,link[rel="stylesheet"]',
     *     exclude     : '[href="skip.css"]',
     *     filter      : /red/,
     *     skipDisabled: true,
     *     useCSSOM    : false,
     *     onBeforeSend(xhr, node, url) {
     *       // ...
     *     }
     *     onSuccess(cssText, node, url) {
     *       // ...
     *     }
     *     onError(xhr, node, url) {
     *       // ...
     *     },
     *     onComplete(cssText, cssArray, nodeArray) {
     *       // ...
     *     }
     *   });
     */function Kr(t){var e=/\/\*[\s\S]+?\*\//g,n=/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g,r={rootElement:t.rootElement||document,include:t.include||'style,link[rel="stylesheet"]',exclude:t.exclude||null,filter:t.filter||null,skipDisabled:!1!==t.skipDisabled,useCSSOM:t.useCSSOM||!1,onBeforeSend:t.onBeforeSend||Function.prototype,onSuccess:t.onSuccess||Function.prototype,onError:t.onError||Function.prototype,onComplete:t.onComplete||Function.prototype},o=Array.apply(null,r.rootElement.querySelectorAll(r.include)).filter((function(t){return e=t,n=r.exclude,!(e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector).call(e,n);var e,n})),i=Array.apply(null,Array(o.length)).map((function(t){return null}));function s(){if(-1===i.indexOf(null)){i.reduce((function(t,e,n){return""===e&&t.push(n),t}),[]).reverse().forEach((function(t){return[o,i].forEach((function(e){return e.splice(t,1)}))}));var t=i.join("");r.onComplete(t,i,o)}}function a(t,e,n,o){var a=r.onSuccess(t,n,o);l(t=void 0!==a&&!1===Boolean(a)?"":a||t,n,o,(function(t,o){null===i[e]&&(o.forEach((function(t){return r.onError(t.xhr,n,t.url)})),!r.filter||r.filter.test(t)?i[e]=t:i[e]="",s())}))}function c(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={};return i.rules=(t.replace(e,"").match(n)||[]).filter((function(t){return-1===o.indexOf(t)})),i.urls=i.rules.map((function(t){return t.replace(n,"$1")})),i.absoluteUrls=i.urls.map((function(t){return Gr(t,r)})),i.absoluteRules=i.rules.map((function(t,e){var n=i.urls[e],o=Gr(i.absoluteUrls[e],r);return t.replace(n,o)})),i}function l(t,e,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=c(t,n,s);a.rules.length?Xr(a.absoluteUrls,{onBeforeSend:function(t,n,o){r.onBeforeSend(t,e,n)},onSuccess:function(t,n,o){var i=r.onSuccess(t,e,n),a=c(t=!1===i?"":i||t,n,s);return a.rules.forEach((function(e,n){t=t.replace(e,a.absoluteRules[n])})),t},onError:function(r,c,u){i.push({xhr:r,url:c}),s.push(a.rules[u]),l(t,e,n,o,i,s)},onComplete:function(r){r.forEach((function(e,n){t=t.replace(a.rules[n],e)})),l(t,e,n,o,i,s)}}):o(t,i)}o.length?o.forEach((function(t,e){var n=t.getAttribute("href"),o=t.getAttribute("rel"),c="link"===t.nodeName.toLowerCase()&&n&&o&&-1!==o.toLowerCase().indexOf("stylesheet"),l=!1!==r.skipDisabled&&t.disabled,u="style"===t.nodeName.toLowerCase();if(c&&!l)Xr(n,{mimeType:"text/css",onBeforeSend:function(e,n,o){r.onBeforeSend(e,t,n)},onSuccess:function(r,o,i){var s=Gr(n);a(r,e,t,s)},onError:function(n,o,a){i[e]="",r.onError(n,t,o),s()}});else if(u&&!l){var d=t.textContent;r.useCSSOM&&(d=Array.apply(null,t.sheet.cssRules).map((function(t){return t.cssText})).join("")),a(d,e,t,location.href)}else i[e]="",s()})):r.onComplete("",[])}function Gr(t,e){var n=document.implementation.createHTMLDocument(""),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),r.href=e||document.baseURI||(document.querySelector("base")||{}).href||location.href,o.href=t,o.href}var Jr=Zr;function Zr(t,e,n){t instanceof RegExp&&(t=Qr(t,n)),e instanceof RegExp&&(e=Qr(e,n));var r=to(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function Qr(t,e){var n=e.match(t);return n?n[0]:null}function to(t,e,n){var r,o,i,s,a,c=n.indexOf(t),l=n.indexOf(e,c+1),u=c;if(c>=0&&l>0){if(t===e)return[c,l];for(r=[],i=n.length;u>=0&&!a;)u==c?(r.push(u),c=n.indexOf(t,u+1)):1==r.length?a=[r.pop(),l]:((o=r.pop())<i&&(i=o,s=l),l=n.indexOf(e,u+1)),u=c<l&&c>=0?c:l;r.length&&(a=[i,s])}return a}function eo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={preserveStatic:!0,removeComments:!1},r=Ur({},n,e),o=[];function i(t){throw new Error("CSS parse error: ".concat(t))}function s(e){var n=e.exec(t);if(n)return t=t.slice(n[0].length),n}function a(){return s(/^{\s*/)}function c(){return s(/^}/)}function l(){s(/^\s*/)}function u(){if(l(),"/"===t[0]&&"*"===t[1]){for(var e=2;t[e]&&("*"!==t[e]||"/"!==t[e+1]);)e++;if(!t[e])return i("end of comment is missing");var n=t.slice(2,e);return t=t.slice(e+2),{type:"comment",comment:n}}}function d(){for(var t,e=[];t=u();)e.push(t);return r.removeComments?[]:e}function _(){for(l();"}"===t[0];)i("extra closing bracket");var e=s(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(e){var n,r=e[0].trim();/\/\*/.test(r)&&(r=r.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,""));var o=/["']\w*,\w*["']/.test(r);return o&&(r=r.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(t){return t.replace(/,/g,"‌")}))),n=/,/.test(r)?r.split(/\s*(?![^(]*\)),\s*/):[r],o&&(n=n.map((function(t){return t.replace(/\u200C/g,",")}))),n}}function p(){if("@"===t[0])return E();s(/^([;\s]*)+/);var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=s(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);if(n){if(n=n[0].trim(),!s(/^:\s*/))return i("property missing ':'");var r=s(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),o={type:"declaration",property:n.replace(e,""),value:r?r[0].replace(e,"").trim():""};return s(/^[;\s]*/),o}}function f(){if(!a())return i("missing '{'");for(var t,e=d();t=p();)e.push(t),e=e.concat(d());return c()?e:i("missing '}'")}function m(){l();for(var t,e=[];t=s(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)e.push(t[1]),s(/^,\s*/);if(e.length)return{type:"keyframe",values:e,declarations:f()}}function g(){var t=s(/^@([-\w]+)?keyframes\s*/);if(t){var e=t[1];if(!(t=s(/^([-\w]+)\s*/)))return i("@keyframes missing name");var n,r=t[1];if(!a())return i("@keyframes missing '{'");for(var o=d();n=m();)o.push(n),o=o.concat(d());return c()?{type:"keyframes",name:r,vendor:e,keyframes:o}:i("@keyframes missing '}'")}}function h(){if(s(/^@page */))return{type:"page",selectors:_()||[],declarations:f()}}function b(){var t=s(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(t)return{type:"page-margin-box",name:"".concat(t[1],"-").concat(t[2])+(t[3]?"-".concat(t[3]):""),declarations:f()}}function v(){if(s(/^@font-face\s*/))return{type:"font-face",declarations:f()}}function y(){var t=s(/^@supports *([^{]+)/);if(t)return{type:"supports",supports:t[1].trim(),rules:C()}}function w(){if(s(/^@host\s*/))return{type:"host",rules:C()}}function $(){var t=s(/^@media([^{]+)*/);if(t)return{type:"media",media:(t[1]||"").trim(),rules:C()}}function k(){var t=s(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return{type:"custom-media",name:t[1].trim(),media:t[2].trim()}}function x(){var t=s(/^@([-\w]+)?document *([^{]+)/);if(t)return{type:"document",document:t[2].trim(),vendor:t[1]?t[1].trim():null,rules:C()}}function j(){var t=s(/^@(import|charset|namespace)\s*([^;]+);/);if(t)return{type:t[1],name:t[2].trim()}}function E(){if(l(),"@"===t[0]){var e=j()||v()||$()||g()||y()||x()||k()||w()||h()||b();if(e&&!r.preserveStatic){var n=!1;if(e.declarations)n=e.declarations.some((function(t){return/var\(/.test(t.value)}));else n=(e.keyframes||e.rules||[]).some((function(t){return(t.declarations||[]).some((function(t){return/var\(/.test(t.value)}))}));return n?e:{}}return e}}function S(){if(!r.preserveStatic){var e=Jr("{","}",t);if(e){var n=/:(?:root|host)(?![.:#(])/.test(e.pre)&&/--\S*\s*:/.test(e.body),o=/var\(/.test(e.body);if(!n&&!o)return t=t.slice(e.end+1),{}}}var s=_()||[],a=r.preserveStatic?f():f().filter((function(t){var e=s.some((function(t){return/:(?:root|host)(?![.:#(])/.test(t)}))&&/^--\S/.test(t.property),n=/var\(/.test(t.value);return e||n}));return s.length||i("selector missing"),{type:"rule",selectors:s,declarations:a}}function C(e){if(!e&&!a())return i("missing '{'");for(var n,r=d();t.length&&(e||"}"!==t[0])&&(n=E()||S());)n.type&&r.push(n),r=r.concat(d());return e||c()?r:i("missing '}'")}return{type:"stylesheet",stylesheet:{rules:C(!0),errors:o}}}function no(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={parseHost:!1,store:{},onWarning:function(){}},r=Ur({},n,e),o=new RegExp(":".concat(r.parseHost?"host":"root","$"));return"string"==typeof t&&(t=eo(t,r)),t.stylesheet.rules.forEach((function(t){"rule"===t.type&&t.selectors.some((function(t){return o.test(t)}))&&t.declarations.forEach((function(t,e){var n=t.property,o=t.value;n&&0===n.indexOf("--")&&(r.store[n]=o)}))})),r.store}function ro(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r={charset:function(t){return"@charset "+t.name+";"},comment:function(t){return 0===t.comment.indexOf("__CSSVARSPONYFILL")?"/*"+t.comment+"*/":""},"custom-media":function(t){return"@custom-media "+t.name+" "+t.media+";"},declaration:function(t){return t.property+":"+t.value+";"},document:function(t){return"@"+(t.vendor||"")+"document "+t.document+"{"+o(t.rules)+"}"},"font-face":function(t){return"@font-face{"+o(t.declarations)+"}"},host:function(t){return"@host{"+o(t.rules)+"}"},import:function(t){return"@import "+t.name+";"},keyframe:function(t){return t.values.join(",")+"{"+o(t.declarations)+"}"},keyframes:function(t){return"@"+(t.vendor||"")+"keyframes "+t.name+"{"+o(t.keyframes)+"}"},media:function(t){return"@media "+t.media+"{"+o(t.rules)+"}"},namespace:function(t){return"@namespace "+t.name+";"},page:function(t){return"@page "+(t.selectors.length?t.selectors.join(", "):"")+"{"+o(t.declarations)+"}"},"page-margin-box":function(t){return"@"+t.name+"{"+o(t.declarations)+"}"},rule:function(t){var e=t.declarations;if(e.length)return t.selectors.join(",")+"{"+o(e)+"}"},supports:function(t){return"@supports "+t.supports+"{"+o(t.rules)+"}"}};function o(t){for(var o="",i=0;i<t.length;i++){var s=t[i];n&&n(s);var a=r[s.type](s);a&&(o+=a,a.length&&s.selectors&&(o+=e))}return o}return o(t.stylesheet.rules)}function oo(t,e){t.rules.forEach((function(n){n.rules?oo(n,e):n.keyframes?n.keyframes.forEach((function(t){"keyframe"===t.type&&e(t.declarations,n)})):n.declarations&&e(n.declarations,t)}))}Zr.range=to;function io(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={preserveStatic:!0,preserveVars:!1,variables:{},onWarning:function(){}},r=Ur({},n,e);return"string"==typeof t&&(t=eo(t,r)),oo(t.stylesheet,(function(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=o.type,s=o.property,a=o.value;if("declaration"===i)if(r.preserveVars||!s||0!==s.indexOf("--")){if(-1!==a.indexOf("var(")){var c=ao(a,r);c!==o.value&&(c=so(c),r.preserveVars?(t.splice(n,0,{type:i,property:s,value:c}),n++):o.value=c)}}else t.splice(n,1),n--}})),ro(t)}function so(t){return(t.match(/calc\(([^)]+)\)/g)||[]).forEach((function(e){var n="calc".concat(e.split("calc").join(""));t=t.replace(e,n)})),t}function ao(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(-1===t.indexOf("var("))return t;var r=Jr("(",")",t);function o(t){var r=t.split(",")[0].replace(/[\s\n\t]/g,""),o=(t.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],i=Object.prototype.hasOwnProperty.call(e.variables,r)?String(e.variables[r]):void 0,s=i||(o?String(o):void 0),a=n||t;return i||e.onWarning('variable "'.concat(r,'" is undefined')),s&&"undefined"!==s&&s.length>0?ao(s,e,a):"var(".concat(a,")")}if(r){if("var"===r.pre.slice(-3)){var i=0===r.body.trim().length;return i?(e.onWarning("var() must contain a non-whitespace string"),t):r.pre.slice(0,-3)+o(r.body)+ao(r.post,e)}return r.pre+"(".concat(ao(r.body,e),")")+ao(r.post,e)}return-1!==t.indexOf("var(")&&e.onWarning('missing closing ")" in the value "'.concat(t,'"')),t}var co="undefined"!=typeof window,lo=co&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),uo={group:0,job:0},_o={rootElement:co?document:null,shadowDOM:!1,include:"style,link[rel=stylesheet]",exclude:"",variables:{},onlyLegacy:!0,preserveStatic:!0,preserveVars:!1,silent:!1,updateDOM:!0,updateURLs:!0,watch:null,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},po={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},fo={dom:{},job:{},user:{}},mo=!1,go=null,ho=0,bo=null,vo=!1;
/**
     * Fetches, parses, and transforms CSS custom properties from specified
     * <style> and <link> elements into static values, then appends a new <style>
     * element with static values to the DOM to provide CSS custom property
     * compatibility for legacy browsers. Also provides a single interface for
     * live updates of runtime values in both modern and legacy browsers.
     *
     * @preserve
     * @param {object}   [options] Options object
     * @param {object}   [options.rootElement=document] Root element to traverse for
     *                   <link> and <style> nodes
     * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
     *                   and <style> nodes will be processed.
     * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
     *                   matching <link re="stylesheet"> and <style> nodes to
     *                   process
     * @param {string}   [options.exclude] CSS selector matching <link
     *                   rel="stylehseet"> and <style> nodes to exclude from those
     *                   matches by options.include
     * @param {object}   [options.variables] A map of custom property name/value
     *                   pairs. Property names can omit or include the leading
     *                   double-hyphen (—), and values specified will override
     *                   previous values
     * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
     *                   only generate legacy-compatible CSS in browsers that lack
     *                   native support (i.e., legacy browsers)
     * @param {boolean}  [options.preserveStatic=true] Determines if CSS
     *                   declarations that do not reference a custom property will
     *                   be preserved in the transformed CSS
     * @param {boolean}  [options.preserveVars=false] Determines if CSS custom
     *                   property declarations will be preserved in the transformed
     *                   CSS
     * @param {boolean}  [options.silent=false] Determines if warning and error
     *                   messages will be displayed on the console
     * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
     *                   update the DOM after processing CSS custom properties
     * @param {boolean}  [options.updateURLs=true] Determines if relative url()
     *                   paths will be converted to absolute urls in external CSS
     * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
     *                   be created that will execute the ponyfill when a <link> or
     *                   <style> DOM mutation is observed
     * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
     *                   1) the XHR object, 2) source node reference, and 3) the
     *                   source URL as arguments
     * @param {function} [options.onError] Callback after a CSS parsing error has
     *                   occurred or an XHR request has failed. Passes 1) an error
     *                   message, and 2) source node reference, 3) xhr, and 4 url as
     *                   arguments.
     * @param {function} [options.onWarning] Callback after each CSS parsing warning
     *                   has occurred. Passes 1) a warning message as an argument.
     * @param {function} [options.onSuccess] Callback after CSS data has been
     *                   collected from each node and before CSS custom properties
     *                   have been transformed. Allows modifying the CSS data before
     *                   it is transformed by returning any string value (or false
     *                   to skip). Passes 1) CSS text, 2) source node reference, and
     *                   3) the source URL as arguments.
     * @param {function} [options.onComplete] Callback after all CSS has been
     *                   processed, legacy-compatible CSS has been generated, and
     *                   (optionally) the DOM has been updated. Passes 1) a CSS
     *                   string with CSS variable values resolved, 2) an array of
     *                   output <style> node references that have been appended to
     *                   the DOM, 3) an object containing all custom properies names
     *                   and values, and 4) the ponyfill execution time in
     *                   milliseconds.
     * @param {function} [options.onFinally] Callback in modern and legacy browsers
     *                   after the ponyfill has finished all tasks. Passes 1) a
     *                   boolean indicating if the last ponyfill call resulted in a
     *                   style change, 2) a boolean indicating if the current
     *                   browser provides native support for CSS custom properties,
     *                   and 3) the ponyfill execution time in milliseconds.
     * @example
     *
     *   cssVars({
     *     rootElement   : document,
     *     shadowDOM     : false,
     *     include       : 'style,link[rel="stylesheet"]',
     *     exclude       : '',
     *     variables     : {},
     *     onlyLegacy    : true,
     *     preserveStatic: true,
     *     preserveVars  : false,
     *     silent        : false,
     *     updateDOM     : true,
     *     updateURLs    : true,
     *     watch         : false,
     *     onBeforeSend(xhr, node, url) {},
     *     onError(message, node, xhr, url) {},
     *     onWarning(message) {},
     *     onSuccess(cssText, node, url) {},
     *     onComplete(cssText, styleNode, cssVariables, benchmark) {},
     *     onFinally(hasChanged, hasNativeSupport, benchmark)
     *   });
     */
function yo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="cssVars(): ",n=Ur({},_o,t);function r(t,r,o,i){!n.silent&&window.console&&console.error("".concat(e).concat(t,"\n"),r),n.onError(t,r,o,i)}function o(t){!n.silent&&window.console&&console.warn("".concat(e).concat(t)),n.onWarning(t)}function i(t){n.onFinally(Boolean(t),lo,So()-n.__benchmark)}if(co){if(n.watch)return n.watch=_o.watch,wo(n),void yo(n);if(!1===n.watch&&go&&(go.disconnect(),go=null),!n.__benchmark){if(mo===n.rootElement)return void $o(t);var s=[].slice.call(n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));if(n.__benchmark=So(),n.exclude=[go?'[data-cssvars]:not([data-cssvars=""])':'[data-cssvars="out"]',"link[disabled]:not([data-cssvars])",n.exclude].filter((function(t){return t})).join(","),n.variables=jo(n.variables),s.forEach((function(t){var e="style"===t.nodeName.toLowerCase()&&t.__cssVars.text,n=e&&t.textContent!==t.__cssVars.text;e&&n&&(t.sheet&&(t.sheet.disabled=!1),t.setAttribute("data-cssvars",""))})),!go){var a=[].slice.call(n.rootElement.querySelectorAll('[data-cssvars="out"]'));a.forEach((function(t){var e=t.getAttribute("data-cssvars-group");(e?n.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(e,'"]')):null)||t.parentNode.removeChild(t)})),ho&&s.length<ho&&(ho=s.length,fo.dom={})}}if("loading"!==document.readyState)if(lo&&n.onlyLegacy){var c=!1;if(n.updateDOM){var l=n.rootElement.host||(n.rootElement===document?document.documentElement:n.rootElement);Object.keys(n.variables).forEach((function(t){var e=n.variables[t];c=c||e!==getComputedStyle(l).getPropertyValue(t),l.style.setProperty(t,e)}))}i(c)}else!vo&&(n.shadowDOM||n.rootElement.shadowRoot||n.rootElement.host)?Kr({rootElement:_o.rootElement,include:_o.include,exclude:n.exclude,skipDisabled:!1,onSuccess:function(t,e,n){return!((e.sheet||{}).disabled&&!e.__cssVars)&&((t=((t=t.replace(po.cssComments,"").replace(po.cssMediaQueries,"")).match(po.cssVarDeclRules)||[]).join(""))||!1)},onComplete:function(t,e,r){no(t,{store:fo.dom,onWarning:o}),vo=!0,yo(n)}}):(mo=n.rootElement,Kr({rootElement:n.rootElement,include:n.include,exclude:n.exclude,skipDisabled:!1,onBeforeSend:n.onBeforeSend,onError:function(t,e,n){var o=t.responseURL||Eo(n,location.href),i=t.statusText?"(".concat(t.statusText,")"):"Unspecified Error"+(0===t.status?" (possibly CORS related)":"");r("CSS XHR Error: ".concat(o," ").concat(t.status," ").concat(i),e,t,o)},onSuccess:function(t,e,r){if((e.sheet||{}).disabled&&!e.__cssVars)return!1;var o="link"===e.nodeName.toLowerCase(),i="style"===e.nodeName.toLowerCase()&&t!==e.textContent,s=n.onSuccess(t,e,r);return t=void 0!==s&&!1===Boolean(s)?"":s||t,n.updateURLs&&(o||i)&&(t=xo(t,r)),t},onComplete:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=Ur({},fo.dom,fo.user);if(fo.job={},s.forEach((function(t,i){var s=e[i];if(t.__cssVars=t.__cssVars||{},t.__cssVars.text=s,po.cssVars.test(s))try{var a=eo(s,{preserveStatic:n.preserveStatic,removeComments:!0});no(a,{parseHost:Boolean(n.rootElement.host),store:fo.dom,onWarning:o}),t.__cssVars.tree=a}catch(e){r(e.message,t)}})),Ur(fo.job,fo.dom),n.updateDOM?(Ur(fo.user,n.variables),Ur(fo.job,fo.user)):(Ur(fo.job,fo.user,n.variables),Ur(a,n.variables)),uo.job>0&&Boolean(Object.keys(fo.job).length>Object.keys(a).length||Boolean(Object.keys(a).length&&Object.keys(fo.job).some((function(t){return fo.job[t]!==a[t]})))))Co(n.rootElement),yo(n);else{var c=[],l=[],u=!1;if(n.updateDOM&&uo.job++,s.forEach((function(t,i){var s=!t.__cssVars.tree;if(t.__cssVars.tree)try{io(t.__cssVars.tree,Ur({},n,{variables:fo.job,onWarning:o}));var a=ro(t.__cssVars.tree);if(n.updateDOM){var d=e[i],_=po.cssVarFunc.test(d);if(t.getAttribute("data-cssvars")||t.setAttribute("data-cssvars","src"),a.length&&_){var p=t.getAttribute("data-cssvars-group")||++uo.group,f=a.replace(/\s/g,""),m=n.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(p,'"]'))||document.createElement("style");u=u||po.cssKeyframes.test(a),n.preserveStatic&&t.sheet&&(t.sheet.disabled=!0),m.hasAttribute("data-cssvars")||m.setAttribute("data-cssvars","out"),f===t.textContent.replace(/\s/g,"")?(s=!0,m&&m.parentNode&&(t.removeAttribute("data-cssvars-group"),m.parentNode.removeChild(m))):f!==m.textContent.replace(/\s/g,"")&&([t,m].forEach((function(t){t.setAttribute("data-cssvars-job",uo.job),t.setAttribute("data-cssvars-group",p)})),m.textContent=a,c.push(a),l.push(m),m.parentNode||t.parentNode.insertBefore(m,t.nextSibling))}}else t.textContent.replace(/\s/g,"")!==a&&c.push(a)}catch(e){r(e.message,t)}s&&t.setAttribute("data-cssvars","skip"),t.hasAttribute("data-cssvars-job")||t.setAttribute("data-cssvars-job",uo.job)})),ho=n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,n.shadowDOM)for(var d,_=[].concat(n.rootElement).concat([].slice.call(n.rootElement.querySelectorAll("*"))),p=0;d=_[p];++p)if(d.shadowRoot&&d.shadowRoot.querySelector("style")){var f=Ur({},n,{rootElement:d.shadowRoot});yo(f)}n.updateDOM&&u&&ko(n.rootElement),mo=!1,n.onComplete(c.join(""),l,JSON.parse(JSON.stringify(fo.job)),So()-n.__benchmark),i(l.length)}}}));else document.addEventListener("DOMContentLoaded",(function e(n){yo(t),document.removeEventListener("DOMContentLoaded",e)}))}}function wo(t){function e(t){var e=n(t)&&t.hasAttribute("disabled"),r=(t.sheet||{}).disabled;return e||r}function n(t){return"link"===t.nodeName.toLowerCase()&&-1!==(t.getAttribute("rel")||"").indexOf("stylesheet")}function r(t){return"style"===t.nodeName.toLowerCase()}window.MutationObserver&&(go&&(go.disconnect(),go=null),(go=new MutationObserver((function(o){o.some((function(o){return function(r){var o=!1;if("attributes"===r.type&&n(r.target)&&!e(r.target)){var i="disabled"===r.attributeName,s="href"===r.attributeName,a="skip"===r.target.getAttribute("data-cssvars"),c="src"===r.target.getAttribute("data-cssvars");i?o=!a&&!c:s&&(a?r.target.setAttribute("data-cssvars",""):c&&Co(t.rootElement,!0),o=!0)}return o}(o)||function(t){var e=!1;if("childList"===t.type){var n=r(t.target),o="out"===t.target.getAttribute("data-cssvars");e=n&&!o}return e}(o)||function(t){var o=!1;return"childList"===t.type&&(o=[].slice.call(t.addedNodes).some((function(t){var o=1===t.nodeType&&t.hasAttribute("data-cssvars"),i=r(t)&&po.cssVars.test(t.textContent);return!o&&(n(t)||i)&&!e(t)}))),o}(o)||function(e){var n=!1;return"childList"===e.type&&(n=[].slice.call(e.removedNodes).some((function(e){var n=1===e.nodeType,r=n&&"out"===e.getAttribute("data-cssvars"),o=n&&"src"===e.getAttribute("data-cssvars"),i=o;if(o||r){var s=e.getAttribute("data-cssvars-group"),a=t.rootElement.querySelector('[data-cssvars-group="'.concat(s,'"]'));o&&Co(t.rootElement,!0),a&&a.parentNode.removeChild(a)}return i}))),n}(o)}))&&yo(t)}))).observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0}))}function $o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;clearTimeout(bo),bo=setTimeout((function(){t.__benchmark=null,yo(t)}),e)}function ko(t){var e=["animation-name","-moz-animation-name","-webkit-animation-name"].filter((function(t){return getComputedStyle(document.body)[t]}))[0];if(e){for(var n=t.getElementsByTagName("*"),r=[],o="__CSSVARSPONYFILL-KEYFRAMES__",i=0,s=n.length;i<s;i++){var a=n[i];"none"!==getComputedStyle(a)[e]&&(a.style[e]+=o,r.push(a))}document.body.offsetHeight;for(var c=0,l=r.length;c<l;c++){var u=r[c].style;u[e]=u[e].replace(o,"")}}}function xo(t,e){return(t.replace(po.cssComments,"").match(po.cssUrls)||[]).forEach((function(n){var r=n.replace(po.cssUrls,"$1"),o=Eo(r,e);t=t.replace(n,n.replace(r,o))})),t}function jo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=/^-{2}/;return Object.keys(t).reduce((function(n,r){return n[e.test(r)?r:"--".concat(r.replace(/^-+/,""))]=t[r],n}),{})}function Eo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,n=document.implementation.createHTMLDocument(""),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),r.href=e,o.href=t,o.href}function So(){return co&&(window.performance||{}).now?window.performance.now():(new Date).getTime()}function Co(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[].slice.call(t.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));n.forEach((function(t){return t.setAttribute("data-cssvars","")})),e&&(fo.dom={})}yo.reset=function(){for(var t in uo.job=0,uo.group=0,mo=!1,go&&(go.disconnect(),go=null),ho=0,bo=null,vo=!1,fo)fo[t]={}};const Ao={light:{colors:{text:"#282230",background:{_:"#f1f1f1",contrast:"#b1b1b1"},primary:"#01796f",primary_dark:"#016159",secondary:"#562931"}},dark:{colors:{text:"#f1f1f1",background:{_:"#27323a",contrast:"#0d1215"},primary:"#01978b",primary_dark:"#00887c",secondary:"#fe8690"}},forest:{colors:{text:"#f9f2cf",background:{_:"#3b6c4c",contrast:"#1d492c"},primary:"#efdc7e",primary_dark:"#e4d589",secondary:"#4a875f"}}},Mo=qt(),qo=qt(),Oo=qt(),To=qt();function Do(){let t=l(To);qo.update((e=>Object.keys(t).reduce(((t,n,r,o)=>n===e?o[r+1]?o[r+1]:o[0]:t),"")))}function Fo(t){const e={},n=(t,r)=>{for(let o in t){const i=t[o],s=(r?`${r}-${o}`:o).replace(/-_$/g,"").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase();i&&"object"==typeof i?n(i,s):e[s]=i}};return n(t),e}const{document:Lo}=dt;function Bo(t){let e,n,r,o;const i=t[9].default,s=function(t,e,n,r){if(t){const o=d(t,e,n,r);return t[0](o)}}(i,t,t[8],null);return{c(){e=new P,n=C(),r=S(),s&&s.c(),e.a=n},m(i,a){e.m(t[0],Lo.head),y(Lo.head,n),w(i,r,a),s&&s.m(i,a),o=!0},p(t,[e]){s&&s.p&&(!o||256&e)&&function(t,e,n,r,o,i){if(o){const s=d(e,n,r,i);t.p(s,o)}}(s,i,t,t[8],o?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(i,t[8],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[8]),null)},i(t){o||(lt(s,t),o=!0)},o(t){ut(s,t),o=!1},d(t){$(n),t&&e.d(),t&&$(r),s&&s.d(t)}}}const Io="__svelte-themer__theme",No="theme",zo=["auto","light","dark"],Po=`Invalid mode string supplied, must be one of: ${zo.join(", ")}`;function Ro(t,e,n){let r;u(t,qo,(t=>n(7,r=t)));let{$$slots:o={},$$scope:i}=e,{key:s=Io}=e,{themes:a=Ao}=e,{theme:c=null}=e,{prefix:d=No}=e,{mode:_="auto"}=e,{base:p={}}=e;if(f=a,"[object Object]"!==Object.prototype.toString.call(f)||!Object.keys(a).length)throw new Error("Invalid themes object supplied");var f;if("string"==typeof d&&!d.trim().length)throw new Error("Invalid prefix string supplied");if(!zo.includes(_))throw new Error(Po);To.set(a);const[m]=Object.keys(a),g=function(t,e={}){const n=t?`--${t}`:"-";function r(t,e){return e?`${n}-${e}-${t}`:`${n}-${t}`}function o(t,e,r){return`${n}-${e}: var(${n}-${r}-${e});`}const i=l(To),s=Fo(e),a=Object.entries(s).map((([t,e])=>[r(t),e])),c=[].concat(a),u=[];for(let[e,n]of Object.entries(i)){const i=Fo(n),s=[];for(let[t,n]of Object.entries(i)){const i=r(t);c.some((([t])=>t===i))||c.push([i,n]),c.push([r(t,e),n]),s.push(o(r(t),t,e))}const a=t?`${t}--${e}`:e;u.push(`\n      [theme='${e}'],\n      .${a} {\n        ${s.join("\n\t")}\n      }\n    `)}return`\n    <style>\n      :root {\n        ${c.map((t=>function(t,e){return`${t}: ${e};`}(...t))).join("\n\t")}\n      }\n\n      ${u.join("")}\n    </style>\n  `.trim()}(d,p);var h;return function(t,e){H().$$.context.set(t,e)}("theme",{current:qo,toggle:Do,theme:qo}),W((()=>{const t=matchMedia("(prefers-color-scheme: dark)"),e=t.matches?"dark":"light";t.addEventListener("change",(({matches:t})=>"auto"===_&&Mo.set(t?"dark":"light")));const n=s?localStorage&&localStorage.getItem(s):null;return c&&a[c]?qo.set(c):n&&a[n]?qo.set(n):"auto"===_&&e?qo.set(e):["light","dark"].includes(_)&&a[_]?qo.set(_):qo.set(m),()=>s&&localStorage&&localStorage.setItem(s,r)})),h=()=>{document&&document.documentElement.setAttribute("theme",r),s&&localStorage&&localStorage.setItem(s,r)},H().$$.after_update.push(h),t.$$set=t=>{"key"in t&&n(1,s=t.key),"themes"in t&&n(2,a=t.themes),"theme"in t&&n(3,c=t.theme),"prefix"in t&&n(4,d=t.prefix),"mode"in t&&n(5,_=t.mode),"base"in t&&n(6,p=t.base),"$$scope"in t&&n(8,i=t.$$scope)},t.$$.update=()=>{132&t.$$.dirty&&(Object.keys(a).includes(r)||qo.set(m)),132&t.$$.dirty&&Oo.set(a[r])},[g,s,a,c,d,_,p,r,i,o]}var Ho=class extends yt{constructor(t){super(),vt(this,t,Ro,Bo,i,{key:1,themes:2,theme:3,prefix:4,mode:5,base:6})}};function Wo(t){let e,n;return e=new Me({}),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Vo(t){let e,n;return e=new Cn({}),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Yo(e){let n,r;return n=new yn({}),{c(){mt(n.$$.fragment)},m(t,e){gt(n,t,e),r=!0},p:t,i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ut(n.$$.fragment,t),r=!1},d(t){ht(n,t)}}}function Uo(t){let e,n;return e=new ir({props:{scrollY:t[0]}}),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.scrollY=t[0]),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Xo(t){let e,n,r,o,i,s,a,c,l,u,d,_,p,f,m,g;n=new Yr({});let h=t[1]&&Wo(),b=!t[1]&&Vo();c=new vr({});const v=[Uo,Yo],k=[];function j(t,e){return t[1]?0:1}return u=j(t),d=k[u]=v[u](t),{c(){e=x("main"),mt(n.$$.fragment),r=S(),o=x("div"),h&&h.c(),i=S(),b&&b.c(),s=S(),a=x("div"),mt(c.$$.fragment),l=S(),d.c(),_=S(),p=x("div"),p.innerHTML='<h1 class="svelte-k772c5">Nema Studio</h1> \n        <p class="svelte-k772c5">Currently only available on desktop</p>',O(a,"class","main-content svelte-k772c5"),O(o,"class","content-container svelte-k772c5"),O(e,"class","svelte-k772c5"),O(p,"id","mobile-easteregg"),O(p,"class","svelte-k772c5")},m(d,v){w(d,e,v),gt(n,e,null),y(e,r),y(e,o),h&&h.m(o,null),y(o,i),b&&b.m(o,null),y(o,s),y(o,a),gt(c,a,null),y(a,l),k[u].m(a,null),w(d,_,v),w(d,p,v),f=!0,m||(g=A(a,"scroll",t[2]),m=!0)},p(t,e){t[1]?h?2&e&&lt(h,1):(h=Wo(),h.c(),lt(h,1),h.m(o,i)):h&&(at(),ut(h,1,1,(()=>{h=null})),ct()),t[1]?b&&(at(),ut(b,1,1,(()=>{b=null})),ct()):b?2&e&&lt(b,1):(b=Vo(),b.c(),lt(b,1),b.m(o,s));let n=u;u=j(t),u===n?k[u].p(t,e):(at(),ut(k[n],1,1,(()=>{k[n]=null})),ct(),d=k[u],d?d.p(t,e):(d=k[u]=v[u](t),d.c()),lt(d,1),d.m(a,null))},i(t){f||(lt(n.$$.fragment,t),lt(h),lt(b),lt(c.$$.fragment,t),lt(d),f=!0)},o(t){ut(n.$$.fragment,t),ut(h),ut(b),ut(c.$$.fragment,t),ut(d),f=!1},d(t){t&&$(e),ht(n),h&&h.d(),b&&b.d(),ht(c),k[u].d(),t&&$(_),t&&$(p),m=!1,g()}}}function Ko(t){let e,n;return e=new Ho({props:{themes:Yn,$$slots:{default:[Xo]},$$scope:{ctx:t}}}),{c(){mt(e.$$.fragment)},m(t,r){gt(e,t,r),n=!0},p(t,[n]){const r={};11&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Go(t,e,n){let r;u(t,xr,(t=>n(1,r=t))),window.onkeydown=ln,window.onkeyup=un,window.onkeypress=dn;let o=0;window.onbeforeunload=t=>{t.preventDefault(),t.returnValue=""};return[o,r,t=>n(0,o=t.currentTarget.scrollTop)]}yo();return new class extends yt{constructor(t){super(),vt(this,t,Go,Ko,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
